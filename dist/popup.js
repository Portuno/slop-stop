"use strict";(()=>{var d=5,E={REPORTER_HASH:"reporter_hash",SETTINGS:"settings"};var T=document.getElementById("settingsForm"),l=document.getElementById("reportLimit"),n=document.getElementById("saveButton"),m=document.getElementById("status"),S=document.getElementById("feedbackForm"),c=document.getElementById("feedbackText"),a=document.getElementById("feedbackButton"),i=document.getElementById("feedbackStatus"),o=(t,e=!1,s)=>{let r=s??m;r&&(r.textContent=t,r.className=`status ${e?"error":"success"}`,r.style.display="block",setTimeout(()=>{r.style.display="none"},3e3))},u=async()=>{try{let e=(await chrome.storage.sync.get(E.SETTINGS))[E.SETTINGS]||{};l&&(e.reportLimitThreshold?l.value=e.reportLimitThreshold.toString():l.value=d.toString())}catch(t){console.error("Error loading settings:",t)}};T?.addEventListener("submit",async t=>{if(t.preventDefault(),!(!l||!n)){n.disabled=!0,n.textContent="Saving...";try{let e=parseInt(l.value,10);if(isNaN(e)||e<1){o("Please enter a valid number (minimum 1)",!0),n.disabled=!1,n.textContent="Save Settings";return}await chrome.storage.sync.set({[E.SETTINGS]:{reportLimitThreshold:e}}),o("Settings saved successfully!")}catch(e){console.error("Error saving settings:",e),o("Error saving settings",!0)}finally{n.disabled=!1,n.textContent="Save Settings"}}});S?.addEventListener("submit",async t=>{if(t.preventDefault(),!c||!a||!i)return;let e=c.value.trim();if(!e){o("Comparte feedback antes de enviarlo.",!0,i);return}a.disabled=!0,a.textContent="Enviando...";try{let s=await chrome.runtime.sendMessage({type:"SUBMIT_FEEDBACK",payload:{feedback:e}});if(s?.success)o("Feedback enviado. \xA1Gracias!",!1,i),c.value="";else{let r=s?.error||"No se pudo enviar el feedback.";o(r,!0,i)}}catch(s){console.error("Error sending feedback:",s),o("No se pudo enviar el feedback.",!0,i)}finally{a.disabled=!1,a.textContent="Enviar feedback"}});u();})();
//# sourceMappingURL=popup.js.map
