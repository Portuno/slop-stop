"use strict";(()=>{var u=5,d={REPORTER_HASH:"reporter_hash",SETTINGS:"settings"};var E=document.getElementById("settingsForm"),l=document.getElementById("reportLimit"),r=document.getElementById("saveButton"),S=document.getElementById("status"),T=document.getElementById("feedbackForm"),c=document.getElementById("feedbackText"),a=document.getElementById("feedbackButton"),i=document.getElementById("feedbackStatus"),f=document.getElementById("supportButton"),o=(e,t=!1,s)=>{let n=s??S;n&&(n.textContent=e,n.className=`status ${t?"error":"success"}`,n.style.display="block",setTimeout(()=>{n.style.display="none"},3e3))},p=async()=>{try{let t=(await chrome.storage.sync.get(d.SETTINGS))[d.SETTINGS]||{};l&&(t.reportLimitThreshold?l.value=t.reportLimitThreshold.toString():l.value=u.toString())}catch{}};E?.addEventListener("submit",async e=>{if(e.preventDefault(),!(!l||!r)){r.disabled=!0,r.textContent="Saving...";try{let t=parseInt(l.value,10);if(isNaN(t)||t<1){o("Please enter a valid number (minimum 1)",!0),r.disabled=!1,r.textContent="Save Settings";return}await chrome.storage.sync.set({[d.SETTINGS]:{reportLimitThreshold:t}}),o("Settings saved successfully!")}catch(t){console.error("Error saving settings:",t),o("Error saving settings",!0)}finally{r.disabled=!1,r.textContent="Save Settings"}}});T?.addEventListener("submit",async e=>{if(e.preventDefault(),!c||!a||!i)return;let t=c.value.trim();if(!t){o("Please share feedback before submitting.",!0,i);return}a.disabled=!0,a.textContent="Sending...";try{let s=await chrome.runtime.sendMessage({type:"SUBMIT_FEEDBACK",payload:{feedback:t}});if(s?.success)o("Feedback sent. Thank you!",!1,i),c.value="";else{let n=s?.error||"Could not send feedback.";o(n,!0,i)}}catch{o("Could not send feedback.",!0,i)}finally{a.disabled=!1,a.textContent="Send feedback"}});var m=()=>{typeof window.kofiWidgetOverlay<"u"&&window.kofiWidgetOverlay.draw("stopslop",{type:"floating-chat","floating-chat.donateButton.text":"Support Us","floating-chat.donateButton.background-color":"#00b9fe","floating-chat.donateButton.text-color":"#fff"})};f?.addEventListener("click",()=>{window.open("https://ko-fi.com/stopslop","_blank")});p();document.readyState==="loading"?document.addEventListener("DOMContentLoaded",m):m();})();
//# sourceMappingURL=popup.js.map
