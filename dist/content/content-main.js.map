{
  "version": 3,
  "sources": ["../../src/adapters/adapter-interface.ts", "../../src/shared/constants.ts", "../../src/adapters/twitter-adapter.ts", "../../src/adapters/youtube-adapter.ts", "../../src/adapters/linkedin-adapter.ts", "../../src/adapters/website-adapter.ts", "../../src/shared/utils.ts", "../../src/content/slop-curtain.tsx", "../../src/content/confirmation-modal.tsx", "../../src/content/linkedin-post-finder.ts", "../../src/content/hotkeys.ts", "../../src/content/content-main.ts"],
  "sourcesContent": ["import { Platform, PlatformAdapter } from '../shared/types';\n\nexport abstract class BaseAdapter implements PlatformAdapter {\n  abstract getItemId(element: HTMLElement): string | null;\n  abstract getItemSelector(): string;\n  abstract getPlatformName(): Platform;\n  abstract canHandleUrl(url: string): boolean;\n\n  observeItems(callback: (items: HTMLElement[]) => void): () => void {\n    \n    let lastItemsCount = 0;\n    let checkCount = 0;\n    const maxChecks = 20; // For LinkedIn, check more times as content loads\n    const processedItemSet = new WeakSet<HTMLElement>();\n    let debounceTimer: number | null = null;\n    const DEBOUNCE_MS = 300; // Debounce callback calls to prevent excessive processing\n    \n    const checkForItems = () => {\n      const items = this.getCurrentItems();\n      \n      // Filter out items that have already been processed\n      const newItems = items.filter(item => !processedItemSet.has(item));\n      \n      // Only call callback if:\n      // 1. We found new items (not in processedItemSet) - this is the main condition\n      // 2. It's the first check (checkCount === 0) and we have items\n      // Do NOT call callback just because count changed - this causes infinite loops\n      const countChanged = items.length !== lastItemsCount;\n      const shouldCallCallback = items.length > 0 && (\n        newItems.length > 0 || \n        checkCount === 0\n      );\n      \n      if (shouldCallCallback) {\n        // Clear existing debounce timer\n        if (debounceTimer !== null) {\n          clearTimeout(debounceTimer);\n        }\n        \n        // Debounce the callback to prevent excessive calls\n        debounceTimer = window.setTimeout(() => {\n          // Mark all items as processed in WeakSet (but content script will track actual processing)\n          items.forEach(item => processedItemSet.add(item));\n          lastItemsCount = items.length;\n          try {\n            callback(items); // Pass all items so they get processed\n          } catch (error) {\n            console.error('[Slop-Stop] Error in callback:', error);\n          }\n          debounceTimer = null;\n        }, DEBOUNCE_MS);\n      }\n      \n      // For LinkedIn, keep checking for a while as content loads dynamically\n      if (this.getPlatformName() === 'linkedin' && checkCount < maxChecks) {\n        checkCount++;\n        setTimeout(checkForItems, 500);\n      }\n    };\n    \n    const observer = new MutationObserver(() => {\n      checkForItems();\n    });\n\n    observer.observe(document.body, {\n      childList: true,\n      subtree: true,\n    });\n\n    // Initial check\n    const initialItems = this.getCurrentItems();\n    \n    if (initialItems.length > 0) {\n      initialItems.forEach(item => processedItemSet.add(item));\n      lastItemsCount = initialItems.length;\n      callback(initialItems);\n    } else if (this.getPlatformName() === 'linkedin') {\n      // For LinkedIn, start delayed checking\n      setTimeout(checkForItems, 1000);\n    }\n\n    return () => observer.disconnect();\n  }\n\n  protected getCurrentItems(): HTMLElement[] {\n    const selector = this.getItemSelector();\n    return Array.from(document.querySelectorAll<HTMLElement>(selector));\n  }\n\n  createGhostContainer(originalElement: HTMLElement): HTMLElement {\n    const ghost = originalElement.cloneNode(true) as HTMLElement;\n    ghost.style.visibility = 'hidden';\n    ghost.style.pointerEvents = 'none';\n    \n    const overlay = document.createElement('div');\n    overlay.style.position = 'absolute';\n    overlay.style.top = '0';\n    overlay.style.left = '0';\n    overlay.style.width = '100%';\n    overlay.style.height = '100%';\n    overlay.style.zIndex = '9999';\n    overlay.setAttribute('data-slop-overlay', 'true');\n    \n    const rect = originalElement.getBoundingClientRect();\n    overlay.style.width = `${rect.width}px`;\n    overlay.style.height = `${rect.height}px`;\n    \n    const container = document.createElement('div');\n    container.style.position = 'relative';\n    container.style.width = `${rect.width}px`;\n    container.style.height = `${rect.height}px`;\n    container.appendChild(ghost);\n    container.appendChild(overlay);\n    \n    return container;\n  }\n}\n", "import { Platform } from './types';\n\nexport const DEFAULT_REPORT_LIMIT_THRESHOLD = 5;\n\nexport const STORAGE_KEYS = {\n  REPORTER_HASH: 'reporter_hash',\n  SETTINGS: 'settings',\n} as const;\n\nexport const PLATFORM_SELECTORS: Record<Platform, string> = {\n  twitter: 'article[data-testid=\"tweet\"]',\n  youtube: 'ytd-rich-item-renderer, ytd-video-renderer',\n  linkedin: '[data-urn*=\"urn:li:activity:\"]',\n  website: 'body',\n};\n\nexport const PLATFORM_DOMAINS: Record<Platform, string[]> = {\n  twitter: ['twitter.com', 'x.com'],\n  youtube: ['youtube.com'],\n  linkedin: ['linkedin.com'],\n  website: [],\n};\n\nexport const MESSAGE_TYPES = {\n  REPORT_SLOP: 'REPORT_SLOP',\n  REPORT_WEBSITE: 'REPORT_WEBSITE',\n  GET_SLOP_STATUS: 'GET_SLOP_STATUS',\n  GET_SETTINGS: 'GET_SETTINGS',\n  SET_SETTINGS: 'SET_SETTINGS',\n  SUBMIT_FEEDBACK: 'SUBMIT_FEEDBACK',\n} as const;\n", "import { BaseAdapter } from './adapter-interface';\nimport { Platform } from '../shared/types';\nimport { PLATFORM_DOMAINS } from '../shared/constants';\n\nexport class TwitterAdapter extends BaseAdapter {\n  getPlatformName(): Platform {\n    return 'twitter';\n  }\n\n  canHandleUrl(url: string): boolean {\n    const hostname = new URL(url).hostname.toLowerCase();\n    return PLATFORM_DOMAINS.twitter.some(domain => hostname.includes(domain));\n  }\n\n  getItemSelector(): string {\n    return 'article[data-testid=\"tweet\"]';\n  }\n\n  getItemId(element: HTMLElement): string | null {\n    const tweetId = element.getAttribute('data-tweet-id');\n    if (tweetId) {\n      return tweetId;\n    }\n\n    const link = element.querySelector<HTMLAnchorElement>('a[href*=\"/status/\"]');\n    if (link) {\n      const match = link.href.match(/\\/status\\/(\\d+)/);\n      if (match) {\n        return match[1];\n      }\n    }\n\n    const ariaLabel = element.getAttribute('aria-labelledby');\n    if (ariaLabel) {\n      return ariaLabel;\n    }\n\n    return null;\n  }\n\n  createGhostContainer(originalElement: HTMLElement): HTMLElement {\n    // The Anchor: Set the main post container to position: relative\n    // IMPORTANT: Keep the container visible and positioned correctly\n    const computedStyle = window.getComputedStyle(originalElement);\n    if (computedStyle.position === 'static') {\n      originalElement.style.position = 'relative';\n    }\n    // Ensure the container itself maintains visibility for layout\n    originalElement.style.visibility = 'visible';\n    originalElement.style.opacity = '1';\n    \n    // Store original height to ensure overlay covers it completely\n    const originalHeight = originalElement.offsetHeight || originalElement.getBoundingClientRect().height;\n    if (originalHeight > 0) {\n      // Ensure container maintains minimum height\n      originalElement.style.minHeight = `${originalHeight}px`;\n    }\n    \n    // The Ghosting: Hide ONLY the children inside the container, not the container itself\n    // This ensures the container maintains its space in the grid\n    const children = Array.from(originalElement.children) as HTMLElement[];\n    children.forEach((child) => {\n      // Skip if it's already our overlay\n      if (child.getAttribute('data-slop-overlay') === 'true') {\n        return;\n      }\n      child.style.visibility = 'hidden';\n      child.style.pointerEvents = 'none';\n    });\n    \n    // Also hide any images, videos, or other media directly in the element\n    const images = originalElement.querySelectorAll('img, video, svg');\n    images.forEach((media) => {\n      (media as HTMLElement).style.visibility = 'hidden';\n      (media as HTMLElement).style.pointerEvents = 'none';\n    });\n    \n    // Disable pointer events on the container itself (but keep it visible for layout)\n    originalElement.style.pointerEvents = 'none';\n    \n    // The Replacement: Create overlay as absolute child covering 100% of container\n    const overlay = document.createElement('div');\n    overlay.style.position = 'absolute';\n    overlay.style.top = '0';\n    overlay.style.left = '0';\n    overlay.style.right = '0';\n    overlay.style.bottom = '0';\n    overlay.style.width = '100%';\n    overlay.style.height = '100%';\n    if (originalHeight > 0) {\n      overlay.style.minHeight = `${originalHeight}px`; // Ensure minimum height matches original\n    }\n    // Copy border-radius from the original element to match exactly\n    overlay.style.borderRadius = computedStyle.borderRadius || '16px';\n    overlay.style.zIndex = '999999'; // Very high z-index to ensure it's above Twitter elements\n    overlay.style.opacity = '1';\n    overlay.style.visibility = 'visible';\n    overlay.style.display = 'flex';\n    overlay.style.pointerEvents = 'auto';\n    overlay.style.overflow = 'hidden'; // Prevent content from spilling out\n    overlay.setAttribute('data-slop-overlay', 'true');\n    \n    // Insert overlay as a child of the original element (not body)\n    originalElement.appendChild(overlay);\n    \n    return overlay;\n  }\n}\n", "import { BaseAdapter } from './adapter-interface';\nimport { Platform } from '../shared/types';\nimport { PLATFORM_DOMAINS } from '../shared/constants';\n\nexport class YouTubeAdapter extends BaseAdapter {\n  getPlatformName(): Platform {\n    return 'youtube';\n  }\n\n  canHandleUrl(url: string): boolean {\n    const hostname = new URL(url).hostname.toLowerCase();\n    return PLATFORM_DOMAINS.youtube.some(domain => hostname.includes(domain));\n  }\n\n  getItemSelector(): string {\n    return 'ytd-rich-item-renderer, ytd-video-renderer';\n  }\n\n  getItemId(element: HTMLElement): string | null {\n    // Strategy 1: Check data-video-id attribute on the element itself (most reliable)\n    const videoId = element.getAttribute('data-video-id');\n    if (videoId && videoId.length >= 11) {\n      return videoId;\n    }\n\n    // Strategy 2: Check for video ID in ytd-thumbnail elements FIRST (most reliable link location)\n    // YouTube's thumbnail component contains the primary video link\n    const thumbnails = element.querySelectorAll('ytd-thumbnail, yt-img-shadow');\n    for (const thumbnail of Array.from(thumbnails)) {\n      const thumbnailLink = thumbnail.querySelector<HTMLAnchorElement>('a[href*=\"/watch\"], a[href*=\"/shorts/\"]');\n      if (thumbnailLink) {\n        const href = thumbnailLink.href;\n        \n        if (href.includes('/watch')) {\n          try {\n            const url = new URL(href);\n            const v = url.searchParams.get('v');\n            if (v && v.length >= 11) {\n              return v;\n            }\n          } catch (e) {\n            // If URL parsing fails, try regex fallback\n            const match = href.match(/[?&]v=([^&]+)/);\n            if (match && match[1] && match[1].length >= 11) {\n              return match[1];\n            }\n          }\n        }\n        \n        if (href.includes('/shorts/')) {\n          const match = href.match(/\\/shorts\\/([^/?&]+)/);\n          if (match && match[1] && match[1].length >= 11) {\n            return match[1];\n          }\n        }\n      }\n    }\n\n    // Strategy 3: Check for video ID in the main video title/link (usually in ytd-video-meta-block or similar)\n    // Look for links that are likely the main video link (not channel links, etc.)\n    const mainVideoLinks = element.querySelectorAll<HTMLAnchorElement>('a[href*=\"/watch\"], a[href*=\"/shorts/\"]');\n    const videoIds = new Set<string>();\n    \n    for (const link of Array.from(mainVideoLinks)) {\n      const href = link.href;\n      \n      // Skip channel links and other non-video links\n      if (href.includes('/channel/') || href.includes('/user/') || href.includes('/c/') || href.includes('/@')) {\n        continue;\n      }\n      \n      let foundId: string | null = null;\n      \n      if (href.includes('/watch')) {\n        try {\n          const url = new URL(href);\n          const v = url.searchParams.get('v');\n          if (v && v.length >= 11) {\n            foundId = v;\n          }\n        } catch (e) {\n          const match = href.match(/[?&]v=([^&]+)/);\n          if (match && match[1] && match[1].length >= 11) {\n            foundId = match[1];\n          }\n        }\n      } else if (href.includes('/shorts/')) {\n        const match = href.match(/\\/shorts\\/([^/?&]+)/);\n        if (match && match[1] && match[1].length >= 11) {\n          foundId = match[1];\n        }\n      }\n      \n      if (foundId) {\n        videoIds.add(foundId);\n      }\n    }\n    \n    // If we found exactly one unique video ID, use it\n    // If multiple IDs found, prioritize the one that appears in thumbnail or title area\n    if (videoIds.size === 1) {\n      return Array.from(videoIds)[0];\n    } else if (videoIds.size > 1) {\n      // Multiple video IDs found - this shouldn't happen for a single video element\n      // Try to find the one in the title/link area (not in related videos)\n      const titleLink = element.querySelector<HTMLAnchorElement>('a#video-title, a[href*=\"/watch\"]:not([href*=\"/channel\"]):not([href*=\"/user\"]):not([href*=\"/c/\"]):not([href*=\"/@\"])');\n      if (titleLink) {\n        const href = titleLink.href;\n        if (href.includes('/watch')) {\n          try {\n            const url = new URL(href);\n            const v = url.searchParams.get('v');\n            if (v && v.length >= 11 && videoIds.has(v)) {\n              return v;\n            }\n          } catch (e) {\n            const match = href.match(/[?&]v=([^&]+)/);\n            if (match && match[1] && match[1].length >= 11 && videoIds.has(match[1])) {\n              return match[1];\n            }\n          }\n        }\n      }\n      // If we can't determine which one, return the first one (better than null)\n      return Array.from(videoIds)[0];\n    }\n\n    // Strategy 4: Search in parent elements (up to 3 levels) for video ID\n    // This handles cases where the video ID might be on a parent container\n    let parent = element.parentElement;\n    let depth = 0;\n    while (parent && depth < 3) {\n      const parentVideoId = parent.getAttribute('data-video-id');\n      if (parentVideoId && parentVideoId.length >= 11) {\n        return parentVideoId;\n      }\n      \n      // Check parent's thumbnail links\n      const parentThumbnails = parent.querySelectorAll('ytd-thumbnail, yt-img-shadow');\n      for (const thumbnail of Array.from(parentThumbnails)) {\n        const thumbnailLink = thumbnail.querySelector<HTMLAnchorElement>('a[href*=\"/watch\"], a[href*=\"/shorts/\"]');\n        if (thumbnailLink) {\n          const href = thumbnailLink.href;\n          \n          if (href.includes('/watch')) {\n            try {\n              const url = new URL(href);\n              const v = url.searchParams.get('v');\n              if (v && v.length >= 11) {\n                return v;\n              }\n            } catch (e) {\n              const match = href.match(/[?&]v=([^&]+)/);\n              if (match && match[1] && match[1].length >= 11) {\n                return match[1];\n              }\n            }\n          }\n          \n          if (href.includes('/shorts/')) {\n            const match = href.match(/\\/shorts\\/([^/?&]+)/);\n            if (match && match[1] && match[1].length >= 11) {\n              return match[1];\n            }\n          }\n        }\n      }\n      \n      parent = parent.parentElement;\n      depth++;\n    }\n\n    return null;\n  }\n\n  createGhostContainer(originalElement: HTMLElement): HTMLElement {\n    // The Anchor: Set the main post container to position: relative\n    // IMPORTANT: Keep the container visible and positioned correctly\n    const computedStyle = window.getComputedStyle(originalElement);\n    if (computedStyle.position === 'static') {\n      originalElement.style.position = 'relative';\n    }\n    // Ensure the container itself maintains visibility for layout\n    originalElement.style.visibility = 'visible';\n    originalElement.style.opacity = '1';\n    \n    // Store original height to ensure overlay covers it completely\n    const originalHeight = originalElement.offsetHeight || originalElement.getBoundingClientRect().height;\n    if (originalHeight > 0) {\n      // Ensure container maintains minimum height\n      originalElement.style.minHeight = `${originalHeight}px`;\n    }\n    \n    const videoId = this.getItemId(originalElement);\n    \n    // The Ghosting: Hide ONLY the children inside the container, not the container itself\n    const children = Array.from(originalElement.children) as HTMLElement[];\n    children.forEach((child) => {\n      // Skip if it's already our overlay\n      if (child.getAttribute('data-slop-overlay') === 'true') {\n        return;\n      }\n      child.style.visibility = 'hidden';\n      child.style.pointerEvents = 'none';\n    });\n    \n    // Hide images and video thumbnails within the element\n    const images = originalElement.querySelectorAll('img, yt-img-shadow img, yt-image img');\n    images.forEach((img) => {\n      (img as HTMLElement).style.visibility = 'hidden';\n      (img as HTMLElement).style.pointerEvents = 'none';\n    });\n    \n    // Hide video thumbnails and previews\n    const videos = originalElement.querySelectorAll('video, ytd-thumbnail video');\n    videos.forEach((video) => {\n      (video as HTMLElement).style.visibility = 'hidden';\n      (video as HTMLElement).style.pointerEvents = 'none';\n    });\n    \n    // Hide any background images\n    const elementsWithBg = originalElement.querySelectorAll('[style*=\"background-image\"]');\n    elementsWithBg.forEach((el) => {\n      const htmlEl = el as HTMLElement;\n      htmlEl.style.backgroundImage = 'none';\n    });\n    \n    // Disable pointer events on the container itself (but keep it visible for layout)\n    originalElement.style.pointerEvents = 'none';\n    \n    // The Replacement: Create overlay as absolute child covering 100% of container\n    const overlay = document.createElement('div');\n    overlay.style.position = 'absolute';\n    overlay.style.top = '0';\n    overlay.style.left = '0';\n    overlay.style.right = '0';\n    overlay.style.bottom = '0';\n    overlay.style.width = '100%';\n    overlay.style.height = '100%';\n    if (originalHeight > 0) {\n      overlay.style.minHeight = `${originalHeight}px`; // Ensure minimum height matches original\n    }\n    overlay.style.zIndex = '99999'; // Very high z-index to ensure it's above YouTube elements\n    overlay.style.opacity = '1';\n    overlay.style.display = 'flex';\n    overlay.style.visibility = 'visible';\n    overlay.style.pointerEvents = 'auto';\n    overlay.style.overflow = 'hidden'; // Prevent content from spilling out\n    overlay.setAttribute('data-slop-overlay', 'true');\n    overlay.setAttribute('data-video-id', videoId || '');\n    \n    // Insert overlay as a child of the original element\n    originalElement.appendChild(overlay);\n    \n    return overlay;\n  }\n}\n", "import { BaseAdapter } from './adapter-interface';\nimport { Platform } from '../shared/types';\nimport { PLATFORM_DOMAINS } from '../shared/constants';\n\nexport class LinkedInAdapter extends BaseAdapter {\n  getPlatformName(): Platform {\n    return 'linkedin';\n  }\n\n  canHandleUrl(url: string): boolean {\n    const hostname = new URL(url).hostname.toLowerCase();\n    return PLATFORM_DOMAINS.linkedin.some(domain => hostname.includes(domain));\n  }\n\n  getItemSelector(): string {\n    // LinkedIn has obfuscated classes and removed data-urn/data-id attributes\n    // Use structure-based selectors that don't rely on obfuscated class names\n    // Target elements that are likely posts based on their role and structure\n    return '[role=\"article\"], [role=\"region\"][aria-label*=\"Post\"], [role=\"region\"][aria-label*=\"post\"], div[data-test-id*=\"activity\"], div[data-test-id*=\"feed\"], section[class*=\"update\"], section[class*=\"post\"]';\n  }\n  \n  protected getCurrentItems(): HTMLElement[] {\n    // LinkedIn has obfuscated classes and removed data-urn/data-id attributes\n    // Use structure-based detection that doesn't rely on obfuscated class names\n    \n    // Try multiple strategies to find the main feed container\n    let mainFeed: HTMLElement | null = null;\n    \n    // Strategy 1: Look for main#workspace (original selector)\n    mainFeed = document.querySelector('main#workspace') as HTMLElement;\n    \n    // Strategy 2: Look for any main element with id=\"workspace\"\n    if (!mainFeed) {\n      const allMains = Array.from(document.querySelectorAll('main'));\n      mainFeed = allMains.find(m => m.id === 'workspace') as HTMLElement || null;\n    }\n    \n    // Strategy 3: Look for any main element\n    if (!mainFeed) {\n      mainFeed = document.querySelector('main') as HTMLElement;\n    }\n    \n    // Strategy 4: Look for body as last resort\n    if (!mainFeed) {\n      mainFeed = document.body;\n      console.warn('[Slop-Stop] main#workspace not found, using document.body as fallback');\n    }\n    \n    // #region agent log\n    const logDataMainFeed = {\n      location: 'linkedin-adapter.ts:26',\n      message: 'Main feed container search',\n      data: {\n        mainFeedFound: !!mainFeed,\n        mainFeedTag: mainFeed?.tagName,\n        mainFeedId: mainFeed?.id,\n        mainFeedClassName: mainFeed?.className?.substring(0, 100),\n        allMainsCount: document.querySelectorAll('main').length,\n        bodyChildrenCount: document.body.children.length,\n        url: window.location.href\n      },\n      timestamp: Date.now(),\n      sessionId: 'debug-session',\n      runId: 'run4',\n      hypothesisId: 'D'\n    };\n    fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(logDataMainFeed)\n    }).catch(() => {});\n    // #endregion\n    \n    if (!mainFeed) {\n      console.warn('[Slop-Stop] Could not find main feed container');\n      return [];\n    }\n    \n    // Try multiple ways to find the scroll container\n    let scrollContainer: HTMLElement | null = null;\n    const scrollContainerSelectors = [\n      '.scaffold-finite-scroll__content',\n      '[class*=\"scaffold-finite-scroll\"]',\n      'div[class*=\"scroll\"]'\n    ];\n    \n    for (const selector of scrollContainerSelectors) {\n      const found = mainFeed.querySelector(selector);\n      if (found) {\n        scrollContainer = found as HTMLElement;\n        console.log(`[Slop-Stop] Found scroll container using selector: ${selector}`);\n        break;\n      }\n    }\n    \n    // If no scroll container found, search more deeply in main#workspace\n    if (!scrollContainer) {\n      // Look for divs with scroll-related classes or styles deeper in the DOM\n      const allDivs = Array.from(mainFeed.querySelectorAll('div'));\n      for (const div of allDivs) {\n        const className = div.className || '';\n        const style = div.getAttribute('style') || '';\n        if (className.includes('scroll') || className.includes('feed') || \n            style.includes('overflow') && style.includes('auto')) {\n          // Check if this div has multiple children (likely the scroll container)\n          if (div.children.length > 5) {\n            scrollContainer = div;\n            console.log(`[Slop-Stop] Found scroll container by deep search: ${className.substring(0, 50)}`);\n            break;\n          }\n        }\n      }\n    }\n    \n    // If still no scroll container found, use main#workspace directly\n    if (!scrollContainer) {\n      scrollContainer = mainFeed as HTMLElement;\n      console.log('[Slop-Stop] Using main#workspace as scroll container');\n    }\n    \n    const allItems: HTMLElement[] = [];\n    const seen = new Set<HTMLElement>();\n    \n    // Strategy: Find all divs/sections within scroll container and filter by post characteristics\n    // But skip the scroll container itself and its immediate children if they're too large\n    const candidateElements = Array.from(scrollContainer.querySelectorAll('div, section, article'));\n    console.log(`[Slop-Stop] Found ${candidateElements.length} candidate elements in scroll container`);\n    \n    // Sort candidates by size (largest first) to detect parent containers before children\n    // This helps ensure we find the full post container, not just sub-elements\n    const sortedCandidates = candidateElements\n      .map(el => ({\n        element: el as HTMLElement,\n        size: (el.textContent?.length || 0) + (el.children.length * 100) + (el.querySelectorAll('button, [role=\"button\"]').length * 50)\n      }))\n      .sort((a, b) => b.size - a.size)\n      .map(item => item.element);\n    \n    // #region agent log\n    const logDataStart = {\n      location: 'linkedin-adapter.ts:50',\n      message: 'Starting structure-based detection',\n      data: {\n        candidateElementsCount: candidateElements.length,\n        sortedCandidatesCount: sortedCandidates.length,\n        scrollContainerFound: !!scrollContainer,\n        scrollContainerTag: scrollContainer?.tagName\n      },\n      timestamp: Date.now(),\n      sessionId: 'debug-session',\n      runId: 'run4',\n      hypothesisId: 'D'\n    };\n    fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(logDataStart)\n    }).catch(() => {});\n    // #endregion\n    \n    for (const htmlEl of sortedCandidates) {\n      // Skip if already seen (or if it's a descendant of an already-detected post)\n      if (seen.has(htmlEl)) continue;\n      \n      // Skip if it's the scroll container itself or main#workspace\n      if (htmlEl === scrollContainer || htmlEl === mainFeed || htmlEl.tagName === 'MAIN') {\n        continue;\n      }\n      \n      // Skip if this element is a descendant of any already-detected post\n      let isDescendantOfPost = false;\n      for (const existingItem of allItems) {\n        if (existingItem.contains(htmlEl)) {\n          isDescendantOfPost = true;\n          break;\n        }\n      }\n      if (isDescendantOfPost) {\n        seen.add(htmlEl); // Mark as seen to avoid checking again\n        continue;\n      }\n      \n      // Post detection criteria (structure-based, not class-based)\n      // STRICT: Only detect elements that have ALL characteristics of a COMPLETE post\n      const textLength = htmlEl.textContent?.length || 0;\n      const buttons = htmlEl.querySelectorAll('button, [role=\"button\"]');\n      const buttonsCount = buttons.length;\n      const images = htmlEl.querySelectorAll('img');\n      const imagesCount = images.length;\n      const childrenCount = htmlEl.children.length;\n      \n      // Check for LinkedIn-specific engagement buttons (like, comment, share)\n      // A COMPLETE post MUST have engagement buttons\n      const hasEngagementButtons = Array.from(buttons).some(btn => {\n        const btnText = (btn.textContent || '').toLowerCase();\n        return btnText.includes('like') || btnText.includes('comentar') || \n               btnText.includes('comment') || btnText.includes('share') ||\n               btnText.includes('compartir') || btnText.includes('recomendar');\n      });\n      \n      // Check for profile images (posts usually have profile pictures)\n      const hasProfileImage = Array.from(images).some(img => {\n        const alt = (img.getAttribute('alt') || '').toLowerCase();\n        return alt.includes('profile') || alt.includes('avatar') || alt.includes('member');\n      });\n      \n      // Check if element has minimum visual height (posts are usually tall)\n      const rect = htmlEl.getBoundingClientRect();\n      const hasMinimumHeight = rect.height >= 150; // Posts are usually at least 150px tall\n      \n      // Check if element is a direct child of scroll container or close to it (top-level posts)\n      // This helps avoid detecting nested sub-elements\n      let isTopLevel = false;\n      let parent = htmlEl.parentElement;\n      let depth = 0;\n      while (parent && depth < 5) {\n        if (parent === scrollContainer) {\n          isTopLevel = depth <= 2; // Direct child or grandchild of scroll container\n          break;\n        }\n        parent = parent.parentElement;\n        depth++;\n      }\n      \n      // Balanced Post characteristics - detect complete posts but allow some flexibility:\n      // 1. Has reasonable content (50-5000 chars)\n      // 2. Has engagement buttons OR profile image (strong indicator)\n      // 3. Has structure (children OR images)\n      // 4. Has minimum visual height OR is top-level (is substantial)\n      // 5. Is top-level in DOM hierarchy (avoids nested elements)\n      const isPost = \n        textLength >= 50 && textLength <= 5000 && // Reasonable content size\n        (hasEngagementButtons || hasProfileImage) && // Has engagement buttons OR profile image\n        (childrenCount >= 2 || imagesCount > 0) && // Has structure\n        (hasMinimumHeight || isTopLevel) && // Has minimum height OR is top-level\n        isTopLevel && // Is top-level in DOM hierarchy (required to avoid nested)\n        (htmlEl.tagName === 'DIV' || htmlEl.tagName === 'SECTION' || htmlEl.tagName === 'ARTICLE'); // Valid container\n      \n      if (isPost) {\n        // Check if this post contains any already-detected posts (shouldn't happen with sorted order, but double-check)\n        const nestedPosts: HTMLElement[] = [];\n        for (const existingItem of allItems) {\n          if (htmlEl.contains(existingItem)) {\n            nestedPosts.push(existingItem);\n          }\n        }\n        \n        // Remove nested posts (they're children of this larger post)\n        for (const nestedPost of nestedPosts) {\n          const index = allItems.indexOf(nestedPost);\n          if (index !== -1) {\n            allItems.splice(index, 1);\n            seen.delete(nestedPost);\n          }\n        }\n        \n        // Mark this element and ALL its descendants as seen to avoid detecting them as separate posts\n        seen.add(htmlEl);\n        const allDescendants = htmlEl.querySelectorAll('div, section, article');\n        allDescendants.forEach(desc => seen.add(desc as HTMLElement));\n        \n        allItems.push(htmlEl);\n        \n        console.log(`[Slop-Stop] Found post by structure:`, {\n          tagName: htmlEl.tagName,\n          className: htmlEl.className?.substring(0, 100),\n          textLength,\n          buttonsCount,\n          imagesCount,\n          hasEngagementButtons,\n          hasProfileImage,\n          descendantsMarked: allDescendants.length\n        });\n        \n        // #region agent log\n        const logDataPost = {\n          location: 'linkedin-adapter.ts:110',\n          message: 'Found post by structure',\n          data: {\n            tagName: htmlEl.tagName,\n            className: htmlEl.className?.substring(0, 100),\n            textLength: textLength,\n            buttonsCount: buttonsCount,\n            imagesCount: imagesCount,\n            hasEngagementButtons: hasEngagementButtons,\n            hasProfileImage: hasProfileImage,\n            hasMinimumHeight: hasMinimumHeight,\n            isTopLevel: isTopLevel,\n            depth: depth,\n            height: rect.height,\n            descendantsMarked: allDescendants.length,\n            nestedPostsRemoved: nestedPosts.length\n          },\n          timestamp: Date.now(),\n          sessionId: 'debug-session',\n          runId: 'run5',\n          hypothesisId: 'D'\n        };\n        fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(logDataPost)\n        }).catch(() => {});\n        // #endregion\n      }\n    }\n    \n    // If we found posts, return them\n    if (allItems.length > 0) {\n      console.log(`[Slop-Stop] Found ${allItems.length} posts using structure-based detection`);\n      \n    // #region agent log\n    const logDataReturn = {\n      location: 'linkedin-adapter.ts:125',\n      message: 'getCurrentItems returning (structure-based)',\n      data: {\n        itemsCount: allItems.length,\n        items: allItems.slice(0, 5).map(el => ({\n          tagName: el.tagName,\n          className: el.className?.substring(0, 50),\n          id: el.id?.substring(0, 30),\n          textLength: el.textContent?.length,\n          buttonsCount: el.querySelectorAll('button, [role=\"button\"]').length,\n          imagesCount: el.querySelectorAll('img').length,\n          childrenCount: el.children.length\n        }))\n      },\n      timestamp: Date.now(),\n      sessionId: 'debug-session',\n      runId: 'run4',\n      hypothesisId: 'D'\n    };\n      fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(logDataReturn)\n      }).catch(() => {});\n      // #endregion\n      \n      return allItems;\n    }\n    \n    // Fallback: Use aggressive DOM inspection as last resort\n    console.log('[Slop-Stop] No posts found with structure-based detection, using aggressive fallback...');\n    \n    // #region agent log\n    const logDataFallback = {\n      location: 'linkedin-adapter.ts:135',\n      message: 'Starting aggressive fallback',\n      data: {\n        timestamp: Date.now()\n      },\n      sessionId: 'debug-session',\n      runId: 'run3',\n      hypothesisId: 'P'\n    };\n    fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(logDataFallback)\n    }).catch(() => {});\n    // #endregion\n    \n    // Search all elements in main#workspace for posts by content analysis\n    const allMainChildren = Array.from(mainFeed.querySelectorAll('*')).slice(0, 1000);\n    const potentialPosts: Array<{element: HTMLElement, reason: string, data: any}> = [];\n    \n    allMainChildren.forEach((el) => {\n      const htmlEl = el as HTMLElement;\n      \n      // Skip if it's the main feed container\n      if (htmlEl.tagName === 'MAIN' || htmlEl.id === 'workspace') {\n        return;\n      }\n      \n      const text = htmlEl.textContent || '';\n      const textLength = text.length;\n      const buttons = htmlEl.querySelectorAll('button, [role=\"button\"]');\n      const buttonsCount = buttons.length;\n      const images = htmlEl.querySelectorAll('img');\n      const imagesCount = images.length;\n      \n      // Look for LinkedIn-specific engagement buttons\n      const hasEngagementButtons = Array.from(buttons).some(btn => {\n        const btnText = (btn.textContent || '').toLowerCase();\n        return btnText.includes('like') || btnText.includes('comentar') || \n               btnText.includes('comment') || btnText.includes('share') ||\n               btnText.includes('compartir') || btnText.includes('recomendar') ||\n               btnText.includes('follow') || btnText.includes('connect');\n      });\n      \n      // Check for profile images\n      const hasProfileImage = Array.from(images).some(img => {\n        const alt = (img.getAttribute('alt') || '').toLowerCase();\n        return alt.includes('profile') || alt.includes('avatar') || alt.includes('member');\n      });\n      \n      // STRICT Post detection for fallback: must have ALL characteristics of complete post\n      const rect = htmlEl.getBoundingClientRect();\n      const hasMinimumHeight = rect.height >= 150;\n      \n      // Check if element is top-level\n      let isTopLevel = false;\n      let parent = htmlEl.parentElement;\n      let depth = 0;\n      while (parent && depth < 5) {\n        if (parent === mainFeed || parent === scrollContainer) {\n          isTopLevel = depth <= 2;\n          break;\n        }\n        parent = parent.parentElement;\n        depth++;\n      }\n      \n      // Post detection: reasonable size, has buttons, has LinkedIn indicators, is top-level\n      // Balanced criteria matching main detection logic\n      const isPost = \n        textLength >= 50 && textLength <= 5000 &&\n        (hasEngagementButtons || hasProfileImage) &&\n        (htmlEl.children.length >= 2 || imagesCount > 0) &&\n        (hasMinimumHeight || isTopLevel) &&\n        isTopLevel &&\n        (htmlEl.tagName === 'DIV' || htmlEl.tagName === 'SECTION' || htmlEl.tagName === 'ARTICLE');\n      \n      if (isPost) {\n        // Find the top-level post container (walk up the tree)\n        let container = htmlEl;\n        let parent = htmlEl.parentElement;\n        let depth = 0;\n        \n        while (parent && depth < 5 && parent !== mainFeed) {\n          const parentTextLength = (parent.textContent || '').length;\n          const parentButtons = parent.querySelectorAll('button, [role=\"button\"]').length;\n          \n          // If parent also looks like a post container and is not too large, use it\n          if (parentButtons >= 2 && parentTextLength >= 50 && parentTextLength <= 3000) {\n            container = parent as HTMLElement;\n          } else if (parentTextLength > 3000) {\n            // Parent is too large, stop here\n            break;\n          }\n          parent = parent.parentElement;\n          depth++;\n        }\n        \n        // Final validation\n        if (container.tagName === 'MAIN' || container.id === 'workspace') {\n          return;\n        }\n        \n        const containerTextLength = container.textContent?.length || 0;\n        if (containerTextLength < 50 || containerTextLength > 3000) {\n          return;\n        }\n        \n        potentialPosts.push({\n          element: container,\n          reason: hasEngagementButtons ? 'hasEngagementButtons' : (hasProfileImage ? 'hasProfileImage' : 'isSubstantialContainer'),\n          data: {\n            tagName: container.tagName,\n            className: container.className?.substring(0, 150) || '',\n            textLength: containerTextLength,\n            buttonsCount: container.querySelectorAll('button, [role=\"button\"]').length,\n            imagesCount: container.querySelectorAll('img').length\n          }\n        });\n      }\n    });\n    \n    // Remove duplicates and add to allItems\n    const uniquePotentialPosts = Array.from(\n      new Map(potentialPosts.map(p => [p.element, p])).values()\n    );\n    \n    console.log(`[Slop-Stop] Found ${uniquePotentialPosts.length} potential posts by aggressive fallback`);\n    \n    uniquePotentialPosts.forEach(({element}) => {\n      if (!seen.has(element)) {\n        seen.add(element);\n        allItems.push(element);\n      }\n    });\n    \n    console.log(`[Slop-Stop] Total unique LinkedIn items found: ${allItems.length}`);\n    \n    // #region agent log\n    const logDataReturn2 = {\n      location: 'linkedin-adapter.ts:200',\n      message: 'getCurrentItems returning (aggressive fallback)',\n      data: {\n        itemsCount: allItems.length,\n        items: allItems.slice(0, 5).map(el => ({\n          tagName: el.tagName,\n          className: el.className?.substring(0, 50),\n          id: el.id?.substring(0, 30),\n          textLength: el.textContent?.length,\n          buttonsCount: el.querySelectorAll('button, [role=\"button\"]').length,\n          imagesCount: el.querySelectorAll('img').length,\n          childrenCount: el.children.length\n        }))\n      },\n      timestamp: Date.now(),\n      sessionId: 'debug-session',\n      runId: 'run4',\n      hypothesisId: 'D'\n    };\n    fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(logDataReturn2)\n    }).catch(() => {});\n    // #endregion\n    \n    return allItems;\n  }\n\n  getItemId(element: HTMLElement): string | null {\n    // Strategy 1: Try to find the unique post link/URL (like Twitter does)\n    // LinkedIn posts have links like: https://www.linkedin.com/feed/update/urn:li:activity:XXXXXXX\n    // or links with activity IDs in query params or path\n    const postLinks = element.querySelectorAll<HTMLAnchorElement>('a[href*=\"/feed/update\"], a[href*=\"activity\"], a[href*=\"/posts/\"]');\n    for (const link of Array.from(postLinks)) {\n      const href = link.href;\n      // Try to extract activity ID from URL\n      // Pattern 1: /feed/update/urn:li:activity:XXXXXXX\n      let match = href.match(/\\/feed\\/update\\/urn:li:activity:(\\d+)/);\n      if (match) {\n        // #region agent log\n        const logDataLink = {location:'linkedin-adapter.ts:517',message:'Found post ID from link URL',data:{activityId:match[1],href:href.substring(0,100),method:'feed/update/urn',timestamp:Date.now(),sessionId:'debug-session',runId:'run7',hypothesisId:'E'}};\n        fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(logDataLink)}).catch(()=>{});\n        // #endregion\n        return match[1];\n      }\n      // Pattern 2: /posts/XXXXXXX or activity=XXXXXXX in query params\n      match = href.match(/\\/posts\\/([^/?]+)/) || href.match(/[?&]activity=([^&]+)/) || href.match(/activity[=:](\\d+)/);\n      if (match) {\n        // #region agent log\n        const logDataLink2 = {location:'linkedin-adapter.ts:525',message:'Found post ID from link URL (pattern 2)',data:{activityId:match[1],href:href.substring(0,100),method:'posts/activity',timestamp:Date.now(),sessionId:'debug-session',runId:'run7',hypothesisId:'E'}};\n        fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(logDataLink2)}).catch(()=>{});\n        // #endregion\n        return match[1];\n      }\n    }\n    \n    // Strategy 2: Try data-id first (LinkedIn uses this)\n    let id = element.getAttribute('data-id');\n    if (id?.startsWith('urn:li:activity:')) {\n      const match = id.match(/urn:li:activity:(\\d+)/);\n      if (match) {\n        // #region agent log\n        const logDataAttr = {location:'linkedin-adapter.ts:533',message:'Found post ID from data-id attribute',data:{activityId:match[1],method:'data-id',timestamp:Date.now(),sessionId:'debug-session',runId:'run7',hypothesisId:'E'}};\n        fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(logDataAttr)}).catch(()=>{});\n        // #endregion\n        return match[1];\n      }\n      return id;\n    }\n    \n    // Strategy 3: Try data-urn\n    let urn = element.getAttribute('data-urn');\n    \n    // If not on the element itself, search in parent elements (up to 10 levels deep)\n    if (!urn && !id) {\n      let parent = element.parentElement;\n      let depth = 0;\n      while (parent && depth < 10) {\n        // Also search for links in parent\n        const parentLinks = parent.querySelectorAll<HTMLAnchorElement>('a[href*=\"/feed/update\"], a[href*=\"activity\"], a[href*=\"/posts/\"]');\n        for (const link of Array.from(parentLinks)) {\n          const href = link.href;\n          let match = href.match(/\\/feed\\/update\\/urn:li:activity:(\\d+)/) || href.match(/\\/posts\\/([^/?]+)/) || href.match(/[?&]activity=([^&]+)/) || href.match(/activity[=:](\\d+)/);\n          if (match) {\n            // #region agent log\n            const logDataParentLink = {location:'linkedin-adapter.ts:548',message:'Found post ID from parent link',data:{activityId:match[1],depth:depth,href:href.substring(0,100),timestamp:Date.now(),sessionId:'debug-session',runId:'run7',hypothesisId:'E'}};\n            fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(logDataParentLink)}).catch(()=>{});\n            // #endregion\n            return match[1];\n          }\n        }\n        \n        id = parent.getAttribute('data-id');\n        if (id?.startsWith('urn:li:activity:')) {\n          const match = id.match(/urn:li:activity:(\\d+)/);\n          if (match) return match[1];\n          return id;\n        }\n        urn = parent.getAttribute('data-urn');\n        if (urn?.startsWith('urn:li:activity:')) break;\n        parent = parent.parentElement;\n        depth++;\n      }\n    }\n    \n    \n    if (urn?.startsWith('urn:li:activity:')) {\n      const match = urn.match(/urn:li:activity:(\\d+)/);\n      if (match) {\n        // #region agent log\n        const logDataUrn = {location:'linkedin-adapter.ts:567',message:'Found post ID from data-urn attribute',data:{activityId:match[1],method:'data-urn',timestamp:Date.now(),sessionId:'debug-session',runId:'run7',hypothesisId:'E'}};\n        fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(logDataUrn)}).catch(()=>{});\n        // #endregion\n        return match[1];\n      }\n      return urn;\n    }\n\n    // Strategy 4: Try data-activity-id\n    let activityId = element.getAttribute('data-activity-id');\n    if (!activityId) {\n      // Search in parent elements\n      let parent = element.parentElement;\n      let depth = 0;\n      while (parent && depth < 10) {\n        activityId = parent.getAttribute('data-activity-id');\n        if (activityId) break;\n        parent = parent.parentElement;\n        depth++;\n      }\n    }\n    \n    if (activityId) {\n      // #region agent log\n      const logDataActivityId = {location:'linkedin-adapter.ts:586',message:'Found post ID from data-activity-id attribute',data:{activityId:activityId,method:'data-activity-id',timestamp:Date.now(),sessionId:'debug-session',runId:'run7',hypothesisId:'E'}};\n      fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(logDataActivityId)}).catch(()=>{});\n      // #endregion\n      return activityId;\n    }\n\n    // Last resort: generate ID from element position, content hash, and unique attributes\n    // This allows us to work even if LinkedIn doesn't expose URNs\n    // IMPORTANT: Don't use timestamp/random here - we need stable IDs for the same element\n    // Use a stable hash based on content and position\n    // #region agent log\n    const logDataFallback = {location:'linkedin-adapter.ts:595',message:'Using fallback hash-based ID (no unique link found)',data:{elementTagName:element.tagName,hasLinks:postLinks.length>0,timestamp:Date.now(),sessionId:'debug-session',runId:'run7',hypothesisId:'E'}};\n    fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(logDataFallback)}).catch(()=>{});\n    // #endregion\n    \n    const textContent = element.textContent?.substring(0, 300) || '';\n    const position = Array.from(element.parentElement?.children || []).indexOf(element);\n    \n    // Include element's class names and any unique attributes for better uniqueness\n    const className = element.className || '';\n    const idAttr = element.id || '';\n    \n    // Try to find a more stable identifier - check for any data attributes\n    const dataAttrs: string[] = [];\n    Array.from(element.attributes).forEach(attr => {\n      if (attr.name.startsWith('data-') && attr.value) {\n        dataAttrs.push(`${attr.name}=${attr.value.substring(0, 50)}`);\n      }\n    });\n    \n    const uniqueString = `${textContent}-${className}-${idAttr}-${position}-${dataAttrs.join('-')}`;\n    \n    // Better hash function - stable across page loads\n    let hash = 0;\n    for (let i = 0; i < uniqueString.length; i++) {\n      const char = uniqueString.charCodeAt(i);\n      hash = ((hash << 5) - hash) + char;\n      hash = hash & hash; // Convert to 32bit integer\n    }\n    \n    // Use a stable ID based on content hash and position (no timestamp/random)\n    // This ensures the same post always gets the same ID\n    return `linkedin-${position}-${Math.abs(hash)}`;\n  }\n\n  createGhostContainer(originalElement: HTMLElement): HTMLElement {\n    // The Anchor: Set the main post container to position: relative\n    // IMPORTANT: Keep the container visible and positioned correctly\n    const computedStyle = window.getComputedStyle(originalElement);\n    if (computedStyle.position === 'static') {\n      originalElement.style.position = 'relative';\n    }\n    // Ensure the container itself maintains visibility for layout\n    originalElement.style.visibility = 'visible';\n    originalElement.style.opacity = '1';\n    \n    // IMPORTANT: Ensure overlay stays within post container bounds\n    // Set overflow: hidden on the container to prevent overlay from spilling out\n    // Store original overflow value to potentially restore later\n    const originalOverflow = computedStyle.overflow;\n    if (originalOverflow !== 'hidden') {\n      originalElement.style.overflow = 'hidden';\n      // Store original overflow value as data attribute for potential restoration\n      if (!originalElement.hasAttribute('data-slop-original-overflow')) {\n        originalElement.setAttribute('data-slop-original-overflow', originalOverflow);\n      }\n    }\n    \n    // Store original height to ensure overlay covers it completely\n    const originalHeight = originalElement.offsetHeight || originalElement.getBoundingClientRect().height;\n\n    // Para LinkedIn no queremos mantener la altura original: debe colapsar.\n    // Para otras plataformas mantenemos el comportamiento previo (min-height).\n    if (this.getPlatformName() !== 'linkedin' && originalHeight > 0) {\n      originalElement.style.minHeight = `${originalHeight}px`;\n    } else {\n      // En LinkedIn reducimos altura y eliminamos m\u00EDnimos previos.\n      originalElement.style.minHeight = '0px';\n    }\n\n    // LinkedIn-specific: al censurar, limitar altura m\u00E1xima para ahorrar espacio.\n    originalElement.style.maxHeight = '250px';\n    \n    // The Ghosting: Hide ONLY the children inside the container, not the container itself\n    const children = Array.from(originalElement.children) as HTMLElement[];\n    children.forEach((child) => {\n      // Skip if it's already our overlay\n      if (child.getAttribute('data-slop-overlay') === 'true') {\n        return;\n      }\n      child.style.visibility = 'hidden';\n      child.style.pointerEvents = 'none';\n    });\n    \n    // Also hide any images, videos, or other media directly in the element\n    const images = originalElement.querySelectorAll('img, video, svg');\n    images.forEach((media) => {\n      (media as HTMLElement).style.visibility = 'hidden';\n      (media as HTMLElement).style.pointerEvents = 'none';\n    });\n    \n    // Disable pointer events on the container itself (but keep it visible for layout)\n    originalElement.style.pointerEvents = 'none';\n    \n    // The Replacement: Create overlay as absolute child covering 100% of container\n    // IMPORTANT: Use position: absolute (not fixed) so it stays within the post container\n    const overlay = document.createElement('div');\n    overlay.style.position = 'absolute';\n    overlay.style.top = '0';\n    overlay.style.left = '0';\n    overlay.style.right = '0';\n    overlay.style.bottom = '0';\n    overlay.style.width = '100%';\n    overlay.style.height = '100%';\n    if (originalHeight > 0) {\n      // Mantener suficiente altura para que el overlay cubra el post,\n      // pero respetando el l\u00EDmite de 250px del contenedor.\n      const clampedHeight = Math.min(originalHeight, 250);\n      overlay.style.minHeight = `${clampedHeight}px`;\n      overlay.style.maxHeight = '250px';\n    } else {\n      overlay.style.maxHeight = '250px';\n    }\n    overlay.style.zIndex = '9999'; // High z-index but not too high to avoid overlapping navigation\n    overlay.style.opacity = '1';\n    overlay.style.visibility = 'visible';\n    overlay.style.display = 'flex';\n    overlay.style.pointerEvents = 'auto';\n    overlay.style.overflow = 'hidden'; // Prevent content from spilling out\n    overlay.setAttribute('data-slop-overlay', 'true');\n    \n    // #region agent log\n    const logDataOverlay = {location:'linkedin-adapter.ts:650',message:'Creating overlay',data:{originalElementTag:originalElement.tagName,originalHeight:originalHeight,overlayPosition:'absolute',overlayZIndex:'9999',hasOverflowHidden:computedStyle.overflow==='hidden',timestamp:Date.now(),sessionId:'debug-session',runId:'run7',hypothesisId:'A'}};\n    fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(logDataOverlay)}).catch(()=>{});\n    // #endregion\n    \n    // Insert overlay as a child of the original element\n    originalElement.appendChild(overlay);\n    \n    return overlay;\n  }\n}\n", "import { BaseAdapter } from './adapter-interface';\nimport { Platform } from '../shared/types';\nimport { PLATFORM_DOMAINS } from '../shared/constants';\n\nexport class WebsiteAdapter extends BaseAdapter {\n  getPlatformName(): Platform {\n    return 'website';\n  }\n\n  canHandleUrl(url: string): boolean {\n    const hostname = new URL(url).hostname.toLowerCase();\n    const allOtherDomains = [\n      ...PLATFORM_DOMAINS.twitter,\n      ...PLATFORM_DOMAINS.youtube,\n      ...PLATFORM_DOMAINS.linkedin,\n    ];\n    return !allOtherDomains.some(domain => hostname.includes(domain));\n  }\n\n  getItemSelector(): string {\n    return 'body';\n  }\n\n  getItemId(element: HTMLElement): string | null {\n    return window.location.href;\n  }\n\n  createGhostContainer(originalElement: HTMLElement): HTMLElement {\n    const overlay = document.createElement('div');\n    overlay.style.position = 'fixed';\n    overlay.style.top = '0';\n    overlay.style.left = '0';\n    overlay.style.width = '100%';\n    overlay.style.height = '100%';\n    overlay.style.zIndex = '99999';\n    overlay.setAttribute('data-slop-overlay', 'true');\n    \n    document.body.appendChild(overlay);\n    \n    return overlay;\n  }\n}\n", "import { Platform, PlatformAdapter } from './types';\nimport { PLATFORM_DOMAINS } from './constants';\n\nexport const detectPlatform = (url: string): Platform => {\n  const hostname = new URL(url).hostname.toLowerCase();\n  \n  for (const [platform, domains] of Object.entries(PLATFORM_DOMAINS)) {\n    if (domains.some(domain => hostname.includes(domain))) {\n      return platform as Platform;\n    }\n  }\n  \n  return 'website';\n};\n\nexport const generateUUID = (): string => {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n    const r = (Math.random() * 16) | 0;\n    const v = c === 'x' ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n};\n\nexport const getElementDimensions = (element: HTMLElement): { width: number; height: number } => {\n  const rect = element.getBoundingClientRect();\n  return {\n    width: rect.width,\n    height: rect.height,\n  };\n};\n\nexport const createOverlayContainer = (originalElement: HTMLElement): HTMLElement => {\n  const overlay = document.createElement('div');\n  overlay.style.position = 'absolute';\n  overlay.style.top = '0';\n  overlay.style.left = '0';\n  overlay.style.width = '100%';\n  overlay.style.height = '100%';\n  overlay.style.zIndex = '9999';\n  overlay.setAttribute('data-slop-overlay', 'true');\n  \n  const rect = originalElement.getBoundingClientRect();\n  overlay.style.width = `${rect.width}px`;\n  overlay.style.height = `${rect.height}px`;\n  \n  return overlay;\n};\n", "export interface SlopCurtainOptions {\n  reportCount: number;\n  platform?: 'youtube' | 'twitter' | 'linkedin' | 'website';\n  onShow: () => void;\n  onReport: () => void;\n}\n\nexport const createSlopCurtain = (options: SlopCurtainOptions): HTMLElement => {\n  const curtain = document.createElement('div');\n  curtain.className = `slop-curtain${options.platform ? ` slop-curtain--${options.platform}` : ''}`;\n  curtain.setAttribute('data-slop-curtain', 'true');\n\n  if (options.platform === 'website') {\n    document.body.dataset.slopCurtainScrollLocked = 'true';\n    document.body.style.overflow = 'hidden';\n  }\n\n  const handleShow = () => {\n    // Add smooth fade-out transition\n    curtain.style.transition = 'opacity 0.3s ease-out';\n    curtain.style.opacity = '0';\n    \n    // Call onShow after transition completes\n    setTimeout(() => {\n      options.onShow();\n      if (document.body.dataset.slopCurtainScrollLocked) {\n        document.body.style.overflow = '';\n        delete document.body.dataset.slopCurtainScrollLocked;\n      }\n    }, 300);\n  };\n\n  // Main content container (centered)\n  const contentContainer = document.createElement('div');\n  contentContainer.className = 'slop-curtain-content';\n\n  if (options.platform === 'website') {\n    // Immersive security screen for websites\n    const gradientOverlay = document.createElement('div');\n    gradientOverlay.className = 'slop-curtain-gradient';\n    curtain.appendChild(gradientOverlay);\n\n    contentContainer.classList.add('slop-curtain-content--website');\n\n    const icon = document.createElement('div');\n    icon.className = 'slop-curtain-icon';\n    icon.innerHTML = '\u26A0\uFE0F';\n    icon.setAttribute('aria-hidden', 'true');\n\n    const headline = document.createElement('h2');\n    headline.className = 'slop-curtain-headline';\n    headline.textContent = 'Access Restricted: Community-Flagged Slop';\n\n    const subtext = document.createElement('p');\n    subtext.className = 'slop-curtain-subtext';\n    subtext.textContent =\n      'Human curators have identified this entire website as a primary source of AI-generated filler or low-quality content.';\n\n    const counterBadge = document.createElement('div');\n    counterBadge.className = 'slop-curtain-counter';\n    counterBadge.textContent = `[${options.reportCount}] Humans have flagged this domain as Slop`;\n\n    const buttons = document.createElement('div');\n    buttons.className = 'slop-curtain-buttons';\n\n    const returnButton = document.createElement('button');\n    returnButton.className = 'slop-curtain-button slop-curtain-button--primary';\n    returnButton.textContent = 'Take me back to safety';\n    returnButton.setAttribute('aria-label', 'Return to previous page');\n    returnButton.setAttribute('tabindex', '0');\n\n    const handleReturn = () => {\n      window.history.back();\n      if (document.body.dataset.slopCurtainScrollLocked) {\n        document.body.style.overflow = '';\n        delete document.body.dataset.slopCurtainScrollLocked;\n      }\n      curtain.remove();\n    };\n\n    returnButton.addEventListener('click', handleReturn);\n    returnButton.addEventListener('keydown', (e) => {\n      if (e.key === 'Enter' || e.key === ' ') {\n        e.preventDefault();\n        handleReturn();\n      }\n    });\n\n    const continueButton = document.createElement('button');\n    continueButton.className = 'slop-curtain-button slop-curtain-button--secondary';\n    continueButton.textContent = 'Continue anyway';\n    continueButton.setAttribute('aria-label', 'Continue to website anyway');\n    continueButton.setAttribute('tabindex', '0');\n\n    const handleContinue = () => {\n      handleShow();\n    };\n\n    continueButton.addEventListener('click', handleContinue);\n    continueButton.addEventListener('keydown', (e) => {\n      if (e.key === 'Enter' || e.key === ' ') {\n        e.preventDefault();\n        handleContinue();\n      }\n    });\n\n    buttons.appendChild(returnButton);\n    buttons.appendChild(continueButton);\n\n    contentContainer.appendChild(icon);\n    contentContainer.appendChild(headline);\n    contentContainer.appendChild(subtext);\n    contentContainer.appendChild(counterBadge);\n    contentContainer.appendChild(buttons);\n  } else {\n    const headline = document.createElement('h2');\n    headline.className = 'slop-curtain-headline';\n    headline.textContent = 'Slop content flagged by the community';\n\n    const subtext = document.createElement('p');\n    subtext.className = 'slop-curtain-subtext';\n    subtext.textContent =\n      'This content was identified as AI-generated filler or low-quality slop by Human Resistance curators.';\n\n    const counterBadge = document.createElement('div');\n    counterBadge.className = 'slop-curtain-counter';\n    counterBadge.textContent = `[${options.reportCount}] Community Reports`;\n\n    contentContainer.appendChild(headline);\n    contentContainer.appendChild(subtext);\n    contentContainer.appendChild(counterBadge);\n  }\n\n  // Show button (only for non-website content overlays)\n  if (options.platform !== 'website') {\n    const showButton = document.createElement('button');\n    showButton.className = 'slop-curtain-show-button';\n    showButton.textContent = 'Show';\n    showButton.setAttribute('aria-label', 'Show slop content');\n    showButton.setAttribute('tabindex', '0');\n    showButton.style.pointerEvents = 'auto';\n    showButton.style.zIndex = '10001';\n  \n    showButton.addEventListener('click', (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      e.stopImmediatePropagation();\n      handleShow();\n    });\n    showButton.addEventListener('keydown', (e) => {\n      if (e.key === 'Enter' || e.key === ' ') {\n        e.preventDefault();\n        e.stopPropagation();\n        handleShow();\n      }\n    });\n    curtain.appendChild(showButton);\n  }\n\n  curtain.appendChild(contentContainer);\n\n  return curtain;\n};\n\nexport const updateSlopCurtainCounter = (curtain: HTMLElement, reportCount: number): void => {\n  // Counter removed - no longer needed\n};\n", "export interface ConfirmationModalOptions {\n  message: string;\n  confirmText?: string;\n  cancelText?: string;\n  onConfirm: () => void;\n  onCancel: () => void;\n}\n\nexport const createConfirmationModal = (options: ConfirmationModalOptions): HTMLElement => {\n  const overlay = document.createElement('div');\n  overlay.className = 'slop-confirmation-overlay';\n  overlay.setAttribute('data-slop-modal', 'true');\n  overlay.setAttribute('role', 'dialog');\n  overlay.setAttribute('aria-modal', 'true');\n\n  const modal = document.createElement('div');\n  modal.className = 'slop-confirmation-modal';\n\n  const icon = document.createElement('div');\n  icon.className = 'slop-confirmation-icon';\n  icon.innerHTML = `\n    <svg width=\"32\" height=\"32\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" focusable=\"false\">\n      <path d=\"M4 7h16M9 7V5a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2m-7 0v10a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2V7M10 11v6M14 11v6\" stroke=\"currentColor\" stroke-width=\"1.6\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    </svg>\n  `;\n\n  const message = document.createElement('h2');\n  message.className = 'slop-confirmation-title';\n  message.textContent = options.message;\n\n  const buttons = document.createElement('div');\n  buttons.className = 'slop-confirmation-buttons';\n\n  const cancelButton = document.createElement('button');\n  cancelButton.className = 'slop-confirmation-cancel';\n  cancelButton.textContent = options.cancelText || 'Cancel';\n  cancelButton.setAttribute('aria-label', 'Cancel');\n  cancelButton.setAttribute('tabindex', '0');\n  cancelButton.addEventListener('click', options.onCancel);\n  cancelButton.addEventListener('keydown', (e) => {\n    if (e.key === 'Escape') {\n      e.preventDefault();\n      options.onCancel();\n    }\n  });\n\n  const confirmButton = document.createElement('button');\n  confirmButton.className = 'slop-confirmation-confirm';\n  confirmButton.textContent = options.confirmText || 'Confirm';\n  confirmButton.setAttribute('aria-label', 'Confirm');\n  confirmButton.setAttribute('tabindex', '0');\n  confirmButton.addEventListener('click', options.onConfirm);\n  confirmButton.addEventListener('keydown', (e) => {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      options.onConfirm();\n    }\n  });\n\n  buttons.appendChild(cancelButton);\n  buttons.appendChild(confirmButton);\n\n  modal.appendChild(message);\n  modal.appendChild(buttons);\n  overlay.appendChild(modal);\n\n  const handleKeyDown = (e: KeyboardEvent) => {\n    if (e.key === 'Escape') {\n      options.onCancel();\n    } else if (e.key === 'Enter' && e.target === overlay) {\n      options.onConfirm();\n    }\n  };\n\n  overlay.addEventListener('keydown', handleKeyDown);\n  overlay.addEventListener('click', (e) => {\n    if (e.target === overlay) {\n      options.onCancel();\n    }\n  });\n\n  setTimeout(() => {\n    confirmButton.focus();\n  }, 0);\n\n  return overlay;\n};\n\nexport const removeConfirmationModal = (modal: HTMLElement): void => {\n  modal.remove();\n};\n", "import type { PlatformAdapter } from '../shared/types';\n\ntype LinkedInCandidate = {\n  element: HTMLElement;\n  height: number;\n  textLength: number;\n};\n\nconst hasLinkedInSignals = (element: HTMLElement): boolean => {\n  const buttons = element.querySelectorAll('button, [role=\"button\"]');\n  const images = element.querySelectorAll('img');\n\n  const hasEngagementButtons = Array.from(buttons).some((btn) => {\n    const btnText = (btn.textContent || '').toLowerCase();\n    return (\n      btnText.includes('like') ||\n      btnText.includes('recomendar') ||\n      btnText.includes('comment') ||\n      btnText.includes('comentar') ||\n      btnText.includes('share') ||\n      btnText.includes('compartir')\n    );\n  });\n\n  const hasProfileImage = Array.from(images).some((img) => {\n    const alt = (img.getAttribute('alt') || '').toLowerCase();\n    return alt.includes('profile') || alt.includes('avatar') || alt.includes('member');\n  });\n\n  return hasEngagementButtons || hasProfileImage;\n};\n\nconst isDefinitelyNotAPostContainer = (element: HTMLElement): boolean => {\n  if (element.tagName === 'MAIN') return true;\n  if (element.id === 'workspace') return true;\n\n  // Avoid selecting huge containers (feed/root wrappers) that would block everything.\n  const textLength = element.textContent?.length || 0;\n  if (textLength > 9000) return true;\n\n  const rect = element.getBoundingClientRect();\n  if (rect.height > 2600) return true;\n\n  return false;\n};\n\nconst isLikelyLinkedInPostContainer = (element: HTMLElement): boolean => {\n  if (isDefinitelyNotAPostContainer(element)) return false;\n\n  const textLength = element.textContent?.length || 0;\n  if (textLength < 50) return false;\n\n  // LinkedIn posts are usually not massive walls of text inside a single container.\n  if (textLength > 8000) return false;\n\n  const rect = element.getBoundingClientRect();\n  if (rect.height < 120) return false;\n\n  // Require at least some LinkedIn-ish signals to avoid generic wrappers.\n  if (!hasLinkedInSignals(element)) return false;\n\n  return true;\n};\n\nconst scoreCandidates = (candidates: HTMLElement[]): LinkedInCandidate[] => {\n  return candidates\n    .map((element) => {\n      const rect = element.getBoundingClientRect();\n      return {\n        element,\n        height: rect.height || element.offsetHeight || 0,\n        textLength: element.textContent?.length || 0,\n      };\n    })\n    .filter((c) => c.height > 0);\n};\n\nexport const findLinkedInPostContainer = (\n  target: HTMLElement,\n  adapter: PlatformAdapter\n): HTMLElement | null => {\n  if (adapter.getPlatformName() !== 'linkedin') {\n    return null;\n  }\n\n  // Strategy 1: Use adapter's post detection, but pick the smallest valid container\n  // that contains the click target (prevents selecting a feed wrapper).\n  const allItems = adapter.getCurrentItems();\n  const containingCandidates = allItems.filter(\n    (el) => el.contains(target) && isLikelyLinkedInPostContainer(el)\n  );\n\n  const scored = scoreCandidates(containingCandidates).sort((a, b) => {\n    // Prefer the most specific (smallest height) container.\n    if (a.height !== b.height) return a.height - b.height;\n    // Tie-breaker: less text usually means less wrapper-y.\n    return a.textLength - b.textLength;\n  });\n\n  if (scored.length > 0) {\n    return scored[0]!.element;\n  }\n\n  // Strategy 2: Fallback DOM walk (upwards), first element that passes heuristics\n  let current: HTMLElement | null = target;\n  let depth = 0;\n  while (current && depth < 25) {\n    if (isLikelyLinkedInPostContainer(current)) {\n      return current;\n    }\n    current = current.parentElement;\n    depth++;\n  }\n\n  return null;\n};\n", "import { createConfirmationModal, removeConfirmationModal } from './confirmation-modal';\nimport { MessageType } from '../shared/types';\nimport { PlatformAdapter } from '../shared/types';\nimport { findLinkedInPostContainer } from './linkedin-post-finder';\n\nexport interface HotkeyState {\n  isTrashMode: boolean;\n  currentModal: HTMLElement | null;\n}\n\nlet hotkeyState: HotkeyState = {\n  isTrashMode: false,\n  currentModal: null,\n};\n\nexport const initializeHotkeys = (\n  adapter: PlatformAdapter,\n  onReportSlop: (itemId: string, element: HTMLElement) => Promise<void>,\n  onReportWebsite: () => Promise<{ shouldBlock: boolean; reportCount: number }>\n): () => void => {\n  const handleKeyDown = async (e: KeyboardEvent) => {\n    if (e.altKey && e.key === 's' && !e.ctrlKey && !e.metaKey) {\n      e.preventDefault();\n      toggleTrashMode(adapter, onReportSlop);\n    } else if (e.altKey && e.key === 'u' && !e.ctrlKey && !e.metaKey) {\n      e.preventDefault();\n      await handleReportWebsite(onReportWebsite);\n    }\n  };\n\n  // Use capture phase to intercept before LinkedIn handles it\n  document.addEventListener('keydown', handleKeyDown, true);\n\n  return () => {\n    document.removeEventListener('keydown', handleKeyDown, true);\n    exitTrashMode();\n  };\n};\n\nconst toggleTrashMode = (\n  adapter: PlatformAdapter,\n  onReportSlop: (itemId: string, element: HTMLElement) => Promise<void>\n): void => {\n  if (hotkeyState.isTrashMode) {\n    exitTrashMode();\n  } else {\n    enterTrashMode(adapter, onReportSlop);\n  }\n};\n\nconst enterTrashMode = (\n  adapter: PlatformAdapter,\n  onReportSlop: (itemId: string, element: HTMLElement) => Promise<void>\n): void => {\n  hotkeyState.isTrashMode = true;\n  document.body.classList.add('slop-trash-cursor');\n\n  const handleClick = async (e: MouseEvent) => {\n    const target = e.target as HTMLElement;\n    \n    // #region agent log\n    const logData1 = {location:'hotkeys.ts:57',message:'handleClick called',data:{targetTagName:target.tagName,targetClassName:target.className?.substring(0,50),targetId:target.id?.substring(0,30),platform:adapter.getPlatformName(),timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'A'}};\n    fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(logData1)}).catch(()=>{});\n    // #endregion\n    \n    const selector = adapter.getItemSelector();\n    \n    // For LinkedIn, prioritize finding individual posts, not the feed container.\n    let item: HTMLElement | null = null;\n    \n    if (adapter.getPlatformName() === 'linkedin') {\n      item = findLinkedInPostContainer(target, adapter);\n    } else {\n      // For other platforms, use the original logic\n      item = target.closest(selector) as HTMLElement;\n      \n      // If selector is compound, try each part\n      if (!item && selector.includes(',')) {\n        const selectors = selector.split(',').map(s => s.trim());\n        for (const sel of selectors) {\n          item = target.closest(sel) as HTMLElement;\n          if (item) break;\n        }\n      }\n    }\n\n    if (item) {\n      e.preventDefault();\n      e.stopPropagation();\n      e.stopImmediatePropagation();\n\n      const itemId = adapter.getItemId(item);\n      \n      // #region agent log\n      const logData3 = {location:'hotkeys.ts:173',message:'Item found, checking itemId',data:{itemFound:true,itemId:itemId,itemTagName:item.tagName,itemClassName:item.className?.substring(0,50),itemIdAttr:item.id?.substring(0,30),targetTagName:target.tagName,timestamp:Date.now(),sessionId:'debug-session',runId:'run4',hypothesisId:'E'}};\n      fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(logData3)}).catch(()=>{});\n      // #endregion\n      \n      if (!itemId) {\n        // #region agent log\n        const logDataNoId = {location:'hotkeys.ts:181',message:'No itemId found for clicked item',data:{itemTagName:item.tagName,itemClassName:item.className?.substring(0,50),targetTagName:target.tagName,timestamp:Date.now(),sessionId:'debug-session',runId:'run4',hypothesisId:'E'}};\n        fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(logDataNoId)}).catch(()=>{});\n        // #endregion\n        return;\n      }\n\n      // #region agent log\n      const logDataModal = {location:'hotkeys.ts:186',message:'Creating confirmation modal',data:{itemId:itemId,itemTagName:item.tagName,timestamp:Date.now(),sessionId:'debug-session',runId:'run4',hypothesisId:'E'}};\n      fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(logDataModal)}).catch(()=>{});\n      // #endregion\n      \n      const modal = createConfirmationModal({\n        message: 'Mark as SLOP?',\n        onConfirm: async () => {\n          removeConfirmationModal(modal);\n          // Report to backend and trigger Ghost Container UI - pass the specific element\n          await onReportSlop(itemId, item);\n          exitTrashMode();\n        },\n        onCancel: () => {\n          removeConfirmationModal(modal);\n          exitTrashMode();\n        },\n      });\n\n      hotkeyState.currentModal = modal;\n      document.body.appendChild(modal);\n    } else {\n      // #region agent log\n      const logDataNoItem = {location:'hotkeys.ts:201',message:'No item found for click',data:{targetTagName:target.tagName,targetClassName:target.className?.substring(0,50),targetId:target.id?.substring(0,30),platform:adapter.getPlatformName(),timestamp:Date.now(),sessionId:'debug-session',runId:'run4',hypothesisId:'E'}};\n      fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(logDataNoItem)}).catch(()=>{});\n      // #endregion\n    }\n  };\n\n  document.addEventListener('click', handleClick, true);\n\n  const cleanup = () => {\n    document.removeEventListener('click', handleClick, true);\n  };\n\n  (window as unknown as { __slopTrashCleanup?: () => void }).__slopTrashCleanup = cleanup;\n};\n\nconst exitTrashMode = (): void => {\n  hotkeyState.isTrashMode = false;\n  document.body.classList.remove('slop-trash-cursor');\n\n  if (hotkeyState.currentModal) {\n    removeConfirmationModal(hotkeyState.currentModal);\n    hotkeyState.currentModal = null;\n  }\n\n  const cleanup = (window as unknown as { __slopTrashCleanup?: () => void }).__slopTrashCleanup;\n  if (cleanup) {\n    cleanup();\n    delete (window as unknown as { __slopTrashCleanup?: () => void }).__slopTrashCleanup;\n  }\n};\n\nconst handleReportWebsite = async (\n  onReportWebsite: () => Promise<{ shouldBlock: boolean; reportCount: number }>\n): Promise<void> => {\n  const modal = createConfirmationModal({\n    message: 'Mark this website as SLOP?',\n    onConfirm: async () => {\n      removeConfirmationModal(modal);\n      const result = await onReportWebsite();\n\n      if (result.shouldBlock) {\n        showWebsiteBlockModal(result.reportCount);\n      }\n    },\n    onCancel: () => {\n      removeConfirmationModal(modal);\n    },\n  });\n\n  hotkeyState.currentModal = modal;\n  document.body.appendChild(modal);\n};\n\nconst showWebsiteBlockModal = (reportCount: number): void => {\n  const overlay = document.createElement('div');\n  overlay.className = 'slop-website-block-modal';\n\n  // Radial gradient overlay layer\n  const gradientOverlay = document.createElement('div');\n  gradientOverlay.className = 'slop-website-block-gradient';\n\n  const content = document.createElement('div');\n  content.className = 'slop-website-block-content';\n\n  // Warning icon\n  const iconContainer = document.createElement('div');\n  iconContainer.className = 'slop-website-block-icon';\n  iconContainer.innerHTML = '\u26A0\uFE0F';\n  iconContainer.setAttribute('aria-hidden', 'true');\n\n  const title = document.createElement('h2');\n  title.className = 'slop-website-block-title';\n  title.textContent = 'Access Restricted: Community-Flagged Slop';\n\n  const message = document.createElement('p');\n  message.className = 'slop-website-block-message';\n  message.textContent =\n    'Human curators have identified this entire website as a primary source of AI-generated filler or low-quality content.';\n\n  // Report counter badge\n  const counterBadge = document.createElement('div');\n  counterBadge.className = 'slop-website-block-counter';\n  counterBadge.textContent = `[${reportCount}] Humans have flagged this domain as Slop`;\n\n  const buttons = document.createElement('div');\n  buttons.className = 'slop-website-block-buttons';\n\n  const returnButton = document.createElement('button');\n  returnButton.className = 'slop-website-block-button slop-website-block-return';\n  returnButton.textContent = 'Take me back to safety';\n  returnButton.setAttribute('aria-label', 'Return to previous page');\n  returnButton.setAttribute('tabindex', '0');\n  \n  const handleReturn = () => {\n    window.history.back();\n    overlay.remove();\n  };\n  \n  returnButton.addEventListener('click', handleReturn);\n  returnButton.addEventListener('keydown', (e) => {\n    if (e.key === 'Enter' || e.key === ' ') {\n      e.preventDefault();\n      handleReturn();\n    }\n  });\n\n  const continueButton = document.createElement('button');\n  continueButton.className = 'slop-website-block-button slop-website-block-continue';\n  continueButton.textContent = 'Continue anyway';\n  continueButton.setAttribute('aria-label', 'Continue to website anyway');\n  continueButton.setAttribute('tabindex', '0');\n  \n  const handleContinue = () => {\n    overlay.remove();\n  };\n  \n  continueButton.addEventListener('click', handleContinue);\n  continueButton.addEventListener('keydown', (e) => {\n    if (e.key === 'Enter' || e.key === ' ') {\n      e.preventDefault();\n      handleContinue();\n    }\n  });\n\n  buttons.appendChild(returnButton);\n  buttons.appendChild(continueButton);\n\n  content.appendChild(iconContainer);\n  content.appendChild(title);\n  content.appendChild(message);\n  content.appendChild(counterBadge);\n  content.appendChild(buttons);\n  \n  overlay.appendChild(gradientOverlay);\n  overlay.appendChild(content);\n\n  document.body.appendChild(overlay);\n  \n  // Prevent scrolling and interaction with background\n  document.body.style.overflow = 'hidden';\n  \n  // Cleanup on remove\n  const observer = new MutationObserver(() => {\n    if (!overlay.isConnected) {\n      document.body.style.overflow = '';\n      observer.disconnect();\n    }\n  });\n  observer.observe(document.body, { childList: true });\n};\n", "import { TwitterAdapter } from '../adapters/twitter-adapter';\nimport { YouTubeAdapter } from '../adapters/youtube-adapter';\nimport { LinkedInAdapter } from '../adapters/linkedin-adapter';\nimport { WebsiteAdapter } from '../adapters/website-adapter';\nimport { PlatformAdapter, MessageType, Platform } from '../shared/types';\nimport { detectPlatform } from '../shared/utils';\nimport { createSlopCurtain } from './slop-curtain';\nimport { initializeHotkeys } from './hotkeys';\nimport { findLinkedInPostContainer } from './linkedin-post-finder';\n\ninterface ProcessedItem {\n  element: HTMLElement;\n  itemId: string;\n  overlay: HTMLElement | null;\n  isShowing: boolean;\n}\n\nconst processedItems = new Map<HTMLElement, ProcessedItem>();\nconst processingItems = new Set<HTMLElement>(); // Track items currently being processed\nlet currentAdapter: PlatformAdapter | null = null;\nlet isExtensionContextValid = true;\nlet lastRightClickedElement: HTMLElement | null = null; // Store element for context menu report\n\n// Helper function to find processed item by itemId\nconst findProcessedItemByItemId = (itemId: string): ProcessedItem | null => {\n  for (const item of processedItems.values()) {\n    if (item.itemId === itemId && item.overlay && item.overlay.parentNode !== null) {\n      return item;\n    }\n  }\n  return null;\n};\n\nconst isContextInvalidated = (error: chrome.runtime.LastError | undefined): boolean => {\n  if (!error) return false;\n  return error.message?.includes('Extension context invalidated') || \n         error.message?.includes('message port closed') ||\n         error.message?.includes('Receiving end does not exist') ||\n         false;\n};\n\nconst handleContextInvalidated = (): void => {\n  if (!isExtensionContextValid) return;\n  \n  isExtensionContextValid = false;\n  console.warn('[Slop-Stop] Extension context invalidated, stopping evaluation');\n  \n  // Clean up all overlays and restore elements\n  processedItems.forEach((item) => {\n    if (item.overlay) {\n      // Clean up overlay event listeners\n      if ((item.overlay as any).__slopCleanup) {\n        (item.overlay as any).__slopCleanup();\n      }\n      if (item.overlay.parentNode) {\n        item.overlay.parentNode.removeChild(item.overlay);\n      }\n    }\n    if (item.element) {\n      item.element.style.opacity = '';\n      item.element.style.visibility = '';\n      item.element.style.pointerEvents = '';\n    }\n  });\n  \n  processedItems.clear();\n  \n  // Remove all trash icons\n  document.querySelectorAll('[data-slop-trash-icon]').forEach((icon) => {\n    icon.remove();\n  });\n  \n  // Remove all overlays and clean up their listeners\n  document.querySelectorAll('[data-slop-overlay]').forEach((overlay) => {\n    if ((overlay as any).__slopCleanup) {\n      (overlay as any).__slopCleanup();\n    }\n    overlay.remove();\n  });\n};\n\nconst getAdapter = (): PlatformAdapter => {\n  const url = window.location.href;\n  \n  if (currentAdapter && currentAdapter.canHandleUrl(url)) {\n    return currentAdapter;\n  }\n\n  const platform = detectPlatform(url);\n  \n  switch (platform) {\n    case 'twitter':\n      currentAdapter = new TwitterAdapter();\n      break;\n    case 'youtube':\n      currentAdapter = new YouTubeAdapter();\n      break;\n    case 'linkedin':\n      currentAdapter = new LinkedInAdapter();\n      break;\n    default:\n      currentAdapter = new WebsiteAdapter();\n  }\n\n  return currentAdapter;\n};\n\nconst checkSlopStatus = async (itemId: string, platform: Platform): Promise<{ isSlop: boolean; reportCount: number }> => {\n  if (!isExtensionContextValid) {\n    return { isSlop: false, reportCount: 0 };\n  }\n  \n  return new Promise((resolve) => {\n    try {\n      chrome.runtime.sendMessage(\n        {\n          type: MessageType.GET_SLOP_STATUS,\n          payload: { itemId, platform },\n        },\n        (response) => {\n          if (chrome.runtime.lastError) {\n            if (isContextInvalidated(chrome.runtime.lastError)) {\n              handleContextInvalidated();\n            } else {\n              const errorMsg = chrome.runtime.lastError.message || 'Unknown error';\n              console.error('[Slop-Stop] Error checking slop status:', errorMsg);\n            }\n            resolve({ isSlop: false, reportCount: 0 });\n            return;\n          }\n          resolve(response || { isSlop: false, reportCount: 0 });\n        }\n      );\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : String(error);\n      if (errorMessage.includes('Extension context invalidated')) {\n        handleContextInvalidated();\n      } else {\n        console.error('[Slop-Stop] Exception checking slop status:', errorMessage);\n      }\n      resolve({ isSlop: false, reportCount: 0 });\n    }\n  });\n};\n\nconst reportSlop = async (itemId: string, platform: Platform): Promise<void> => {\n  if (!isExtensionContextValid) {\n    console.warn('[Slop-Stop] reportSlop: context invalidated, returning');\n    return Promise.resolve(); // Silently resolve instead of rejecting\n  }\n  \n  return new Promise((resolve, reject) => {\n    try {\n      console.log('[Slop-Stop] reportSlop: sending message', { itemId, platform });\n      chrome.runtime.sendMessage(\n        {\n          type: MessageType.REPORT_SLOP,\n          payload: { itemId, platform },\n        },\n        (response) => {\n          if (chrome.runtime.lastError) {\n            console.error('[Slop-Stop] reportSlop: chrome.runtime.lastError', chrome.runtime.lastError);\n            if (isContextInvalidated(chrome.runtime.lastError)) {\n              handleContextInvalidated();\n              resolve(); // Silently resolve instead of rejecting\n            } else {\n              reject(chrome.runtime.lastError);\n            }\n            return;\n          }\n          console.log('[Slop-Stop] reportSlop: received response', response);\n          if (response && response.error) {\n            console.error('[Slop-Stop] reportSlop: response contains error', response.error);\n            reject(new Error(response.error));\n            return;\n          }\n          if (response && response.success === false) {\n            console.error('[Slop-Stop] reportSlop: response.success is false', response);\n            reject(new Error(response.error || 'Report failed'));\n            return;\n          }\n          console.log('[Slop-Stop] reportSlop: success', response);\n          resolve();\n        }\n      );\n    } catch (error) {\n      console.error('[Slop-Stop] reportSlop: exception', error);\n      if (error instanceof Error && error.message.includes('Extension context invalidated')) {\n        handleContextInvalidated();\n        resolve(); // Silently resolve instead of rejecting\n      } else {\n        reject(error);\n      }\n    }\n  });\n};\n\nconst reportWebsite = async (): Promise<{ shouldBlock: boolean; reportCount: number }> => {\n  if (!isExtensionContextValid) {\n    return { shouldBlock: false, reportCount: 0 };\n  }\n  \n  return new Promise((resolve) => {\n    try {\n      chrome.runtime.sendMessage(\n        {\n          type: MessageType.REPORT_WEBSITE,\n          payload: { url: window.location.href },\n        },\n        (response) => {\n          if (chrome.runtime.lastError) {\n            if (isContextInvalidated(chrome.runtime.lastError)) {\n              handleContextInvalidated();\n            } else {\n              console.error('Error reporting website:', chrome.runtime.lastError);\n            }\n            resolve({ shouldBlock: false, reportCount: 0 });\n            return;\n          }\n          resolve(response || { shouldBlock: false, reportCount: 0 });\n        }\n      );\n    } catch (error) {\n      if (error instanceof Error && error.message.includes('Extension context invalidated')) {\n        handleContextInvalidated();\n      }\n      resolve({ shouldBlock: false, reportCount: 0 });\n    }\n  });\n};\n\nconst processItem = async (element: HTMLElement, adapter: PlatformAdapter, forceOverlay: boolean = false): Promise<void> => {\n  // #region agent log\n  const logData = {location:'content-main.ts:230',message:'processItem called',data:{forceOverlay:forceOverlay,elementTagName:element.tagName,elementClassName:element.className?.substring(0,50),elementId:element.id?.substring(0,30),isConnected:element.isConnected,timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'E'}};\n  fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(logData)}).catch(()=>{});\n  // #endregion\n  \n  // Check if element is still in the DOM\n  if (!element.isConnected) {\n    return;\n  }\n\n  const itemId = adapter.getItemId(element);\n  \n  // #region agent log\n  const logData2 = {location:'content-main.ts:236',message:'Got itemId',data:{itemId:itemId,forceOverlay:forceOverlay,timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'C'}};\n  fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(logData2)}).catch(()=>{});\n  // #endregion\n  \n  // Validate itemId: must exist and not be empty\n  if (!itemId || itemId.trim().length === 0) {\n    console.warn('[Slop-Stop] Invalid itemId (empty or null):', { itemId, platform: adapter.getPlatformName(), elementTagName: element.tagName });\n    return;\n  }\n  \n  // For YouTube, validate that itemId is at least 11 characters (YouTube video IDs are 11 chars)\n  if (adapter.getPlatformName() === 'youtube' && itemId.length < 11) {\n    console.warn('[Slop-Stop] Invalid YouTube video ID (too short):', { \n      itemId, \n      length: itemId.length, \n      platform: adapter.getPlatformName(),\n      elementTagName: element.tagName,\n      elementClassName: element.className?.substring(0, 50)\n    });\n    return;\n  }\n\n  // Check if any element with this itemId already has an overlay\n  if (!forceOverlay) {\n    const existingItemByItemId = findProcessedItemByItemId(itemId);\n    if (existingItemByItemId) {\n      // If the existing element is different but connected, update the map to use current element\n      if (existingItemByItemId.element !== element && element.isConnected) {\n        // Remove old element from map\n        processedItems.delete(existingItemByItemId.element);\n        // Update the existing item to use the new element\n        existingItemByItemId.element = element;\n        // Add to map with new element as key\n        processedItems.set(element, existingItemByItemId);\n        \n        // Debug logging for YouTube\n        if (adapter.getPlatformName() === 'youtube') {\n          console.log('[Slop-Stop] YouTube: Updated processed item element:', {\n            itemId,\n            oldElementTagName: existingItemByItemId.element.tagName,\n            newElementTagName: element.tagName,\n            hasOverlay: !!existingItemByItemId.overlay\n          });\n        }\n      }\n      // Always return if we found an existing item with this itemId (don't reprocess)\n      return;\n    }\n  }\n\n  const existingItem = processedItems.get(element);\n  if (existingItem) {\n    // If element already has an overlay, don't process again (unless forcing)\n    if (existingItem.overlay && !forceOverlay) {\n      return;\n    }\n    // If element is showing (overlay was removed), don't process again unless forcing\n    if (existingItem.isShowing && !forceOverlay) {\n      return;\n    }\n    // If forcing overlay and one exists, remove it first\n    if (existingItem.overlay && forceOverlay) {\n      // Clean up existing overlay\n      if ((existingItem.overlay as any).__slopCleanup) {\n        (existingItem.overlay as any).__slopCleanup();\n      }\n      if (existingItem.overlay.parentNode) {\n        existingItem.overlay.parentNode.removeChild(existingItem.overlay);\n      }\n      // Remove from processedItems to allow reprocessing\n      processedItems.delete(element);\n    } else if (existingItem.isShowing) {\n      // If element was showing but now needs to be hidden again, remove from processedItems to reprocess\n      processedItems.delete(element);\n    } else if (!forceOverlay) {\n      return;\n    }\n  }\n\n  const platform = adapter.getPlatformName();\n  const status = await checkSlopStatus(itemId, platform);\n\n  // #region agent log\n  const logData3 = {location:'content-main.ts:284',message:'Slop status checked',data:{itemId:itemId,isSlop:status.isSlop,forceOverlay:forceOverlay,reportCount:status.reportCount,willCreateOverlay:status.isSlop||forceOverlay,timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'A'}};\n  fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(logData3)}).catch(()=>{});\n  // #endregion\n\n  // Debug logging for YouTube to track slop status checking\n  if (platform === 'youtube') {\n    console.log('[Slop-Stop] YouTube slop status check:', {\n      itemId,\n      isSlop: status.isSlop,\n      reportCount: status.reportCount,\n      forceOverlay,\n      elementTagName: element.tagName,\n      elementClassName: element.className?.substring(0, 50)\n    });\n  }\n\n  // If forcing overlay (e.g., after reporting slop), create it even if status hasn't updated yet\n  if (!status.isSlop && !forceOverlay) {\n    return;\n  }\n\n  // If forcing overlay, ensure we have at least 1 report count\n  const reportCount = forceOverlay && status.reportCount === 0 ? 1 : status.reportCount;\n\n  const overlay = adapter.createGhostContainer(element);\n  // Mark overlay creation time to prevent premature cleanup\n  (overlay as any).__createdAt = Date.now();\n  // Ensure overlay allows pointer events for buttons\n  overlay.style.pointerEvents = 'auto';\n  \n  // IMPORTANT: Ensure trash icon is visible above overlay\n  // Move trash icon to be a child of overlay so it's always visible\n  const trashIcon = element.querySelector('[data-slop-trash-icon]') as HTMLElement;\n  if (trashIcon && trashIcon.parentElement === element) {\n    // Move trash icon to overlay so it's always visible\n    overlay.appendChild(trashIcon);\n    // Update z-index to ensure it's above overlay content\n    trashIcon.style.zIndex = '1000000';\n  }\n  \n  const curtain = createSlopCurtain({\n    reportCount: reportCount,\n    platform,\n    onShow: () => {\n      const item = processedItems.get(element);\n      if (!item || item.isShowing) {\n        return; // Already showing or item not found\n      }\n      \n      // Check if element is still in the DOM\n      if (!element.isConnected) {\n        // Element was removed, clean up\n        if (item.overlay && item.overlay.parentNode) {\n          item.overlay.parentNode.removeChild(item.overlay);\n        }\n        processedItems.delete(element);\n        return;\n      }\n      \n      // Mark as showing first to prevent double-clicks\n      item.isShowing = true;\n      \n      // Clean up overlay event listeners (for Twitter scroll listeners)\n      if ((overlay as any).__slopCleanup) {\n        (overlay as any).__slopCleanup();\n      }\n      \n      // Remove overlay from DOM immediately\n      if (overlay.parentNode) {\n        overlay.parentNode.removeChild(overlay);\n      }\n      \n      // Restore original element visibility - restore all children\n      element.style.removeProperty('opacity');\n      element.style.removeProperty('pointer-events');\n      element.style.removeProperty('visibility'); // Ensure visibility is restored\n      element.style.removeProperty('min-height'); // Restore original height behavior\n      \n      // Restore trash icon to original position if it was moved to overlay\n      const trashIcon = overlay.querySelector('[data-slop-trash-icon]') as HTMLElement;\n      if (trashIcon && trashIcon.parentElement === overlay) {\n        // Move trash icon back to element\n        element.appendChild(trashIcon);\n        trashIcon.style.zIndex = '999999';\n      }\n      \n      // Restore all children visibility\n      const children = Array.from(element.children) as HTMLElement[];\n      children.forEach((child) => {\n        if (child !== overlay && child.getAttribute('data-slop-overlay') !== 'true') {\n          // Don't restore the overlay itself\n          child.style.removeProperty('visibility');\n          child.style.removeProperty('pointer-events');\n        }\n      });\n      \n      // Restore visual content (images, videos) within the element\n      const images = element.querySelectorAll('img, yt-img-shadow img, yt-image img, video, ytd-thumbnail video, svg');\n      images.forEach((media) => {\n        (media as HTMLElement).style.removeProperty('visibility');\n        (media as HTMLElement).style.removeProperty('pointer-events');\n      });\n      \n      // Restore element overflow if we modified it\n      const originalOverflow = element.getAttribute('data-slop-original-overflow');\n      if (originalOverflow !== null) {\n        // Check if there are other overlays in this element that need overflow hidden\n        const hasOtherOverlays = Array.from(processedItems.values()).some(\n          i => i.overlay && i.element === element && i !== item\n        );\n        if (!hasOtherOverlays) {\n          if (originalOverflow === '') {\n            element.style.removeProperty('overflow');\n          } else {\n            element.style.overflow = originalOverflow;\n          }\n          element.removeAttribute('data-slop-original-overflow');\n        }\n      }\n      \n      // Restore element position if we modified it\n      const computedStyle = window.getComputedStyle(element);\n      if (element.style.position === 'relative' && computedStyle.position === 'relative') {\n        // Check if there are other overlays in this element that need this positioning\n        const hasOtherOverlays = Array.from(processedItems.values()).some(\n          i => i.overlay && i.element === element && i !== item\n        );\n        if (!hasOtherOverlays) {\n          element.style.removeProperty('position');\n        }\n      }\n      \n      // Force a reflow to ensure the platform renders the element correctly\n      void element.offsetHeight;\n      \n      // Mark overlay as null in processedItems\n      item.overlay = null;\n      \n      // Re-enable pointer events on the element\n      element.style.pointerEvents = '';\n    },\n    onReport: async () => {\n      try {\n        await reportSlop(itemId, platform).catch(() => {\n          // Silently handle errors - context invalidated is already handled\n        });\n        // Counter removed - no longer updating UI\n      } catch (error) {\n        // Silently handle any errors\n      }\n    },\n  });\n\n  overlay.appendChild(curtain);\n  // Ensure overlay is visible and properly styled\n  overlay.style.display = 'flex';\n  overlay.style.opacity = '1';\n  overlay.style.visibility = 'visible';\n\n  processedItems.set(element, {\n    element,\n    itemId,\n    overlay,\n    isShowing: false,\n  });\n  \n  // Debug logging for YouTube to track overlay creation\n  if (platform === 'youtube') {\n    console.log('[Slop-Stop] YouTube overlay created:', {\n      itemId,\n      elementTagName: element.tagName,\n      elementClassName: element.className?.substring(0, 50),\n      overlayCreated: !!overlay,\n      processedItemsCount: processedItems.size\n    });\n  }\n  \n  // #region agent log\n  const logData4 = {location:'content-main.ts:411',message:'Overlay created and stored',data:{itemId:itemId,elementTagName:element.tagName,processedItemsCount:processedItems.size,forceOverlay:forceOverlay,timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'E'}};\n  fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(logData4)}).catch(()=>{});\n  // #endregion\n};\n\nconst addTrashIconToItem = (element: HTMLElement, adapter: PlatformAdapter): void => {\n  if (element.querySelector('[data-slop-trash-icon]')) {\n    return;\n  }\n\n  // #region agent log\n  const isMainFeed = element.tagName === 'MAIN' || element.id === 'workspace';\n  const logDataTrash1 = {location:'content-main.ts:440',message:'addTrashIconToItem called',data:{elementTagName:element.tagName,elementClassName:element.className?.substring(0,50),elementId:element.id?.substring(0,30),elementTextLength:element.textContent?.length,elementChildrenCount:element.children.length,isMainFeed:isMainFeed,platform:adapter.getPlatformName(),timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'F'}};\n  fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(logDataTrash1)}).catch(()=>{});\n  // #endregion\n\n  // IMPORTANT: For LinkedIn, skip adding trash icon to the main feed container\n  // The main feed container is usually <main id=\"workspace\"> or a direct child of it\n  if (adapter.getPlatformName() === 'linkedin') {\n    // Skip if it's the main feed container\n    if (element.tagName === 'MAIN' || element.id === 'workspace') {\n      // #region agent log\n      const logDataTrashSkip = {location:'content-main.ts:448',message:'Skipping trash icon - main feed container',data:{elementTagName:element.tagName,elementId:element.id,timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'G'}};\n      fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(logDataTrashSkip)}).catch(()=>{});\n      // #endregion\n      return;\n    }\n    \n    // Skip if it's a direct child of main#workspace (likely the feed container, not individual posts)\n    const mainFeed = document.querySelector('main#workspace');\n    if (mainFeed && element.parentElement === mainFeed) {\n      // Check if it looks like an individual post (has substantial content and reasonable size)\n      const textLength = element.textContent?.length || 0;\n      const buttons = element.querySelectorAll('button, [role=\"button\"]').length;\n      const hasSubstantialContent = (element.children.length >= 1 || buttons >= 1) && \n                                   (textLength > 50 || element.querySelector('img, video'));\n      // If it's too large (more than 5000 chars), it's likely the feed container\n      // But allow posts with engagement buttons even if they're direct children\n      if (textLength > 5000 && buttons < 2) {\n        // #region agent log\n        const logDataTrashSkip2 = {location:'content-main.ts:460',message:'Skipping trash icon - likely feed container',data:{elementTagName:element.tagName,elementId:element.id,textLength:textLength,hasSubstantialContent:hasSubstantialContent,buttons:buttons,isDirectChildOfMain:true,timestamp:Date.now(),sessionId:'debug-session',runId:'run4',hypothesisId:'A'}};\n        fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(logDataTrashSkip2)}).catch(()=>{});\n        // #endregion\n        return;\n      }\n      \n      // If it doesn't have substantial content, skip it\n      if (!hasSubstantialContent && textLength < 50) {\n        // #region agent log\n        const logDataTrashSkip3 = {location:'content-main.ts:475',message:'Skipping trash icon - no substantial content',data:{elementTagName:element.tagName,elementId:element.id,textLength:textLength,childrenCount:element.children.length,buttons:buttons,isDirectChildOfMain:true,timestamp:Date.now(),sessionId:'debug-session',runId:'run4',hypothesisId:'A'}};\n        fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(logDataTrashSkip3)}).catch(()=>{});\n        // #endregion\n        return;\n      }\n    }\n  }\n\n  const trashIcon = document.createElement('button');\n  trashIcon.className = 'slop-item-trash-icon';\n  trashIcon.setAttribute('data-slop-trash-icon', 'true');\n  trashIcon.setAttribute('aria-label', 'Report as slop');\n  trashIcon.setAttribute('tabindex', '0');\n  trashIcon.innerHTML = `\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path d=\"M2 4h12M5 4V2a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2m-6 0v10a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1V4M6 7v6M10 7v6\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\"/>\n    </svg>\n  `;\n\n  // Base styles for the trash icon button\n  trashIcon.style.position = 'absolute';\n  trashIcon.style.padding = '0.5rem';\n  trashIcon.style.background = 'rgba(0, 0, 0, 0.6)';\n  trashIcon.style.color = '#ffffff';\n  trashIcon.style.border = 'none';\n  trashIcon.style.borderRadius = '50%';\n  trashIcon.style.cursor = 'pointer';\n  trashIcon.style.display = 'flex';\n  trashIcon.style.alignItems = 'center';\n  trashIcon.style.justifyContent = 'center';\n  trashIcon.style.zIndex = '999999';\n  trashIcon.style.opacity = '0';\n  trashIcon.style.transition = 'opacity 0.2s, background-color 0.2s';\n  trashIcon.style.pointerEvents = 'auto';\n  trashIcon.style.boxShadow = '0 2px 8px rgba(0, 0, 0, 0.3)';\n\n  // Positioning: for LinkedIn use the top-right corner to match card UIs.\n  if (adapter.getPlatformName() === 'linkedin') {\n    trashIcon.style.top = '0.5rem';\n    trashIcon.style.right = '0.5rem';\n    // En LinkedIn mostramos el icono inmediatamente para visibilidad r\u00E1pida.\n    trashIcon.style.opacity = '1';\n  } else {\n    trashIcon.style.bottom = '0.5rem';\n    trashIcon.style.right = '0.5rem';\n  }\n\n  const handleTrashClick = async (e: MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    e.stopImmediatePropagation(); // Prevent LinkedIn from handling the event\n    \n    // #region agent log\n    const logData5 = {location:'content-main.ts:435',message:'Trash icon clicked',data:{elementTagName:element.tagName,elementClassName:element.className?.substring(0,50),elementId:element.id?.substring(0,30),timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'D'}};\n    fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(logData5)}).catch(()=>{});\n    // #endregion\n    \n    if (!isExtensionContextValid) {\n      console.warn('[Slop-Stop] trashIcon click: context invalidated');\n      return;\n    }\n    \n    try {\n      const itemId = adapter.getItemId(element);\n      \n      // #region agent log\n      const logData6 = {location:'content-main.ts:446',message:'Trash icon got itemId',data:{itemId:itemId,elementTagName:element.tagName,timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'C'}};\n      fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(logData6)}).catch(()=>{});\n      // #endregion\n      \n      // Validate itemId: must exist and not be empty\n      if (!itemId || itemId.trim().length === 0) {\n        console.warn('[Slop-Stop] Invalid itemId when reporting slop (empty or null):', { \n          itemId, \n          platform: adapter.getPlatformName(), \n          elementTagName: element.tagName,\n          elementClassName: element.className?.substring(0, 50)\n        });\n        return;\n      }\n      \n      // For YouTube, validate that itemId is at least 11 characters (YouTube video IDs are 11 chars)\n      if (adapter.getPlatformName() === 'youtube' && itemId.length < 11) {\n        console.warn('[Slop-Stop] Invalid YouTube video ID when reporting slop (too short):', { \n          itemId, \n          length: itemId.length,\n          platform: adapter.getPlatformName(), \n          elementTagName: element.tagName,\n          elementClassName: element.className?.substring(0, 50)\n        });\n        return;\n      }\n      \n      if (isExtensionContextValid) {\n        try {\n          // Step 1: Report to backend\n          await reportSlop(itemId, adapter.getPlatformName());\n          \n          // Step 2: Immediately trigger Ghost Container UI for immediate relief\n          await processItem(element, adapter, true).catch((error) => {\n            console.error('[Slop-Stop] trashIcon: processItem failed', error);\n          });\n        } catch (error) {\n          console.error('[Slop-Stop] trashIcon: reportSlop failed', error);\n        }\n      }\n    } catch (error) {\n      console.error('[Slop-Stop] trashIcon click: ERROR', error);\n    }\n  };\n  \n  // Use capture phase to intercept before LinkedIn handles it\n  trashIcon.addEventListener('click', handleTrashClick, true);\n  // Also add mousedown to catch it even earlier\n  trashIcon.addEventListener('mousedown', (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    e.stopImmediatePropagation();\n  }, true);\n\n  trashIcon.style.cssText = `\n    position: absolute;\n    bottom: 0.5rem;\n    right: 0.5rem;\n    padding: 0.5rem;\n    background: rgba(0, 0, 0, 0.6);\n    color: #ffffff;\n    border: none;\n    border-radius: 50%;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 999999;\n    opacity: 0;\n    transition: opacity 0.2s, background-color 0.2s;\n    pointer-events: auto !important;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n  `;\n\n  // Ensure parent element can contain absolutely positioned trash icon\n  const computedStyle = window.getComputedStyle(element);\n  if (computedStyle.position === 'static') {\n    element.style.position = 'relative';\n  }\n  // Ensure overflow allows trash icon to be visible (but be careful not to break layout)\n  // Only change overflow if it's explicitly hidden, not if it's auto/scroll\n  if (computedStyle.overflow === 'hidden') {\n    // Store original overflow to potentially restore later\n    if (!element.hasAttribute('data-slop-original-overflow')) {\n      element.setAttribute('data-slop-original-overflow', computedStyle.overflow);\n    }\n    element.style.overflow = 'visible';\n  }\n  \n  // Use mouseenter/mouseleave on both element and trashIcon for better UX\n  const showTrashIcon = () => {\n    trashIcon.style.opacity = '1';\n  };\n  const hideTrashIcon = () => {\n    trashIcon.style.opacity = '0';\n  };\n  \n  element.addEventListener('mouseenter', showTrashIcon);\n  element.addEventListener('mouseleave', hideTrashIcon);\n  \n  // Also show trash icon when hovering over the icon itself\n  trashIcon.addEventListener('mouseenter', showTrashIcon);\n  trashIcon.addEventListener('mouseleave', hideTrashIcon);\n  \n  // Add hover effect on the trash icon itself\n  trashIcon.addEventListener('mouseenter', () => {\n    trashIcon.style.backgroundColor = 'rgba(255, 255, 255, 0.1)';\n  });\n  trashIcon.addEventListener('mouseleave', () => {\n    trashIcon.style.backgroundColor = 'rgba(0, 0, 0, 0.6)';\n  });\n\n  // IMPORTANT: Append trash icon to element BEFORE any overlay is created\n  // This ensures it's always visible, even when overlay exists\n  element.appendChild(trashIcon);\n  \n  // #region agent log\n  const computedStyleAfter = window.getComputedStyle(element);\n  const trashIconComputed = window.getComputedStyle(trashIcon);\n  const logDataTrashAdded = {location:'content-main.ts:613',message:'Trash icon added successfully',data:{elementTagName:element.tagName,elementClassName:element.className?.substring(0,50),elementId:element.id?.substring(0,30),elementTextLength:element.textContent?.length,platform:adapter.getPlatformName(),elementPosition:computedStyleAfter.position,elementOverflow:computedStyleAfter.overflow,elementZIndex:computedStyleAfter.zIndex,trashIconPosition:trashIconComputed.position,trashIconOpacity:trashIconComputed.opacity,trashIconVisibility:trashIconComputed.visibility,trashIconZIndex:trashIconComputed.zIndex,trashIconDisplay:trashIconComputed.display,trashIconInDOM:trashIcon.isConnected,timestamp:Date.now(),sessionId:'debug-session',runId:'run4',hypothesisId:'C'}};\n  fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(logDataTrashAdded)}).catch(()=>{});\n  console.log('[Slop-Stop] Trash icon added to element:', {\n    tagName: element.tagName,\n    className: element.className?.substring(0, 50),\n    textLength: element.textContent?.length\n  });\n  // #endregion\n  \n  // Store reference to trash icon on element for later access\n  (element as any).__slopTrashIcon = trashIcon;\n};\n\n// Global error handler for unhandled promise rejections related to extension context\nif (typeof window !== 'undefined') {\n  window.addEventListener('unhandledrejection', (event) => {\n    const error = event.reason;\n    if (\n      error instanceof Error &&\n      (error.message.includes('Extension context invalidated') ||\n       error.message.includes('message port closed') ||\n       error.message.includes('Receiving end does not exist') ||\n       error.message.includes('chrome-extension://invalid'))\n    ) {\n      event.preventDefault(); // Prevent the error from appearing in console\n      handleContextInvalidated();\n    }\n  });\n  \n  // Also catch errors from failed resource loads\n  window.addEventListener('error', (event) => {\n    if (event.message && event.message.includes('chrome-extension://invalid')) {\n      event.preventDefault();\n      // Silently ignore these errors\n      return false;\n    }\n  }, true);\n}\n\nconst initializeContentScript = (): void => {\n  const adapter = getAdapter();\n  \n  const handleNewItems = async (items: HTMLElement[]) => {\n    if (!isExtensionContextValid) {\n      return;\n    }\n    \n    console.log(`[Slop-Stop] handleNewItems called with ${items.length} items`);\n    \n    // #region agent log\n    const logData7 = {location:'content-main.ts:569',message:'handleNewItems called',data:{itemsCount:items.length,items:items.slice(0,3).map(el=>({tagName:el.tagName,className:el.className?.substring(0,50),id:el.id?.substring(0,30)})),timestamp:Date.now(),sessionId:'debug-session',runId:'run3',hypothesisId:'A'}};\n    fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(logData7)}).catch(()=>{});\n    // #endregion\n    \n    for (let i = 0; i < items.length; i++) {\n      const item = items[i];\n      \n      if (!isExtensionContextValid) {\n        break;\n      }\n      \n      // Get itemId first to validate the item\n      const itemId = adapter.getItemId(item);\n      \n      // Debug logging for YouTube to track itemId extraction\n      if (adapter.getPlatformName() === 'youtube') {\n        console.log('[Slop-Stop] YouTube item processing:', {\n          itemIndex: i,\n          itemId: itemId,\n          itemIdLength: itemId?.length,\n          tagName: item.tagName,\n          className: item.className?.substring(0, 50),\n          elementId: item.id?.substring(0, 30)\n        });\n      }\n      \n      // #region agent log\n      const logData8 = {location:'content-main.ts:582',message:'Processing item',data:{itemIndex:i,itemId:itemId,itemTagName:item.tagName,itemClassName:item.className?.substring(0,50),itemIdAttr:item.id?.substring(0,30),platform:adapter.getPlatformName(),timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'C'}};\n      fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(logData8)}).catch(()=>{});\n      // #endregion\n      \n      // Skip items without valid IDs (they can't be tracked properly)\n      if (!itemId || itemId.trim().length === 0) {\n        console.log('[Slop-Stop] Skipping item without ID:', {\n          tagName: item.tagName,\n          className: item.className?.substring(0, 50),\n          textLength: item.textContent?.length,\n          platform: adapter.getPlatformName()\n        });\n        // #region agent log\n        const logDataSkipNoId = {location:'content-main.ts:686',message:'Skipping item - no ID',data:{itemIndex:i,itemTagName:item.tagName,itemClassName:item.className?.substring(0,50),itemIdAttr:item.id?.substring(0,30),itemTextLength:item.textContent?.length,itemChildrenCount:item.children.length,platform:adapter.getPlatformName(),timestamp:Date.now(),sessionId:'debug-session',runId:'run4',hypothesisId:'B'}};\n        fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(logDataSkipNoId)}).catch(()=>{});\n        // #endregion\n        continue;\n      }\n      \n      // For YouTube, validate that itemId is at least 11 characters (YouTube video IDs are 11 chars)\n      if (adapter.getPlatformName() === 'youtube' && itemId.length < 11) {\n        console.warn('[Slop-Stop] Invalid YouTube video ID (too short):', {\n          itemId,\n          length: itemId.length,\n          tagName: item.tagName,\n          className: item.className?.substring(0, 50),\n          itemIndex: i\n        });\n        // #region agent log\n        const logDataInvalidId = {location:'content-main.ts:700',message:'Skipping item - invalid YouTube ID',data:{itemId:itemId,itemIdLength:itemId.length,itemIndex:i,itemTagName:item.tagName,itemClassName:item.className?.substring(0,50),timestamp:Date.now(),sessionId:'debug-session',runId:'run4',hypothesisId:'B'}};\n        fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(logDataInvalidId)}).catch(()=>{});\n        // #endregion\n        continue;\n      }\n      \n      // Always add trash icon first (before checking if it's slop)\n      // Check both in element and in any overlay\n      const existingTrashIcon = item.querySelector('[data-slop-trash-icon]') || \n                                document.querySelector(`[data-slop-overlay=\"true\"] [data-slop-trash-icon]`);\n      if (!existingTrashIcon) {\n        try {\n          console.log('[Slop-Stop] Adding trash icon to item:', {\n            itemId,\n            tagName: item.tagName,\n            className: item.className?.substring(0, 50),\n            textLength: item.textContent?.length\n          });\n          // #region agent log\n          const logDataBeforeAddTrash = {location:'content-main.ts:699',message:'About to call addTrashIconToItem',data:{itemId:itemId,itemTagName:item.tagName,itemClassName:item.className?.substring(0,50),itemIdAttr:item.id?.substring(0,30),itemTextLength:item.textContent?.length,itemChildrenCount:item.children.length,isConnected:item.isConnected,timestamp:Date.now(),sessionId:'debug-session',runId:'run4',hypothesisId:'A'}};\n          fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(logDataBeforeAddTrash)}).catch(()=>{});\n          // #endregion\n          addTrashIconToItem(item, adapter);\n          // #region agent log\n          const trashIconAfter = item.querySelector('[data-slop-trash-icon]');\n          const logDataAfterAddTrash = {location:'content-main.ts:710',message:'After addTrashIconToItem call',data:{itemId:itemId,trashIconFound:!!trashIconAfter,trashIconInDOM:!!document.querySelector(`[data-slop-trash-icon][data-item-id=\"${itemId}\"]`),itemTagName:item.tagName,timestamp:Date.now(),sessionId:'debug-session',runId:'run4',hypothesisId:'C'}};\n          fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(logDataAfterAddTrash)}).catch(()=>{});\n          // #endregion\n        } catch (error) {\n          console.error('[Slop-Stop] Error adding trash icon:', error);\n          // #region agent log\n          const logDataTrashError = {location:'content-main.ts:714',message:'Error adding trash icon',data:{itemId:itemId,errorMessage:error instanceof Error?error.message:String(error),itemTagName:item.tagName,timestamp:Date.now(),sessionId:'debug-session',runId:'run4',hypothesisId:'A'}};\n          fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(logDataTrashError)}).catch(()=>{});\n          // #endregion\n        }\n      } else {\n        console.log('[Slop-Stop] Trash icon already exists for item:', {\n          itemId,\n          tagName: item.tagName\n        });\n        // #region agent log\n        const logDataTrashExists = {location:'content-main.ts:722',message:'Trash icon already exists',data:{itemId:itemId,itemTagName:item.tagName,timestamp:Date.now(),sessionId:'debug-session',runId:'run4',hypothesisId:'A'}};\n        fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(logDataTrashExists)}).catch(()=>{});\n        // #endregion\n      }\n      \n      // Then process item to check if it's slop and add overlay if needed\n      // Check if item already has overlay, is showing, or is currently being processed\n      const existingItem = processedItems.get(item);\n      const isCurrentlyProcessing = processingItems.has(item);\n      \n      // Check if there's already an overlay in the DOM for this item\n      const hasOverlayInDOM = findProcessedItemByItemId(itemId) !== null;\n      \n      // Skip if already processing or if overlay exists\n      if (isCurrentlyProcessing || hasOverlayInDOM) {\n        continue;\n      }\n      \n      // Only process if no existing item OR existing item has no overlay and is not showing\n      if (!existingItem || (!existingItem.overlay && !existingItem.isShowing)) {\n        // #region agent log\n        const hasExistingItem = !!existingItem;\n        const hasOverlay = existingItem ? !!existingItem.overlay : false;\n        const isShowing = existingItem ? !!existingItem.isShowing : false;\n        const logData9 = {location:'content-main.ts:615',message:'About to processItem',data:{itemId:itemId,hasExistingItem:hasExistingItem,hasOverlay:hasOverlay,isShowing:isShowing,timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'A'}};\n        fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(logData9)}).catch(()=>{});\n        // #endregion\n        processingItems.add(item);\n        try {\n          await processItem(item, adapter).catch((error) => {\n            // Silently handle errors\n          });\n        } catch (error) {\n          if (error instanceof Error && error.message.includes('Extension context invalidated')) {\n            handleContextInvalidated();\n            break;\n          }\n        } finally {\n          processingItems.delete(item);\n        }\n      }\n    }\n  };\n\n  const cleanup = adapter.observeItems(handleNewItems);\n  \n  // Cleanup observer to remove overlays when elements are removed from DOM\n  const cleanupObserver = new MutationObserver((mutations) => {\n    if (!isExtensionContextValid) return;\n    \n    // Check all processed items and clean up if their elements are removed\n    const itemsToRemove: HTMLElement[] = [];\n    processedItems.forEach((item, element) => {\n      if (!element.isConnected) {\n        // Element was removed from DOM, clean up overlay\n        if (item.overlay) {\n          // Clean up overlay event listeners\n          if ((item.overlay as any).__slopCleanup) {\n            (item.overlay as any).__slopCleanup();\n          }\n          if (item.overlay.parentNode) {\n            item.overlay.parentNode.removeChild(item.overlay);\n          }\n        }\n        // Restore element styles if it still exists (might be reattached later)\n        if (element.style) {\n          element.style.removeProperty('opacity');\n          element.style.removeProperty('visibility');\n          element.style.removeProperty('pointer-events');\n          element.style.removeProperty('position');\n        }\n        itemsToRemove.push(element);\n      } else if (item.overlay && !item.overlay.parentNode) {\n        // Overlay was removed but element still exists - mark as showing\n        // Clean up listeners if they exist\n        if ((item.overlay as any).__slopCleanup) {\n          (item.overlay as any).__slopCleanup();\n        }\n        item.isShowing = true;\n        item.overlay = null;\n      } else if (item.overlay && item.overlay.parentNode !== element && !item.isShowing) {\n        // Overlay is in wrong parent - this shouldn't happen with new approach, but clean up just in case\n        if ((item.overlay as any).__slopCleanup) {\n          (item.overlay as any).__slopCleanup();\n        }\n        if (item.overlay.parentNode) {\n          item.overlay.parentNode.removeChild(item.overlay);\n        }\n        itemsToRemove.push(element);\n      }\n    });\n    \n    // Remove items from processedItems map\n    itemsToRemove.forEach(element => {\n      processedItems.delete(element);\n    });\n    \n    // Also clean up any orphaned overlays in the DOM\n    // Only remove overlays that are truly orphaned (not in processedItems and not being created)\n    document.querySelectorAll('[data-slop-overlay]').forEach((overlay) => {\n      const hasMatchingItem = Array.from(processedItems.values()).some(\n        item => item.overlay === overlay\n      );\n      // Only remove if it's truly orphaned - give it some time in case it's being added to processedItems\n      if (!hasMatchingItem && overlay.parentNode) {\n        // Check if overlay was just created (has a recent timestamp or is still being set up)\n        // If overlay has no matching item but was created recently, don't remove it yet\n        const overlayAge = (overlay as any).__createdAt || 0;\n        const ageInMs = Date.now() - overlayAge;\n        // Only remove overlays older than 2 seconds to avoid removing ones being created\n        if (ageInMs > 2000) {\n          overlay.parentNode.removeChild(overlay);\n        }\n      }\n    });\n  });\n  \n  cleanupObserver.observe(document.body, {\n    childList: true,\n    subtree: true,\n  });\n  \n  \n  const hotkeyCleanup = initializeHotkeys(\n    adapter,\n    async (itemId: string, element: HTMLElement) => {\n      // #region agent log\n      const logData10 = {location:'content-main.ts:714',message:'onReportSlop called from hotkeys',data:{itemId:itemId,elementTagName:element.tagName,elementClassName:element.className?.substring(0,50),elementIdAttr:element.id?.substring(0,30),isConnected:element.isConnected,timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'D'}};\n      fetch('http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(logData10)}).catch(()=>{});\n      // #endregion\n      if (!isExtensionContextValid) return;\n      try {\n        try {\n          await reportSlop(itemId, adapter.getPlatformName());\n        } catch (error) {\n          // Silently handle errors - context invalidated is already handled\n        }\n        if (isExtensionContextValid && element && element.isConnected) {\n          // Use the specific element that was clicked, not search for all matching items\n          // This prevents marking all posts as slop when only one was selected\n          await processItem(element, adapter, true).catch(() => {\n            // Silently handle errors\n          });\n        }\n      } catch (error) {\n        // Silently handle any errors\n      }\n    },\n    reportWebsite\n  );\n\n  // Context menu handler - store the clicked element but don't prevent default behavior\n  const handleContextMenu = (e: MouseEvent) => {\n    if (!isExtensionContextValid) return;\n    \n    const target = e.target as HTMLElement;\n    \n    // Find the post container that contains the right-clicked element\n    let postElement: HTMLElement | null = null;\n    \n    if (adapter.getPlatformName() === 'linkedin') {\n      postElement = findLinkedInPostContainer(target, adapter);\n    } else {\n      // For other platforms, use the selector\n      const selector = adapter.getItemSelector();\n      postElement = target.closest(selector) as HTMLElement;\n    }\n    \n    // Store the element for later use when \"Report Slop\" is clicked from context menu\n    // Don't prevent default - let the native context menu appear\n    if (postElement) {\n      lastRightClickedElement = postElement;\n    } else {\n      lastRightClickedElement = null;\n    }\n  };\n  \n  document.addEventListener('contextmenu', handleContextMenu, true);\n\n  window.addEventListener('beforeunload', () => {\n    cleanup();\n    cleanupObserver.disconnect();\n    hotkeyCleanup();\n    document.removeEventListener('contextmenu', handleContextMenu, true);\n  });\n\n  // Listen for keyboard commands and context menu commands from service worker\n  chrome.runtime.onMessage.addListener((message, _sender, sendResponse) => {\n    if (message.type === 'KEYBOARD_COMMAND') {\n      const command = (message as { command: string }).command;\n      \n      if (command === 'toggle-trash-mode') {\n        // Trigger Alt+S behavior\n        const fakeEvent = new KeyboardEvent('keydown', {\n          key: 's',\n          altKey: true,\n          ctrlKey: false,\n          metaKey: false,\n          bubbles: true,\n          cancelable: true,\n        });\n        document.dispatchEvent(fakeEvent);\n      } else if (command === 'report-website') {\n        // Trigger Alt+U behavior\n        const fakeEvent = new KeyboardEvent('keydown', {\n          key: 'u',\n          altKey: true,\n          ctrlKey: false,\n          metaKey: false,\n          bubbles: true,\n          cancelable: true,\n        });\n        document.dispatchEvent(fakeEvent);\n      }\n      sendResponse({ success: true });\n      return true;\n    } else if (message.type === MessageType.CONTEXT_MENU_REPORT_SLOP) {\n      // Handle context menu \"Report Slop\" click\n      if (lastRightClickedElement && isExtensionContextValid) {\n        const handleContextMenuReport = async () => {\n          try {\n            const itemId = adapter.getItemId(lastRightClickedElement!);\n            if (itemId && isExtensionContextValid) {\n              await reportSlop(itemId, adapter.getPlatformName());\n              if (isExtensionContextValid && lastRightClickedElement && lastRightClickedElement.isConnected) {\n                await processItem(lastRightClickedElement, adapter, true).catch(() => {});\n              }\n            }\n          } catch (error) {\n            // Silently handle errors\n          } finally {\n            // Clear the stored element after use\n            lastRightClickedElement = null;\n          }\n        };\n        handleContextMenuReport();\n      }\n      sendResponse({ success: true });\n      return true;\n    }\n    return false;\n  });\n};\n\n// Only run in the main frame, not in iframes or sandboxed frames\n// This prevents errors about sandboxed frames trying to execute scripts\ntry {\n  // Check if we're in an iframe or sandboxed frame\n  const isInIframe = window.self !== window.top;\n  const isAboutBlank = window.location.href === 'about:blank' || window.location.href === 'about:srcdoc';\n  \n  if (isInIframe || isAboutBlank) {\n    // Running in an iframe or sandboxed frame - exit early to prevent errors\n    // Content scripts should only run in the main frame\n    console.log('[Slop-Stop] Content script skipped: running in iframe or sandboxed frame', {\n      isInIframe,\n      isAboutBlank,\n      location: window.location.href\n    });\n  } else {\n    // Running in main frame - proceed with initialization\n    if (document.readyState === 'loading') {\n      document.addEventListener('DOMContentLoaded', initializeContentScript);\n    } else {\n      initializeContentScript();\n    }\n  }\n} catch (error) {\n  // If we can't determine the frame context, skip initialization to be safe\n  console.warn('[Slop-Stop] Error checking frame context, skipping initialization:', error);\n}\n"],
  "mappings": "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",
  "names": ["BaseAdapter", "callback", "lastItemsCount", "checkCount", "maxChecks", "processedItemSet", "debounceTimer", "DEBOUNCE_MS", "checkForItems", "items", "newItems", "item", "countChanged", "error", "observer", "initialItems", "selector", "originalElement", "ghost", "overlay", "rect", "container", "PLATFORM_DOMAINS", "TwitterAdapter", "BaseAdapter", "url", "hostname", "PLATFORM_DOMAINS", "domain", "element", "tweetId", "link", "match", "ariaLabel", "originalElement", "computedStyle", "originalHeight", "child", "media", "overlay", "YouTubeAdapter", "BaseAdapter", "url", "hostname", "PLATFORM_DOMAINS", "domain", "element", "videoId", "thumbnails", "thumbnail", "thumbnailLink", "href", "v", "match", "mainVideoLinks", "videoIds", "link", "foundId", "titleLink", "parent", "depth", "parentVideoId", "parentThumbnails", "originalElement", "originalHeight", "child", "img", "video", "el", "htmlEl", "overlay", "LinkedInAdapter", "BaseAdapter", "url", "hostname", "PLATFORM_DOMAINS", "domain", "mainFeed", "m", "logDataMainFeed", "scrollContainer", "scrollContainerSelectors", "selector", "found", "allDivs", "div", "className", "style", "allItems", "seen", "candidateElements", "sortedCandidates", "el", "a", "b", "item", "logDataStart", "htmlEl", "isDescendantOfPost", "existingItem", "textLength", "buttons", "buttonsCount", "images", "imagesCount", "childrenCount", "hasEngagementButtons", "btn", "btnText", "hasProfileImage", "img", "alt", "rect", "hasMinimumHeight", "isTopLevel", "parent", "depth", "nestedPosts", "nestedPost", "index", "allDescendants", "desc", "logDataPost", "logDataReturn", "logDataFallback", "allMainChildren", "potentialPosts", "container", "parentTextLength", "containerTextLength", "uniquePotentialPosts", "p", "element", "logDataReturn2", "postLinks", "link", "href", "match", "logDataLink", "logDataLink2", "id", "logDataAttr", "urn", "parentLinks", "logDataParentLink", "logDataUrn", "activityId", "logDataActivityId", "textContent", "position", "idAttr", "dataAttrs", "attr", "uniqueString", "hash", "i", "char", "originalElement", "computedStyle", "originalOverflow", "originalHeight", "child", "media", "overlay", "clampedHeight", "logDataOverlay", "WebsiteAdapter", "BaseAdapter", "url", "hostname", "PLATFORM_DOMAINS", "domain", "element", "originalElement", "overlay", "detectPlatform", "url", "hostname", "platform", "domains", "PLATFORM_DOMAINS", "domain", "createSlopCurtain", "options", "curtain", "handleShow", "contentContainer", "gradientOverlay", "icon", "headline", "subtext", "counterBadge", "buttons", "returnButton", "handleReturn", "e", "continueButton", "handleContinue", "showButton", "createConfirmationModal", "options", "overlay", "modal", "icon", "message", "buttons", "cancelButton", "e", "confirmButton", "handleKeyDown", "removeConfirmationModal", "hasLinkedInSignals", "element", "buttons", "images", "hasEngagementButtons", "btn", "btnText", "hasProfileImage", "img", "alt", "isDefinitelyNotAPostContainer", "isLikelyLinkedInPostContainer", "textLength", "scoreCandidates", "candidates", "rect", "c", "findLinkedInPostContainer", "target", "adapter", "containingCandidates", "el", "scored", "a", "b", "current", "depth", "hotkeyState", "initializeHotkeys", "adapter", "onReportSlop", "onReportWebsite", "handleKeyDown", "e", "toggleTrashMode", "handleReportWebsite", "exitTrashMode", "enterTrashMode", "handleClick", "target", "logData1", "selector", "item", "findLinkedInPostContainer", "selectors", "s", "sel", "itemId", "logData3", "logDataNoId", "logDataModal", "modal", "createConfirmationModal", "removeConfirmationModal", "logDataNoItem", "cleanup", "result", "showWebsiteBlockModal", "reportCount", "overlay", "gradientOverlay", "content", "iconContainer", "title", "message", "counterBadge", "buttons", "returnButton", "handleReturn", "continueButton", "handleContinue", "observer", "processedItems", "processingItems", "currentAdapter", "isExtensionContextValid", "lastRightClickedElement", "findProcessedItemByItemId", "itemId", "item", "isContextInvalidated", "error", "handleContextInvalidated", "icon", "overlay", "getAdapter", "url", "detectPlatform", "TwitterAdapter", "YouTubeAdapter", "LinkedInAdapter", "WebsiteAdapter", "checkSlopStatus", "platform", "resolve", "response", "errorMsg", "errorMessage", "reportSlop", "reject", "reportWebsite", "processItem", "element", "adapter", "forceOverlay", "logData", "logData2", "existingItemByItemId", "existingItem", "status", "logData3", "reportCount", "trashIcon", "curtain", "createSlopCurtain", "child", "media", "originalOverflow", "i", "computedStyle", "logData4", "addTrashIconToItem", "isMainFeed", "logDataTrash1", "logDataTrashSkip", "mainFeed", "textLength", "buttons", "hasSubstantialContent", "logDataTrashSkip2", "logDataTrashSkip3", "handleTrashClick", "e", "logData5", "logData6", "showTrashIcon", "hideTrashIcon", "computedStyleAfter", "trashIconComputed", "logDataTrashAdded", "event", "initializeContentScript", "handleNewItems", "items", "logData7", "el", "logData8", "logDataSkipNoId", "logDataInvalidId", "logDataTrashExists", "logDataBeforeAddTrash", "trashIconAfter", "logDataAfterAddTrash", "logDataTrashError", "isCurrentlyProcessing", "hasOverlayInDOM", "hasExistingItem", "hasOverlay", "isShowing", "logData9", "cleanup", "cleanupObserver", "mutations", "itemsToRemove", "overlayAge", "hotkeyCleanup", "initializeHotkeys", "logData10", "handleContextMenu", "target", "postElement", "findLinkedInPostContainer", "selector", "message", "_sender", "sendResponse", "command", "fakeEvent", "isInIframe", "isAboutBlank"]
}
