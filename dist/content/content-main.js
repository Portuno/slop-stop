"use strict";var StopSlopContent=(()=>{var M=class{observeItems(t){let c=0,l=0,n=20,i=new WeakSet,r=null,s=300,a=()=>{let h=this.getCurrentItems(),f=h.filter(d=>!i.has(d)),g=h.length!==c;h.length>0&&(f.length>0||l===0)&&(r!==null&&clearTimeout(r),r=window.setTimeout(()=>{h.forEach(d=>i.add(d)),c=h.length;try{t(h)}catch{}r=null},s)),this.getPlatformName()==="linkedin"&&l<n&&(l++,setTimeout(a,500))},o=new MutationObserver(()=>{a()});o.observe(document.body,{childList:!0,subtree:!0});let m=this.getCurrentItems();return m.length>0?(m.forEach(h=>i.add(h)),c=m.length,t(m)):this.getPlatformName()==="linkedin"&&setTimeout(a,1e3),()=>o.disconnect()}getCurrentItems(){let t=this.getItemSelector();return Array.from(document.querySelectorAll(t))}createGhostContainer(t){let c=t.cloneNode(!0);c.style.visibility="hidden",c.style.pointerEvents="none";let l=document.createElement("div");l.style.position="absolute",l.style.top="0",l.style.left="0",l.style.width="100%",l.style.height="100%",l.style.zIndex="9999",l.setAttribute("data-slop-overlay","true");let n=t.getBoundingClientRect();l.style.width=`${n.width}px`,l.style.height=`${n.height}px`;let i=document.createElement("div");return i.style.position="relative",i.style.width=`${n.width}px`,i.style.height=`${n.height}px`,i.appendChild(c),i.appendChild(l),i}};var N={twitter:["twitter.com","x.com"],youtube:["youtube.com"],linkedin:["linkedin.com"],website:[]};var G=class extends M{getPlatformName(){return"twitter"}canHandleUrl(t){let c=new URL(t).hostname.toLowerCase();return N.twitter.some(l=>c.includes(l))}getItemSelector(){return'article[data-testid="tweet"]'}getItemId(t){let c=t.getAttribute("data-tweet-id");if(c)return c;let l=t.querySelector('a[href*="/status/"]');if(l){let i=l.href.match(/\/status\/(\d+)/);if(i)return i[1]}let n=t.getAttribute("aria-labelledby");return n||null}getUserIdentifier(t){let c=t.querySelectorAll('a[href*="/"]');for(let r of Array.from(c)){let a=r.href.match(/(?:twitter\.com|x\.com)\/([^\/\?]+)/);if(a&&a[1]){let o=a[1];if(!["status","i","home","explore","notifications","messages","search","settings","logout"].includes(o.toLowerCase()))return o}}let l=t.querySelector('[data-testid="User-Name"]');if(l){let r=l.querySelector('a[href*="/"]');if(r){let s=r.href.match(/(?:twitter\.com|x\.com)\/([^\/\?]+)/);if(s&&s[1])return s[1]}}let i=(t.textContent||"").match(/@([a-zA-Z0-9_]+)/);return i&&i[1]?i[1]:null}createGhostContainer(t){let c=window.getComputedStyle(t);c.position==="static"&&(t.style.position="relative"),t.style.visibility="visible",t.style.opacity="1";let l=t.offsetHeight||t.getBoundingClientRect().height;l>0&&(t.style.minHeight=`${l}px`),Array.from(t.children).forEach(s=>{s.getAttribute("data-slop-overlay")!=="true"&&(s.style.visibility="hidden",s.style.pointerEvents="none")}),t.querySelectorAll("img, video, svg").forEach(s=>{s.style.visibility="hidden",s.style.pointerEvents="none"}),t.style.pointerEvents="none";let r=document.createElement("div");return r.style.position="absolute",r.style.top="0",r.style.left="0",r.style.right="0",r.style.bottom="0",r.style.width="100%",r.style.height="100%",l>0&&(r.style.minHeight=`${l}px`),r.style.borderRadius=c.borderRadius||"16px",r.style.zIndex="999999",r.style.opacity="1",r.style.visibility="visible",r.style.display="flex",r.style.pointerEvents="auto",r.style.overflow="hidden",r.setAttribute("data-slop-overlay","true"),t.appendChild(r),r}};var $=class extends M{getPlatformName(){return"youtube"}canHandleUrl(t){let c=new URL(t).hostname.toLowerCase();return N.youtube.some(l=>c.includes(l))}getItemSelector(){return"ytd-rich-item-renderer, ytd-video-renderer"}getItemId(t){let c=t.getAttribute("data-video-id");if(c&&c.length>=11)return c;let l=t.querySelectorAll("ytd-thumbnail, yt-img-shadow");for(let a of Array.from(l)){let o=a.querySelector('a[href*="/watch"], a[href*="/shorts/"]');if(o){let m=o.href;if(m.includes("/watch"))try{let f=new URL(m).searchParams.get("v");if(f&&f.length>=11)return f}catch{let f=m.match(/[?&]v=([^&]+)/);if(f&&f[1]&&f[1].length>=11)return f[1]}if(m.includes("/shorts/")){let h=m.match(/\/shorts\/([^/?&]+)/);if(h&&h[1]&&h[1].length>=11)return h[1]}}}let n=t.querySelectorAll('a[href*="/watch"], a[href*="/shorts/"]'),i=new Set;for(let a of Array.from(n)){let o=a.href;if(o.includes("/channel/")||o.includes("/user/")||o.includes("/c/")||o.includes("/@"))continue;let m=null;if(o.includes("/watch"))try{let f=new URL(o).searchParams.get("v");f&&f.length>=11&&(m=f)}catch{let f=o.match(/[?&]v=([^&]+)/);f&&f[1]&&f[1].length>=11&&(m=f[1])}else if(o.includes("/shorts/")){let h=o.match(/\/shorts\/([^/?&]+)/);h&&h[1]&&h[1].length>=11&&(m=h[1])}m&&i.add(m)}if(i.size===1)return Array.from(i)[0];if(i.size>1){let a=t.querySelector('a#video-title, a[href*="/watch"]:not([href*="/channel"]):not([href*="/user"]):not([href*="/c/"]):not([href*="/@"])');if(a){let o=a.href;if(o.includes("/watch"))try{let h=new URL(o).searchParams.get("v");if(h&&h.length>=11&&i.has(h))return h}catch{let h=o.match(/[?&]v=([^&]+)/);if(h&&h[1]&&h[1].length>=11&&i.has(h[1]))return h[1]}}return Array.from(i)[0]}let r=t.parentElement,s=0;for(;r&&s<3;){let a=r.getAttribute("data-video-id");if(a&&a.length>=11)return a;let o=r.querySelectorAll("ytd-thumbnail, yt-img-shadow");for(let m of Array.from(o)){let h=m.querySelector('a[href*="/watch"], a[href*="/shorts/"]');if(h){let f=h.href;if(f.includes("/watch"))try{let u=new URL(f).searchParams.get("v");if(u&&u.length>=11)return u}catch{let u=f.match(/[?&]v=([^&]+)/);if(u&&u[1]&&u[1].length>=11)return u[1]}if(f.includes("/shorts/")){let g=f.match(/\/shorts\/([^/?&]+)/);if(g&&g[1]&&g[1].length>=11)return g[1]}}}r=r.parentElement,s++}return null}getUserIdentifier(t){let c=t.querySelectorAll('a[href*="/@"]');for(let i of Array.from(c)){let s=i.href.match(/youtube\.com\/@([^\/\?]+)/);if(s&&s[1])return`@${s[1]}`}let l=t.querySelectorAll('a[href*="/channel/"], a[href*="/c/"], a[href*="/user/"]');for(let i of Array.from(l)){let r=i.href,s=r.match(/youtube\.com\/c\/([^\/\?]+)/);if(s&&s[1]||(s=r.match(/youtube\.com\/user\/([^\/\?]+)/),s&&s[1])||(s=r.match(/youtube\.com\/channel\/([^\/\?]+)/),s&&s[1]))return s[1]}let n=t.querySelector("ytd-channel-name a, #channel-name a");if(n){let i=n.href;if(i){let r=i.match(/youtube\.com\/@([^\/\?]+)/);if(r&&r[1])return`@${r[1]}`}}return null}createGhostContainer(t){window.getComputedStyle(t).position==="static"&&(t.style.position="relative"),t.style.visibility="visible",t.style.opacity="1";let l=t.offsetHeight||t.getBoundingClientRect().height;l>0&&(t.style.minHeight=`${l}px`);let n=this.getItemId(t);Array.from(t.children).forEach(m=>{m.getAttribute("data-slop-overlay")!=="true"&&(m.style.visibility="hidden",m.style.pointerEvents="none")}),t.querySelectorAll("img, yt-img-shadow img, yt-image img").forEach(m=>{m.style.visibility="hidden",m.style.pointerEvents="none"}),t.querySelectorAll("video, ytd-thumbnail video").forEach(m=>{m.style.visibility="hidden",m.style.pointerEvents="none"}),t.querySelectorAll('[style*="background-image"]').forEach(m=>{let h=m;h.style.backgroundImage="none"}),t.style.pointerEvents="none";let o=document.createElement("div");return o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.right="0",o.style.bottom="0",o.style.width="100%",o.style.height="100%",l>0&&(o.style.minHeight=`${l}px`),o.style.zIndex="99999",o.style.opacity="1",o.style.display="flex",o.style.visibility="visible",o.style.pointerEvents="auto",o.style.overflow="hidden",o.setAttribute("data-slop-overlay","true"),o.setAttribute("data-video-id",n||""),t.appendChild(o),o}};var z=class extends M{getPlatformName(){return"linkedin"}canHandleUrl(t){let c=new URL(t).hostname.toLowerCase();return N.linkedin.some(l=>c.includes(l))}getItemSelector(){return'[role="article"], [role="region"][aria-label*="Post"], [role="region"][aria-label*="post"], div[data-test-id*="activity"], div[data-test-id*="feed"], section[class*="update"], section[class*="post"]'}getCurrentItems(){let t=null;t=document.querySelector("main#workspace"),t||(t=Array.from(document.querySelectorAll("main")).find(p=>p.id==="workspace")||null),t||(t=document.querySelector("main")),t||(t=document.body,console.warn("[Slop-Stop] main#workspace not found, using document.body as fallback"));let c={location:"linkedin-adapter.ts:26",message:"Main feed container search",data:{mainFeedFound:!!t,mainFeedTag:t?.tagName,mainFeedId:t?.id,mainFeedClassName:t?.className?.substring(0,100),allMainsCount:document.querySelectorAll("main").length,bodyChildrenCount:document.body.children.length,url:window.location.href},timestamp:Date.now(),sessionId:"debug-session",runId:"run4",hypothesisId:"D"};if(fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).catch(()=>{}),!t)return console.warn("[Slop-Stop] Could not find main feed container"),[];let l=null,n=[".scaffold-finite-scroll__content",'[class*="scaffold-finite-scroll"]','div[class*="scroll"]'];for(let d of n){let p=t.querySelector(d);if(p){l=p;break}}if(!l){let d=Array.from(t.querySelectorAll("div"));for(let p of d){let b=p.className||"",I=p.getAttribute("style")||"";if((b.includes("scroll")||b.includes("feed")||I.includes("overflow")&&I.includes("auto"))&&p.children.length>5){l=p,console.log(`[Slop-Stop] Found scroll container by deep search: ${b.substring(0,50)}`);break}}}l||(l=t);let i=[],r=new Set,s=Array.from(l.querySelectorAll("div, section, article")),a=s.map(d=>({element:d,size:(d.textContent?.length||0)+d.children.length*100+d.querySelectorAll('button, [role="button"]').length*50})).sort((d,p)=>p.size-d.size).map(d=>d.element),o={location:"linkedin-adapter.ts:50",message:"Starting structure-based detection",data:{candidateElementsCount:s.length,sortedCandidatesCount:a.length,scrollContainerFound:!!l,scrollContainerTag:l?.tagName},timestamp:Date.now(),sessionId:"debug-session",runId:"run4",hypothesisId:"D"};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).catch(()=>{});for(let d of a){if(r.has(d)||d===l||d===t||d.tagName==="MAIN")continue;let p=!1;for(let v of i)if(v.contains(d)){p=!0;break}if(p){r.add(d);continue}let b=d.textContent?.length||0,I=d.querySelectorAll('button, [role="button"]'),w=I.length,L=d.querySelectorAll("img"),E=L.length,x=d.children.length,U=Array.from(I).some(v=>{let y=(v.textContent||"").toLowerCase();return y.includes("like")||y.includes("comentar")||y.includes("comment")||y.includes("share")||y.includes("compartir")||y.includes("recomendar")}),j=Array.from(L).some(v=>{let y=(v.getAttribute("alt")||"").toLowerCase();return y.includes("profile")||y.includes("avatar")||y.includes("member")}),X=d.getBoundingClientRect(),F=X.height>=150,H=!1,P=d.parentElement,D=0;for(;P&&D<5;){if(P===l){H=D<=2;break}P=P.parentElement,D++}if(b>=50&&b<=5e3&&(U||j)&&(x>=2||E>0)&&(F||H)&&H&&(d.tagName==="DIV"||d.tagName==="SECTION"||d.tagName==="ARTICLE")){let v=[];for(let k of i)d.contains(k)&&v.push(k);for(let k of v){let B=i.indexOf(k);B!==-1&&(i.splice(B,1),r.delete(k))}r.add(d);let y=d.querySelectorAll("div, section, article");y.forEach(k=>r.add(k)),i.push(d);let J={location:"linkedin-adapter.ts:110",message:"Found post by structure",data:{tagName:d.tagName,className:d.className?.substring(0,100),textLength:b,buttonsCount:w,imagesCount:E,hasEngagementButtons:U,hasProfileImage:j,hasMinimumHeight:F,isTopLevel:H,depth:D,height:X.height,descendantsMarked:y.length,nestedPostsRemoved:v.length},timestamp:Date.now(),sessionId:"debug-session",runId:"run5",hypothesisId:"D"};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(J)}).catch(()=>{})}}if(i.length>0){let d={location:"linkedin-adapter.ts:125",message:"getCurrentItems returning (structure-based)",data:{itemsCount:i.length,items:i.slice(0,5).map(p=>({tagName:p.tagName,className:p.className?.substring(0,50),id:p.id?.substring(0,30),textLength:p.textContent?.length,buttonsCount:p.querySelectorAll('button, [role="button"]').length,imagesCount:p.querySelectorAll("img").length,childrenCount:p.children.length}))},timestamp:Date.now(),sessionId:"debug-session",runId:"run4",hypothesisId:"D"};return fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}).catch(()=>{}),i}let m={location:"linkedin-adapter.ts:135",message:"Starting aggressive fallback",data:{timestamp:Date.now()},sessionId:"debug-session",runId:"run3",hypothesisId:"P"};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)}).catch(()=>{});let h=Array.from(t.querySelectorAll("*")).slice(0,1e3),f=[];h.forEach(d=>{let p=d;if(p.tagName==="MAIN"||p.id==="workspace")return;let I=(p.textContent||"").length,w=p.querySelectorAll('button, [role="button"]'),L=w.length,E=p.querySelectorAll("img"),x=E.length,U=Array.from(w).some(v=>{let y=(v.textContent||"").toLowerCase();return y.includes("like")||y.includes("comentar")||y.includes("comment")||y.includes("share")||y.includes("compartir")||y.includes("recomendar")||y.includes("follow")||y.includes("connect")}),j=Array.from(E).some(v=>{let y=(v.getAttribute("alt")||"").toLowerCase();return y.includes("profile")||y.includes("avatar")||y.includes("member")}),F=p.getBoundingClientRect().height>=150,H=!1,P=p.parentElement,D=0;for(;P&&D<5;){if(P===t||P===l){H=D<=2;break}P=P.parentElement,D++}if(I>=50&&I<=5e3&&(U||j)&&(p.children.length>=2||x>0)&&(F||H)&&H&&(p.tagName==="DIV"||p.tagName==="SECTION"||p.tagName==="ARTICLE")){let v=p,y=p.parentElement,J=0;for(;y&&J<5&&y!==t;){let B=(y.textContent||"").length;if(y.querySelectorAll('button, [role="button"]').length>=2&&B>=50&&B<=3e3)v=y;else if(B>3e3)break;y=y.parentElement,J++}if(v.tagName==="MAIN"||v.id==="workspace")return;let k=v.textContent?.length||0;if(k<50||k>3e3)return;f.push({element:v,reason:U?"hasEngagementButtons":j?"hasProfileImage":"isSubstantialContainer",data:{tagName:v.tagName,className:v.className?.substring(0,150)||"",textLength:k,buttonsCount:v.querySelectorAll('button, [role="button"]').length,imagesCount:v.querySelectorAll("img").length}})}}),Array.from(new Map(f.map(d=>[d.element,d])).values()).forEach(({element:d})=>{r.has(d)||(r.add(d),i.push(d))});let u={location:"linkedin-adapter.ts:200",message:"getCurrentItems returning (aggressive fallback)",data:{itemsCount:i.length,items:i.slice(0,5).map(d=>({tagName:d.tagName,className:d.className?.substring(0,50),id:d.id?.substring(0,30),textLength:d.textContent?.length,buttonsCount:d.querySelectorAll('button, [role="button"]').length,imagesCount:d.querySelectorAll("img").length,childrenCount:d.children.length}))},timestamp:Date.now(),sessionId:"debug-session",runId:"run4",hypothesisId:"D"};return fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}).catch(()=>{}),i}getItemId(t){let c=t.querySelectorAll('a[href*="/feed/update"], a[href*="activity"], a[href*="/posts/"]');for(let u of Array.from(c)){let d=u.href,p=d.match(/\/feed\/update\/urn:li:activity:(\d+)/);if(p){let b={location:"linkedin-adapter.ts:517",message:"Found post ID from link URL",data:{activityId:p[1],href:d.substring(0,100),method:"feed/update/urn",timestamp:Date.now(),sessionId:"debug-session",runId:"run7",hypothesisId:"E"}};return fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}).catch(()=>{}),p[1]}if(p=d.match(/\/posts\/([^/?]+)/)||d.match(/[?&]activity=([^&]+)/)||d.match(/activity[=:](\d+)/),p){let b={location:"linkedin-adapter.ts:525",message:"Found post ID from link URL (pattern 2)",data:{activityId:p[1],href:d.substring(0,100),method:"posts/activity",timestamp:Date.now(),sessionId:"debug-session",runId:"run7",hypothesisId:"E"}};return fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}).catch(()=>{}),p[1]}}let l=t.getAttribute("data-id");if(l?.startsWith("urn:li:activity:")){let u=l.match(/urn:li:activity:(\d+)/);if(u){let d={location:"linkedin-adapter.ts:533",message:"Found post ID from data-id attribute",data:{activityId:u[1],method:"data-id",timestamp:Date.now(),sessionId:"debug-session",runId:"run7",hypothesisId:"E"}};return fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}).catch(()=>{}),u[1]}return l}let n=t.getAttribute("data-urn");if(!n&&!l){let u=t.parentElement,d=0;for(;u&&d<10;){let p=u.querySelectorAll('a[href*="/feed/update"], a[href*="activity"], a[href*="/posts/"]');for(let b of Array.from(p)){let I=b.href,w=I.match(/\/feed\/update\/urn:li:activity:(\d+)/)||I.match(/\/posts\/([^/?]+)/)||I.match(/[?&]activity=([^&]+)/)||I.match(/activity[=:](\d+)/);if(w){let L={location:"linkedin-adapter.ts:548",message:"Found post ID from parent link",data:{activityId:w[1],depth:d,href:I.substring(0,100),timestamp:Date.now(),sessionId:"debug-session",runId:"run7",hypothesisId:"E"}};return fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)}).catch(()=>{}),w[1]}}if(l=u.getAttribute("data-id"),l?.startsWith("urn:li:activity:")){let b=l.match(/urn:li:activity:(\d+)/);return b?b[1]:l}if(n=u.getAttribute("data-urn"),n?.startsWith("urn:li:activity:"))break;u=u.parentElement,d++}}if(n?.startsWith("urn:li:activity:")){let u=n.match(/urn:li:activity:(\d+)/);if(u){let d={location:"linkedin-adapter.ts:567",message:"Found post ID from data-urn attribute",data:{activityId:u[1],method:"data-urn",timestamp:Date.now(),sessionId:"debug-session",runId:"run7",hypothesisId:"E"}};return fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}).catch(()=>{}),u[1]}return n}let i=t.getAttribute("data-activity-id");if(!i){let u=t.parentElement,d=0;for(;u&&d<10&&(i=u.getAttribute("data-activity-id"),!i);)u=u.parentElement,d++}if(i){let u={location:"linkedin-adapter.ts:586",message:"Found post ID from data-activity-id attribute",data:{activityId:i,method:"data-activity-id",timestamp:Date.now(),sessionId:"debug-session",runId:"run7",hypothesisId:"E"}};return fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}).catch(()=>{}),i}let r={location:"linkedin-adapter.ts:595",message:"Using fallback hash-based ID (no unique link found)",data:{elementTagName:t.tagName,hasLinks:c.length>0,timestamp:Date.now(),sessionId:"debug-session",runId:"run7",hypothesisId:"E"}};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).catch(()=>{});let s=t.textContent?.substring(0,300)||"",a=Array.from(t.parentElement?.children||[]).indexOf(t),o=t.className||"",m=t.id||"",h=[];Array.from(t.attributes).forEach(u=>{u.name.startsWith("data-")&&u.value&&h.push(`${u.name}=${u.value.substring(0,50)}`)});let f=`${s}-${o}-${m}-${a}-${h.join("-")}`,g=0;for(let u=0;u<f.length;u++){let d=f.charCodeAt(u);g=(g<<5)-g+d,g=g&g}return`linkedin-${a}-${Math.abs(g)}`}getUserIdentifier(t){let c=t.querySelectorAll('a[href*="/in/"]');for(let r of Array.from(c)){let a=r.href.match(/linkedin\.com\/in\/([^\/\?]+)/);if(a&&a[1]){let o=a[1];if(!["feed","jobs","messaging","notifications","learning","my-items"].includes(o.toLowerCase()))return o}}let l=t.querySelector('[data-testid="actor"], [class*="actor"], [class*="author"]');if(l){let r=l.querySelector('a[href*="/in/"]');if(r){let s=r.href.match(/linkedin\.com\/in\/([^\/\?]+)/);if(s&&s[1])return s[1]}}let n=t.parentElement,i=0;for(;n&&i<5;){let r=n.querySelectorAll('a[href*="/in/"]');for(let s of Array.from(r)){let a=s.href.match(/linkedin\.com\/in\/([^\/\?]+)/);if(a&&a[1]){let o=a[1];if(!["feed","jobs","messaging","notifications","learning","my-items"].includes(o.toLowerCase()))return o}}n=n.parentElement,i++}return null}createGhostContainer(t){let c=window.getComputedStyle(t);c.position==="static"&&(t.style.position="relative"),t.style.visibility="visible",t.style.opacity="1";let l=c.overflow;l!=="hidden"&&(t.style.overflow="hidden",t.hasAttribute("data-slop-original-overflow")||t.setAttribute("data-slop-original-overflow",l));let n=t.offsetHeight||t.getBoundingClientRect().height;this.getPlatformName()!=="linkedin"&&n>0?t.style.minHeight=`${n}px`:t.style.minHeight="0px",t.style.maxHeight="250px",Array.from(t.children).forEach(o=>{o.getAttribute("data-slop-overlay")!=="true"&&(o.style.visibility="hidden",o.style.pointerEvents="none")}),t.querySelectorAll("img, video, svg").forEach(o=>{o.style.visibility="hidden",o.style.pointerEvents="none"}),t.style.pointerEvents="none";let s=document.createElement("div");if(s.style.position="absolute",s.style.top="0",s.style.left="0",s.style.right="0",s.style.bottom="0",s.style.width="100%",s.style.height="100%",n>0){let o=Math.min(n,250);s.style.minHeight=`${o}px`,s.style.maxHeight="250px"}else s.style.maxHeight="250px";s.style.zIndex="9999",s.style.opacity="1",s.style.visibility="visible",s.style.display="flex",s.style.pointerEvents="auto",s.style.overflow="hidden",s.setAttribute("data-slop-overlay","true");let a={location:"linkedin-adapter.ts:650",message:"Creating overlay",data:{originalElementTag:t.tagName,originalHeight:n,overlayPosition:"absolute",overlayZIndex:"9999",hasOverflowHidden:c.overflow==="hidden",timestamp:Date.now(),sessionId:"debug-session",runId:"run7",hypothesisId:"A"}};return fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).catch(()=>{}),t.appendChild(s),s}};var K=class extends M{getPlatformName(){return"website"}canHandleUrl(t){let c=new URL(t).hostname.toLowerCase();return![...N.twitter,...N.youtube,...N.linkedin].some(n=>c.includes(n))}getItemSelector(){return"body"}getItemId(t){return window.location.href}getUserIdentifier(t){try{return new URL(window.location.href).hostname.replace(/^www\./,"")}catch{return null}}createGhostContainer(t){let c=document.createElement("div");return c.style.position="fixed",c.style.top="0",c.style.left="0",c.style.width="100%",c.style.height="100%",c.style.zIndex="99999",c.setAttribute("data-slop-overlay","true"),document.body.appendChild(c),c}};var oe=e=>{let t=new URL(e).hostname.toLowerCase();for(let[c,l]of Object.entries(N))if(l.some(n=>t.includes(n)))return c;return"website"};var se=e=>{let t=document.createElement("div");t.className=`slop-curtain${e.platform?` slop-curtain--${e.platform}`:""}`,t.setAttribute("data-slop-curtain","true"),e.platform==="website"&&(document.body.dataset.slopCurtainScrollLocked="true",document.body.style.overflow="hidden");let c=()=>{t.style.transition="opacity 0.3s ease-out",t.style.opacity="0",setTimeout(()=>{e.onShow(),document.body.dataset.slopCurtainScrollLocked&&(document.body.style.overflow="",delete document.body.dataset.slopCurtainScrollLocked)},300)},l=document.createElement("div");if(l.className="slop-curtain-content",e.platform==="website"){let n=document.createElement("div");n.className="slop-curtain-gradient",t.appendChild(n),l.classList.add("slop-curtain-content--website");let i=document.createElement("div");i.className="slop-curtain-icon",i.innerHTML="\u26A0\uFE0F",i.setAttribute("aria-hidden","true");let r=document.createElement("h2");r.className="slop-curtain-headline",r.textContent="Access Restricted: Community-Flagged Slop";let s=document.createElement("p");s.className="slop-curtain-subtext",s.textContent="Human curators have identified this entire website as a primary source of filler or low-quality content.";let a=document.createElement("div");a.className="slop-curtain-counter",a.textContent=`[${e.reportCount}] Humans have flagged this domain as Slop`;let o=document.createElement("div");o.className="slop-curtain-buttons";let m=document.createElement("button");m.className="slop-curtain-button slop-curtain-button--primary",m.textContent="Take me back to safety",m.setAttribute("aria-label","Return to previous page"),m.setAttribute("tabindex","0");let h=()=>{window.history.back(),document.body.dataset.slopCurtainScrollLocked&&(document.body.style.overflow="",delete document.body.dataset.slopCurtainScrollLocked),t.remove()};m.addEventListener("click",h),m.addEventListener("keydown",u=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),h())});let f=document.createElement("button");f.className="slop-curtain-button slop-curtain-button--secondary",f.textContent="Continue anyway",f.setAttribute("aria-label","Continue to website anyway"),f.setAttribute("tabindex","0");let g=()=>{c()};f.addEventListener("click",g),f.addEventListener("keydown",u=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),g())}),o.appendChild(m),o.appendChild(f),l.appendChild(i),l.appendChild(r),l.appendChild(s),l.appendChild(a),l.appendChild(o)}else{let n=document.createElement("h2");n.className="slop-curtain-headline",n.textContent="Slop content flagged by the community";let i=document.createElement("p");i.className="slop-curtain-subtext",i.textContent="This content was identified as filler or low-quality slop by Human Resistance curators.";let r=document.createElement("div");r.className="slop-curtain-counter",r.textContent=`[${e.reportCount}] Community Reports`,l.appendChild(n),l.appendChild(i),l.appendChild(r)}if(e.platform!=="website"){let n=document.createElement("button");n.className="slop-curtain-show-button",n.textContent="Show",n.setAttribute("aria-label","Show slop content"),n.setAttribute("tabindex","0"),n.style.pointerEvents="auto",n.style.zIndex="10001",n.addEventListener("click",i=>{i.preventDefault(),i.stopPropagation(),i.stopImmediatePropagation(),c()}),n.addEventListener("keydown",i=>{(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),i.stopPropagation(),c())}),t.appendChild(n)}return t.appendChild(l),t};var Q=e=>{let t=document.createElement("div");t.className="slop-confirmation-overlay",t.setAttribute("data-slop-modal","true"),t.setAttribute("role","dialog"),t.setAttribute("aria-modal","true");let c=document.createElement("div");c.className="slop-confirmation-modal";let l=document.createElement("div");l.className="slop-confirmation-icon",l.innerHTML=`
    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
      <path d="M4 7h16M9 7V5a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2m-7 0v10a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2V7M10 11v6M14 11v6" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  `;let n=document.createElement("h2");n.className="slop-confirmation-title",n.textContent=e.message;let i=document.createElement("div");i.className="slop-confirmation-buttons";let r=document.createElement("button");r.className="slop-confirmation-cancel",r.textContent=e.cancelText||"Cancel",r.setAttribute("aria-label","Cancel"),r.setAttribute("tabindex","0"),r.addEventListener("click",e.onCancel),r.addEventListener("keydown",o=>{o.key==="Escape"&&(o.preventDefault(),e.onCancel())});let s=document.createElement("button");s.className="slop-confirmation-confirm",s.textContent=e.confirmText||"Confirm",s.setAttribute("aria-label","Confirm"),s.setAttribute("tabindex","0"),s.addEventListener("click",e.onConfirm),s.addEventListener("keydown",o=>{o.key==="Enter"&&(o.preventDefault(),e.onConfirm())}),i.appendChild(r),i.appendChild(s),c.appendChild(n),c.appendChild(i),t.appendChild(c);let a=o=>{o.key==="Escape"?e.onCancel():o.key==="Enter"&&o.target===t&&e.onConfirm()};return t.addEventListener("keydown",a),t.addEventListener("click",o=>{o.target===t&&e.onCancel()}),setTimeout(()=>{s.focus()},0),t},q=e=>{e.remove()};var de=e=>{let t=e.querySelectorAll('button, [role="button"]'),c=e.querySelectorAll("img"),l=Array.from(t).some(i=>{let r=(i.textContent||"").toLowerCase();return r.includes("like")||r.includes("recomendar")||r.includes("comment")||r.includes("comentar")||r.includes("share")||r.includes("compartir")}),n=Array.from(c).some(i=>{let r=(i.getAttribute("alt")||"").toLowerCase();return r.includes("profile")||r.includes("avatar")||r.includes("member")});return l||n},me=e=>e.tagName==="MAIN"||e.id==="workspace"||(e.textContent?.length||0)>9e3||e.getBoundingClientRect().height>2600,ae=e=>{if(me(e))return!1;let t=e.textContent?.length||0;return!(t<50||t>8e3||e.getBoundingClientRect().height<120||!de(e))},ue=e=>e.map(t=>{let c=t.getBoundingClientRect();return{element:t,height:c.height||t.offsetHeight||0,textLength:t.textContent?.length||0}}).filter(t=>t.height>0),W=(e,t)=>{if(t.getPlatformName()!=="linkedin")return null;let l=t.getCurrentItems().filter(s=>s.contains(e)&&ae(s)),n=ue(l).sort((s,a)=>s.height!==a.height?s.height-a.height:s.textLength-a.textLength);if(n.length>0)return n[0].element;let i=e,r=0;for(;i&&r<25;){if(ae(i))return i;i=i.parentElement,r++}return null};var _={isTrashMode:!1,currentModal:null},re=(e,t,c)=>{let l=async n=>{n.altKey&&n.key==="s"&&!n.ctrlKey&&!n.metaKey?(n.preventDefault(),he(e,t)):n.altKey&&n.key==="u"&&!n.ctrlKey&&!n.metaKey&&(n.preventDefault(),await fe(c))};return document.addEventListener("keydown",l,!0),()=>{document.removeEventListener("keydown",l,!0),Y()}},he=(e,t)=>{_.isTrashMode?Y():pe(e,t)},pe=(e,t)=>{_.isTrashMode=!0,document.body.classList.add("slop-trash-cursor");let c=async n=>{let i=n.target,r={location:"hotkeys.ts:57",message:"handleClick called",data:{targetTagName:i.tagName,targetClassName:i.className?.substring(0,50),targetId:i.id?.substring(0,30),platform:e.getPlatformName(),timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"A"}};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).catch(()=>{});let s=e.getItemSelector(),a=null;if(e.getPlatformName()==="linkedin")a=W(i,e);else if(a=i.closest(s),!a&&s.includes(",")){let o=s.split(",").map(m=>m.trim());for(let m of o)if(a=i.closest(m),a)break}if(a){n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation();let o=e.getItemId(a),m={location:"hotkeys.ts:173",message:"Item found, checking itemId",data:{itemFound:!0,itemId:o,itemTagName:a.tagName,itemClassName:a.className?.substring(0,50),itemIdAttr:a.id?.substring(0,30),targetTagName:i.tagName,timestamp:Date.now(),sessionId:"debug-session",runId:"run4",hypothesisId:"E"}};if(fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)}).catch(()=>{}),!o){let g={location:"hotkeys.ts:181",message:"No itemId found for clicked item",data:{itemTagName:a.tagName,itemClassName:a.className?.substring(0,50),targetTagName:i.tagName,timestamp:Date.now(),sessionId:"debug-session",runId:"run4",hypothesisId:"E"}};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)}).catch(()=>{});return}let h={location:"hotkeys.ts:186",message:"Creating confirmation modal",data:{itemId:o,itemTagName:a.tagName,timestamp:Date.now(),sessionId:"debug-session",runId:"run4",hypothesisId:"E"}};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)}).catch(()=>{});let f=Q({message:"Mark as SLOP?",onConfirm:async()=>{q(f),await t(o,a),Y()},onCancel:()=>{q(f),Y()}});_.currentModal=f,document.body.appendChild(f)}else{let o={location:"hotkeys.ts:201",message:"No item found for click",data:{targetTagName:i.tagName,targetClassName:i.className?.substring(0,50),targetId:i.id?.substring(0,30),platform:e.getPlatformName(),timestamp:Date.now(),sessionId:"debug-session",runId:"run4",hypothesisId:"E"}};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).catch(()=>{})}};document.addEventListener("click",c,!0);let l=()=>{document.removeEventListener("click",c,!0)};window.__slopTrashCleanup=l},Y=()=>{_.isTrashMode=!1,document.body.classList.remove("slop-trash-cursor"),_.currentModal&&(q(_.currentModal),_.currentModal=null);let e=window.__slopTrashCleanup;e&&(e(),delete window.__slopTrashCleanup)},fe=async e=>{let t=Q({message:"Mark this website as SLOP?",onConfirm:async()=>{q(t);let c=await e();c.shouldBlock&&ge(c.reportCount)},onCancel:()=>{q(t)}});_.currentModal=t,document.body.appendChild(t)},ge=e=>{let t=document.createElement("div");t.className="slop-website-block-modal";let c=document.createElement("div");c.className="slop-website-block-gradient";let l=document.createElement("div");l.className="slop-website-block-content";let n=document.createElement("div");n.className="slop-website-block-icon",n.innerHTML="\u26A0\uFE0F",n.setAttribute("aria-hidden","true");let i=document.createElement("h2");i.className="slop-website-block-title",i.textContent="Access Restricted: Community-Flagged Slop";let r=document.createElement("p");r.className="slop-website-block-message",r.textContent="Human curators have identified this entire website as a primary source of filler or low-quality content.";let s=document.createElement("div");s.className="slop-website-block-counter",s.textContent=`[${e}] Humans have flagged this domain as Slop`;let a=document.createElement("div");a.className="slop-website-block-buttons";let o=document.createElement("button");o.className="slop-website-block-button slop-website-block-return",o.textContent="Take me back to safety",o.setAttribute("aria-label","Return to previous page"),o.setAttribute("tabindex","0");let m=()=>{window.history.back(),t.remove()};o.addEventListener("click",m),o.addEventListener("keydown",u=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),m())});let h=document.createElement("button");h.className="slop-website-block-button slop-website-block-continue",h.textContent="Continue anyway",h.setAttribute("aria-label","Continue to website anyway"),h.setAttribute("tabindex","0");let f=()=>{t.remove()};h.addEventListener("click",f),h.addEventListener("keydown",u=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),f())}),a.appendChild(o),a.appendChild(h),l.appendChild(n),l.appendChild(i),l.appendChild(r),l.appendChild(s),l.appendChild(a),t.appendChild(c),t.appendChild(l),document.body.appendChild(t),document.body.style.overflow="hidden";let g=new MutationObserver(()=>{t.isConnected||(document.body.style.overflow="",g.disconnect())});g.observe(document.body,{childList:!0})};var ee=()=>{};var S={log:ee,debug:ee,warn:(...e)=>console.warn(...e),error:(...e)=>console.error(...e),info:ee};var T=new Map,te=new Set,R=null,C=!0,O=null,le=e=>{for(let t of T.values())if(t.itemId===e&&t.overlay&&t.overlay.parentNode!==null)return t;return null},ne=e=>e&&(e.message?.includes("Extension context invalidated")||e.message?.includes("message port closed")||e.message?.includes("Receiving end does not exist"))||!1,A=()=>{if(C){C=!1,T.forEach(e=>{if(e.overlay){if(e.overlay.__slopCleanup)try{e.overlay.__slopCleanup()}catch{}if(e.overlay.parentNode)try{e.overlay.parentNode.removeChild(e.overlay)}catch{}}if(e.element)try{e.element.style.opacity="",e.element.style.visibility="",e.element.style.pointerEvents=""}catch{}}),T.clear();try{document.querySelectorAll("[data-slop-trash-icon]").forEach(e=>{try{e.remove()}catch{}})}catch{}try{document.querySelectorAll("[data-slop-overlay]").forEach(e=>{try{e.__slopCleanup&&e.__slopCleanup(),e.remove()}catch{}})}catch{}}},ye=()=>{let e=window.location.href;if(R&&R.canHandleUrl(e))return R;switch(oe(e)){case"twitter":R=new G;break;case"youtube":R=new $;break;case"linkedin":R=new z;break;default:R=new K}return R},be=async(e,t)=>C?new Promise(c=>{try{if(!chrome.runtime||!chrome.runtime.sendMessage){A(),c({isSlop:!1,reportCount:0});return}chrome.runtime.sendMessage({type:"GET_SLOP_STATUS",payload:{itemId:e,platform:t}},l=>{if(!C){c({isSlop:!1,reportCount:0});return}if(chrome.runtime.lastError){if(ne(chrome.runtime.lastError))A();else{let n=chrome.runtime.lastError.message||"Unknown error";!n.includes("Extension context invalidated")&&!n.includes("message port closed")&&!n.includes("Receiving end does not exist")&&console.error("[Slop-Stop] Error checking slop status:",n)}c({isSlop:!1,reportCount:0});return}c(l||{isSlop:!1,reportCount:0})})}catch(l){let n=l instanceof Error?l.message:String(l);n.includes("Extension context invalidated")||n.includes("message port closed")||n.includes("Receiving end does not exist")?A():console.error("[Slop-Stop] Exception checking slop status:",n),c({isSlop:!1,reportCount:0})}}):{isSlop:!1,reportCount:0},Z=async(e,t,c,l)=>{if(!C)return Promise.resolve();if(!chrome.runtime||!chrome.runtime.sendMessage)return A(),Promise.resolve();let n=null;if(c&&l)try{n=l.getUserIdentifier(c)}catch(i){S.warn("[Slop-Stop] Error extracting user identifier:",i)}return new Promise((i,r)=>{try{S.log("[Slop-Stop] reportSlop: sending message",{itemId:e,platform:t,userIdentifier:n}),chrome.runtime.sendMessage({type:"REPORT_SLOP",payload:{itemId:e,platform:t,userIdentifier:n||void 0}},s=>{if(!C){i();return}if(chrome.runtime.lastError){if(ne(chrome.runtime.lastError))A(),i();else{let a=chrome.runtime.lastError.message||"Unknown error";!a.includes("Extension context invalidated")&&!a.includes("message port closed")&&!a.includes("Receiving end does not exist")&&console.error("[Slop-Stop] reportSlop: chrome.runtime.lastError",chrome.runtime.lastError),r(chrome.runtime.lastError)}return}if(!C){i();return}if(S.log("[Slop-Stop] reportSlop: received response",s),s&&s.error){console.error("[Slop-Stop] reportSlop: response contains error",s.error),r(new Error(s.error));return}if(s&&s.success===!1){console.error("[Slop-Stop] reportSlop: response.success is false",s),r(new Error(s.error||"Report failed"));return}S.log("[Slop-Stop] reportSlop: success",s),i()})}catch(s){let a=s instanceof Error?s.message:String(s);a.includes("Extension context invalidated")||a.includes("message port closed")||a.includes("Receiving end does not exist")?(A(),i()):(console.error("[Slop-Stop] reportSlop: exception",s),r(s))}})},ve=async()=>C?new Promise(e=>{try{if(!chrome.runtime||!chrome.runtime.sendMessage){A(),e({shouldBlock:!1,reportCount:0});return}chrome.runtime.sendMessage({type:"REPORT_WEBSITE",payload:{url:window.location.href}},t=>{if(!C){e({shouldBlock:!1,reportCount:0});return}if(chrome.runtime.lastError){if(ne(chrome.runtime.lastError))A();else{let c=chrome.runtime.lastError.message||"Unknown error";!c.includes("Extension context invalidated")&&!c.includes("message port closed")&&!c.includes("Receiving end does not exist")&&console.error("Error reporting website:",chrome.runtime.lastError)}e({shouldBlock:!1,reportCount:0});return}e(t||{shouldBlock:!1,reportCount:0})})}catch(t){let c=t instanceof Error?t.message:String(t);c.includes("Extension context invalidated")||c.includes("message port closed")||c.includes("Receiving end does not exist")?A():console.error("Error in reportWebsite:",c),e({shouldBlock:!1,reportCount:0})}}):{shouldBlock:!1,reportCount:0},V=async(e,t,c=!1)=>{let l={location:"content-main.ts:230",message:"processItem called",data:{forceOverlay:c,elementTagName:e.tagName,elementClassName:e.className?.substring(0,50),elementId:e.id?.substring(0,30),isConnected:e.isConnected,timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"E"}};if(fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).catch(()=>{}),!e.isConnected)return;let n=t.getItemId(e),i={location:"content-main.ts:236",message:"Got itemId",data:{itemId:n,forceOverlay:c,timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"C"}};if(fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).catch(()=>{}),!n||n.trim().length===0){S.warn("[Slop-Stop] Invalid itemId (empty or null):",{itemId:n,platform:t.getPlatformName(),elementTagName:e.tagName});return}if(t.getPlatformName()==="youtube"&&n.length<11){S.warn("[Slop-Stop] Invalid YouTube video ID (too short):",{itemId:n,length:n.length,platform:t.getPlatformName(),elementTagName:e.tagName,elementClassName:e.className?.substring(0,50)});return}if(!c){let d=le(n);if(d){d.element!==e&&e.isConnected&&(T.delete(d.element),d.element=e,T.set(e,d),t.getPlatformName()==="youtube"&&S.log("[Slop-Stop] YouTube: Updated processed item element:",{itemId:n,oldElementTagName:d.element.tagName,newElementTagName:e.tagName,hasOverlay:!!d.overlay}));return}}let r=T.get(e);if(r){if(r.overlay&&!c||r.isShowing&&!c)return;if(r.overlay&&c)r.overlay.__slopCleanup&&r.overlay.__slopCleanup(),r.overlay.parentNode&&r.overlay.parentNode.removeChild(r.overlay),T.delete(e);else if(r.isShowing)T.delete(e);else if(!c)return}let s=t.getPlatformName(),a=await be(n,s),o={location:"content-main.ts:284",message:"Slop status checked",data:{itemId:n,isSlop:a.isSlop,forceOverlay:c,reportCount:a.reportCount,willCreateOverlay:a.isSlop||c,timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"A"}};if(fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).catch(()=>{}),s==="youtube"&&S.log("[Slop-Stop] YouTube slop status check:",{itemId:n,isSlop:a.isSlop,reportCount:a.reportCount,forceOverlay:c,elementTagName:e.tagName,elementClassName:e.className?.substring(0,50)}),!a.isSlop&&!c)return;let m=c&&a.reportCount===0?1:a.reportCount,h=t.createGhostContainer(e);h.__createdAt=Date.now(),h.style.pointerEvents="auto";let f=e.querySelector("[data-slop-trash-icon]");f&&f.parentElement===e&&(h.appendChild(f),f.style.zIndex="1000000");let g=se({reportCount:m,platform:s,onShow:()=>{let d=T.get(e);if(!d||d.isShowing)return;if(!e.isConnected){d.overlay&&d.overlay.parentNode&&d.overlay.parentNode.removeChild(d.overlay),T.delete(e);return}d.isShowing=!0,h.__slopCleanup&&h.__slopCleanup(),h.parentNode&&h.parentNode.removeChild(h),e.style.removeProperty("opacity"),e.style.removeProperty("pointer-events"),e.style.removeProperty("visibility"),e.style.removeProperty("min-height");let p=h.querySelector("[data-slop-trash-icon]");p&&p.parentElement===h&&(e.appendChild(p),p.style.zIndex="999999"),Array.from(e.children).forEach(E=>{E!==h&&E.getAttribute("data-slop-overlay")!=="true"&&(E.style.removeProperty("visibility"),E.style.removeProperty("pointer-events"))}),e.querySelectorAll("img, yt-img-shadow img, yt-image img, video, ytd-thumbnail video, svg").forEach(E=>{E.style.removeProperty("visibility"),E.style.removeProperty("pointer-events")});let w=e.getAttribute("data-slop-original-overflow");w!==null&&(Array.from(T.values()).some(x=>x.overlay&&x.element===e&&x!==d)||(w===""?e.style.removeProperty("overflow"):e.style.overflow=w,e.removeAttribute("data-slop-original-overflow")));let L=window.getComputedStyle(e);e.style.position==="relative"&&L.position==="relative"&&(Array.from(T.values()).some(x=>x.overlay&&x.element===e&&x!==d)||e.style.removeProperty("position")),e.offsetHeight,d.overlay=null,e.style.pointerEvents=""},onReport:async()=>{try{await Z(n,s,e,t).catch(()=>{})}catch{}}});h.appendChild(g),h.style.display="flex",h.style.opacity="1",h.style.visibility="visible",T.set(e,{element:e,itemId:n,overlay:h,isShowing:!1}),s==="youtube"&&S.log("[Slop-Stop] YouTube overlay created:",{itemId:n,elementTagName:e.tagName,elementClassName:e.className?.substring(0,50),overlayCreated:!!h,processedItemsCount:T.size});let u={location:"content-main.ts:411",message:"Overlay created and stored",data:{itemId:n,elementTagName:e.tagName,processedItemsCount:T.size,forceOverlay:c,timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"E"}};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}).catch(()=>{})},Se=(e,t)=>{if(e.querySelector("[data-slop-trash-icon]"))return;let c=e.tagName==="MAIN"||e.id==="workspace",l={location:"content-main.ts:440",message:"addTrashIconToItem called",data:{elementTagName:e.tagName,elementClassName:e.className?.substring(0,50),elementId:e.id?.substring(0,30),elementTextLength:e.textContent?.length,elementChildrenCount:e.children.length,isMainFeed:c,platform:t.getPlatformName(),timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"F"}};if(fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).catch(()=>{}),t.getPlatformName()==="linkedin"){if(e.tagName==="MAIN"||e.id==="workspace"){let g={location:"content-main.ts:448",message:"Skipping trash icon - main feed container",data:{elementTagName:e.tagName,elementId:e.id,timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"G"}};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)}).catch(()=>{});return}let f=document.querySelector("main#workspace");if(f&&e.parentElement===f){let g=e.textContent?.length||0,u=e.querySelectorAll('button, [role="button"]').length,d=(e.children.length>=1||u>=1)&&(g>50||e.querySelector("img, video"));if(g>5e3&&u<2){let p={location:"content-main.ts:460",message:"Skipping trash icon - likely feed container",data:{elementTagName:e.tagName,elementId:e.id,textLength:g,hasSubstantialContent:d,buttons:u,isDirectChildOfMain:!0,timestamp:Date.now(),sessionId:"debug-session",runId:"run4",hypothesisId:"A"}};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}).catch(()=>{});return}if(!d&&g<50){let p={location:"content-main.ts:475",message:"Skipping trash icon - no substantial content",data:{elementTagName:e.tagName,elementId:e.id,textLength:g,childrenCount:e.children.length,buttons:u,isDirectChildOfMain:!0,timestamp:Date.now(),sessionId:"debug-session",runId:"run4",hypothesisId:"A"}};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}).catch(()=>{});return}}}let n=document.createElement("button");n.className="slop-item-trash-icon",n.setAttribute("data-slop-trash-icon","true"),n.setAttribute("aria-label","Report as slop"),n.setAttribute("tabindex","0"),n.innerHTML=`
    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M2 4h12M5 4V2a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2m-6 0v10a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1V4M6 7v6M10 7v6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
    </svg>
  `,n.style.position="absolute",n.style.padding="0.5rem",n.style.background="rgba(0, 0, 0, 0.6)",n.style.color="#ffffff",n.style.border="none",n.style.borderRadius="50%",n.style.cursor="pointer",n.style.display="flex",n.style.alignItems="center",n.style.justifyContent="center",n.style.zIndex="999999",n.style.opacity="0",n.style.transition="opacity 0.2s, background-color 0.2s",n.style.pointerEvents="auto",n.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.3)",t.getPlatformName()==="linkedin"?(n.style.top="0.5rem",n.style.right="0.5rem",n.style.opacity="1"):(n.style.bottom="0.5rem",n.style.right="0.5rem");let i=async f=>{f.preventDefault(),f.stopPropagation(),f.stopImmediatePropagation();let g={location:"content-main.ts:435",message:"Trash icon clicked",data:{elementTagName:e.tagName,elementClassName:e.className?.substring(0,50),elementId:e.id?.substring(0,30),timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"D"}};if(fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)}).catch(()=>{}),!C){S.warn("[Slop-Stop] trashIcon click: context invalidated");return}try{let u=t.getItemId(e),d={location:"content-main.ts:446",message:"Trash icon got itemId",data:{itemId:u,elementTagName:e.tagName,timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"C"}};if(fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}).catch(()=>{}),!u||u.trim().length===0){S.warn("[Slop-Stop] Invalid itemId when reporting slop (empty or null):",{itemId:u,platform:t.getPlatformName(),elementTagName:e.tagName,elementClassName:e.className?.substring(0,50)});return}if(t.getPlatformName()==="youtube"&&u.length<11){S.warn("[Slop-Stop] Invalid YouTube video ID when reporting slop (too short):",{itemId:u,length:u.length,platform:t.getPlatformName(),elementTagName:e.tagName,elementClassName:e.className?.substring(0,50)});return}if(C)try{await Z(u,t.getPlatformName(),e,t),await V(e,t,!0).catch(p=>{console.error("[Slop-Stop] trashIcon: processItem failed",p)})}catch(p){console.error("[Slop-Stop] trashIcon: reportSlop failed",p)}}catch(u){console.error("[Slop-Stop] trashIcon click: ERROR",u)}};n.addEventListener("click",i,!0),n.addEventListener("mousedown",f=>{f.preventDefault(),f.stopPropagation(),f.stopImmediatePropagation()},!0),n.style.cssText=`
    position: absolute;
    bottom: 0.5rem;
    right: 0.5rem;
    padding: 0.5rem;
    background: rgba(0, 0, 0, 0.6);
    color: #ffffff;
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 999999;
    opacity: 0;
    transition: opacity 0.2s, background-color 0.2s;
    pointer-events: auto !important;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  `;let r=window.getComputedStyle(e);r.position==="static"&&(e.style.position="relative"),r.overflow==="hidden"&&(e.hasAttribute("data-slop-original-overflow")||e.setAttribute("data-slop-original-overflow",r.overflow),e.style.overflow="visible");let s=()=>{n.style.opacity="1"},a=()=>{n.style.opacity="0"};e.addEventListener("mouseenter",s),e.addEventListener("mouseleave",a),n.addEventListener("mouseenter",s),n.addEventListener("mouseleave",a),n.addEventListener("mouseenter",()=>{n.style.backgroundColor="rgba(255, 255, 255, 0.1)"}),n.addEventListener("mouseleave",()=>{n.style.backgroundColor="rgba(0, 0, 0, 0.6)"}),e.appendChild(n);let o=window.getComputedStyle(e),m=window.getComputedStyle(n),h={location:"content-main.ts:613",message:"Trash icon added successfully",data:{elementTagName:e.tagName,elementClassName:e.className?.substring(0,50),elementId:e.id?.substring(0,30),elementTextLength:e.textContent?.length,platform:t.getPlatformName(),elementPosition:o.position,elementOverflow:o.overflow,elementZIndex:o.zIndex,trashIconPosition:m.position,trashIconOpacity:m.opacity,trashIconVisibility:m.visibility,trashIconZIndex:m.zIndex,trashIconDisplay:m.display,trashIconInDOM:n.isConnected,timestamp:Date.now(),sessionId:"debug-session",runId:"run4",hypothesisId:"C"}};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)}).catch(()=>{}),S.log("[Slop-Stop] Trash icon added to element:",{tagName:e.tagName,className:e.className?.substring(0,50),textLength:e.textContent?.length}),e.__slopTrashIcon=n};typeof window<"u"&&(window.addEventListener("unhandledrejection",e=>{let t=e.reason;t instanceof Error&&(t.message.includes("Extension context invalidated")||t.message.includes("message port closed")||t.message.includes("Receiving end does not exist")||t.message.includes("chrome-extension://invalid"))&&(e.preventDefault(),A())}),window.addEventListener("error",e=>{if(e.message&&e.message.includes("chrome-extension://invalid"))return e.preventDefault(),!1},!0));var ie=()=>{let e=ye(),t=async r=>{if(!C)return;S.log(`[Slop-Stop] handleNewItems called with ${r.length} items`);let s={location:"content-main.ts:569",message:"handleNewItems called",data:{itemsCount:r.length,items:r.slice(0,3).map(a=>({tagName:a.tagName,className:a.className?.substring(0,50),id:a.id?.substring(0,30)})),timestamp:Date.now(),sessionId:"debug-session",runId:"run3",hypothesisId:"A"}};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).catch(()=>{});for(let a=0;a<r.length;a++){let o=r[a];if(!C)break;let m=e.getItemId(o);e.getPlatformName()==="youtube"&&S.log("[Slop-Stop] YouTube item processing:",{itemIndex:a,itemId:m,itemIdLength:m?.length,tagName:o.tagName,className:o.className?.substring(0,50),elementId:o.id?.substring(0,30)});let h={location:"content-main.ts:582",message:"Processing item",data:{itemIndex:a,itemId:m,itemTagName:o.tagName,itemClassName:o.className?.substring(0,50),itemIdAttr:o.id?.substring(0,30),platform:e.getPlatformName(),timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"C"}};if(fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)}).catch(()=>{}),!m||m.trim().length===0){S.log("[Slop-Stop] Skipping item without ID:",{tagName:o.tagName,className:o.className?.substring(0,50),textLength:o.textContent?.length,platform:e.getPlatformName()});let p={location:"content-main.ts:686",message:"Skipping item - no ID",data:{itemIndex:a,itemTagName:o.tagName,itemClassName:o.className?.substring(0,50),itemIdAttr:o.id?.substring(0,30),itemTextLength:o.textContent?.length,itemChildrenCount:o.children.length,platform:e.getPlatformName(),timestamp:Date.now(),sessionId:"debug-session",runId:"run4",hypothesisId:"B"}};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}).catch(()=>{});continue}if(e.getPlatformName()==="youtube"&&m.length<11){S.warn("[Slop-Stop] Invalid YouTube video ID (too short):",{itemId:m,length:m.length,tagName:o.tagName,className:o.className?.substring(0,50),itemIndex:a});let p={location:"content-main.ts:700",message:"Skipping item - invalid YouTube ID",data:{itemId:m,itemIdLength:m.length,itemIndex:a,itemTagName:o.tagName,itemClassName:o.className?.substring(0,50),timestamp:Date.now(),sessionId:"debug-session",runId:"run4",hypothesisId:"B"}};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}).catch(()=>{});continue}if(o.querySelector("[data-slop-trash-icon]")||document.querySelector('[data-slop-overlay="true"] [data-slop-trash-icon]')){S.log("[Slop-Stop] Trash icon already exists for item:",{itemId:m,tagName:o.tagName});let p={location:"content-main.ts:722",message:"Trash icon already exists",data:{itemId:m,itemTagName:o.tagName,timestamp:Date.now(),sessionId:"debug-session",runId:"run4",hypothesisId:"A"}};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}).catch(()=>{})}else try{S.log("[Slop-Stop] Adding trash icon to item:",{itemId:m,tagName:o.tagName,className:o.className?.substring(0,50),textLength:o.textContent?.length});let p={location:"content-main.ts:699",message:"About to call addTrashIconToItem",data:{itemId:m,itemTagName:o.tagName,itemClassName:o.className?.substring(0,50),itemIdAttr:o.id?.substring(0,30),itemTextLength:o.textContent?.length,itemChildrenCount:o.children.length,isConnected:o.isConnected,timestamp:Date.now(),sessionId:"debug-session",runId:"run4",hypothesisId:"A"}};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}).catch(()=>{}),Se(o,e);let b=o.querySelector("[data-slop-trash-icon]"),I={location:"content-main.ts:710",message:"After addTrashIconToItem call",data:{itemId:m,trashIconFound:!!b,trashIconInDOM:!!document.querySelector(`[data-slop-trash-icon][data-item-id="${m}"]`),itemTagName:o.tagName,timestamp:Date.now(),sessionId:"debug-session",runId:"run4",hypothesisId:"C"}};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)}).catch(()=>{})}catch(p){console.error("[Slop-Stop] Error adding trash icon:",p);let b={location:"content-main.ts:714",message:"Error adding trash icon",data:{itemId:m,errorMessage:p instanceof Error?p.message:String(p),itemTagName:o.tagName,timestamp:Date.now(),sessionId:"debug-session",runId:"run4",hypothesisId:"A"}};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}).catch(()=>{})}let g=T.get(o),u=te.has(o),d=le(m)!==null;if(!(u||d)&&(!g||!g.overlay&&!g.isShowing)){let p=!!g,b=g?!!g.overlay:!1,I=g?!!g.isShowing:!1,w={location:"content-main.ts:615",message:"About to processItem",data:{itemId:m,hasExistingItem:p,hasOverlay:b,isShowing:I,timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"A"}};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)}).catch(()=>{}),te.add(o);try{await V(o,e).catch(L=>{})}catch(L){if(L instanceof Error&&L.message.includes("Extension context invalidated")){A();break}}finally{te.delete(o)}}}},c=e.observeItems(t),l=new MutationObserver(r=>{if(!C)return;let s=[];T.forEach((a,o)=>{o.isConnected?a.overlay&&!a.overlay.parentNode?(a.overlay.__slopCleanup&&a.overlay.__slopCleanup(),a.isShowing=!0,a.overlay=null):a.overlay&&a.overlay.parentNode!==o&&!a.isShowing&&(a.overlay.__slopCleanup&&a.overlay.__slopCleanup(),a.overlay.parentNode&&a.overlay.parentNode.removeChild(a.overlay),s.push(o)):(a.overlay&&(a.overlay.__slopCleanup&&a.overlay.__slopCleanup(),a.overlay.parentNode&&a.overlay.parentNode.removeChild(a.overlay)),o.style&&(o.style.removeProperty("opacity"),o.style.removeProperty("visibility"),o.style.removeProperty("pointer-events"),o.style.removeProperty("position")),s.push(o))}),s.forEach(a=>{T.delete(a)}),document.querySelectorAll("[data-slop-overlay]").forEach(a=>{if(!Array.from(T.values()).some(m=>m.overlay===a)&&a.parentNode){let m=a.__createdAt||0;Date.now()-m>2e3&&a.parentNode.removeChild(a)}})});l.observe(document.body,{childList:!0,subtree:!0});let n=re(e,async(r,s)=>{let a={location:"content-main.ts:714",message:"onReportSlop called from hotkeys",data:{itemId:r,elementTagName:s.tagName,elementClassName:s.className?.substring(0,50),elementIdAttr:s.id?.substring(0,30),isConnected:s.isConnected,timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"D"}};if(fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).catch(()=>{}),!!C)try{try{await Z(r,e.getPlatformName(),s,e)}catch{}C&&s&&s.isConnected&&await V(s,e,!0).catch(()=>{})}catch{}},ve),i=r=>{if(!C)return;let s=r.target,a=null;if(e.getPlatformName()==="linkedin")a=W(s,e);else{let o=e.getItemSelector();a=s.closest(o)}a?O=a:O=null};document.addEventListener("contextmenu",i,!0),window.addEventListener("beforeunload",()=>{c(),l.disconnect(),n(),document.removeEventListener("contextmenu",i,!0)}),chrome.runtime.onMessage.addListener((r,s,a)=>{if(r.type==="KEYBOARD_COMMAND"){let o=r.command;if(o==="toggle-trash-mode"){let m=new KeyboardEvent("keydown",{key:"s",altKey:!0,ctrlKey:!1,metaKey:!1,bubbles:!0,cancelable:!0});document.dispatchEvent(m)}else if(o==="report-website"){let m=new KeyboardEvent("keydown",{key:"u",altKey:!0,ctrlKey:!1,metaKey:!1,bubbles:!0,cancelable:!0});document.dispatchEvent(m)}return a({success:!0}),!0}else if(r.type==="CONTEXT_MENU_REPORT_SLOP")return O&&C&&(async()=>{try{let m=e.getItemId(O);m&&C&&(await Z(m,e.getPlatformName(),O,e),C&&O&&O.isConnected&&await V(O,e,!0).catch(()=>{}))}catch{}finally{O=null}})(),a({success:!0}),!0;return!1})};try{let e=window.self!==window.top,t=window.location.href==="about:blank"||window.location.href==="about:srcdoc";e||t?S.log("[Slop-Stop] Content script skipped: running in iframe or sandboxed frame",{isInIframe:e,isAboutBlank:t,location:window.location.href}):document.readyState==="loading"?document.addEventListener("DOMContentLoaded",ie):ie()}catch(e){S.warn("[Slop-Stop] Error checking frame context, skipping initialization:",e)}})();
//# sourceMappingURL=content-main.js.map
