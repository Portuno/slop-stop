"use strict";var StopSlopContent=(()=>{var P=class{observeItems(e){let c=0,a=0,n=20,l=new WeakSet,i=null,d=300,s=()=>{let h=this.getCurrentItems(),f=h.filter(r=>!l.has(r)),g=h.length!==c;h.length>0&&(f.length>0||a===0)&&(i!==null&&clearTimeout(i),i=window.setTimeout(()=>{h.forEach(r=>l.add(r)),c=h.length;try{e(h)}catch(r){console.error("[Slop-Stop] Error in callback:",r)}i=null},d)),this.getPlatformName()==="linkedin"&&a<n&&(a++,setTimeout(s,500))},o=new MutationObserver(()=>{s()});o.observe(document.body,{childList:!0,subtree:!0});let m=this.getCurrentItems();return m.length>0?(m.forEach(h=>l.add(h)),c=m.length,e(m)):this.getPlatformName()==="linkedin"&&setTimeout(s,1e3),()=>o.disconnect()}getCurrentItems(){let e=this.getItemSelector();return Array.from(document.querySelectorAll(e))}createGhostContainer(e){let c=e.cloneNode(!0);c.style.visibility="hidden",c.style.pointerEvents="none";let a=document.createElement("div");a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.width="100%",a.style.height="100%",a.style.zIndex="9999",a.setAttribute("data-slop-overlay","true");let n=e.getBoundingClientRect();a.style.width=`${n.width}px`,a.style.height=`${n.height}px`;let l=document.createElement("div");return l.style.position="relative",l.style.width=`${n.width}px`,l.style.height=`${n.height}px`,l.appendChild(c),l.appendChild(a),l}};var w={twitter:["twitter.com","x.com"],youtube:["youtube.com"],linkedin:["linkedin.com"],website:[]};var U=class extends P{getPlatformName(){return"twitter"}canHandleUrl(e){let c=new URL(e).hostname.toLowerCase();return w.twitter.some(a=>c.includes(a))}getItemSelector(){return'article[data-testid="tweet"]'}getItemId(e){let c=e.getAttribute("data-tweet-id");if(c)return c;let a=e.querySelector('a[href*="/status/"]');if(a){let l=a.href.match(/\/status\/(\d+)/);if(l)return l[1]}let n=e.getAttribute("aria-labelledby");return n||null}createGhostContainer(e){let c=window.getComputedStyle(e);c.position==="static"&&(e.style.position="relative"),e.style.visibility="visible",e.style.opacity="1";let a=e.offsetHeight||e.getBoundingClientRect().height;a>0&&(e.style.minHeight=`${a}px`),Array.from(e.children).forEach(d=>{d.getAttribute("data-slop-overlay")!=="true"&&(d.style.visibility="hidden",d.style.pointerEvents="none")}),e.querySelectorAll("img, video, svg").forEach(d=>{d.style.visibility="hidden",d.style.pointerEvents="none"}),e.style.pointerEvents="none";let i=document.createElement("div");return i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.right="0",i.style.bottom="0",i.style.width="100%",i.style.height="100%",a>0&&(i.style.minHeight=`${a}px`),i.style.borderRadius=c.borderRadius||"16px",i.style.zIndex="999999",i.style.opacity="1",i.style.visibility="visible",i.style.display="flex",i.style.pointerEvents="auto",i.style.overflow="hidden",i.setAttribute("data-slop-overlay","true"),e.appendChild(i),i}};var $=class extends P{getPlatformName(){return"youtube"}canHandleUrl(e){let c=new URL(e).hostname.toLowerCase();return w.youtube.some(a=>c.includes(a))}getItemSelector(){return"ytd-rich-item-renderer, ytd-video-renderer"}getItemId(e){let c=e.getAttribute("data-video-id");if(c&&c.length>=11)return c;let a=e.querySelectorAll("ytd-thumbnail, yt-img-shadow");for(let s of Array.from(a)){let o=s.querySelector('a[href*="/watch"], a[href*="/shorts/"]');if(o){let m=o.href;if(m.includes("/watch"))try{let f=new URL(m).searchParams.get("v");if(f&&f.length>=11)return f}catch{let f=m.match(/[?&]v=([^&]+)/);if(f&&f[1]&&f[1].length>=11)return f[1]}if(m.includes("/shorts/")){let h=m.match(/\/shorts\/([^/?&]+)/);if(h&&h[1]&&h[1].length>=11)return h[1]}}}let n=e.querySelectorAll('a[href*="/watch"], a[href*="/shorts/"]'),l=new Set;for(let s of Array.from(n)){let o=s.href;if(o.includes("/channel/")||o.includes("/user/")||o.includes("/c/")||o.includes("/@"))continue;let m=null;if(o.includes("/watch"))try{let f=new URL(o).searchParams.get("v");f&&f.length>=11&&(m=f)}catch{let f=o.match(/[?&]v=([^&]+)/);f&&f[1]&&f[1].length>=11&&(m=f[1])}else if(o.includes("/shorts/")){let h=o.match(/\/shorts\/([^/?&]+)/);h&&h[1]&&h[1].length>=11&&(m=h[1])}m&&l.add(m)}if(l.size===1)return Array.from(l)[0];if(l.size>1){let s=e.querySelector('a#video-title, a[href*="/watch"]:not([href*="/channel"]):not([href*="/user"]):not([href*="/c/"]):not([href*="/@"])');if(s){let o=s.href;if(o.includes("/watch"))try{let h=new URL(o).searchParams.get("v");if(h&&h.length>=11&&l.has(h))return h}catch{let h=o.match(/[?&]v=([^&]+)/);if(h&&h[1]&&h[1].length>=11&&l.has(h[1]))return h[1]}}return Array.from(l)[0]}let i=e.parentElement,d=0;for(;i&&d<3;){let s=i.getAttribute("data-video-id");if(s&&s.length>=11)return s;let o=i.querySelectorAll("ytd-thumbnail, yt-img-shadow");for(let m of Array.from(o)){let h=m.querySelector('a[href*="/watch"], a[href*="/shorts/"]');if(h){let f=h.href;if(f.includes("/watch"))try{let u=new URL(f).searchParams.get("v");if(u&&u.length>=11)return u}catch{let u=f.match(/[?&]v=([^&]+)/);if(u&&u[1]&&u[1].length>=11)return u[1]}if(f.includes("/shorts/")){let g=f.match(/\/shorts\/([^/?&]+)/);if(g&&g[1]&&g[1].length>=11)return g[1]}}}i=i.parentElement,d++}return null}createGhostContainer(e){window.getComputedStyle(e).position==="static"&&(e.style.position="relative"),e.style.visibility="visible",e.style.opacity="1";let a=e.offsetHeight||e.getBoundingClientRect().height;a>0&&(e.style.minHeight=`${a}px`);let n=this.getItemId(e);Array.from(e.children).forEach(m=>{m.getAttribute("data-slop-overlay")!=="true"&&(m.style.visibility="hidden",m.style.pointerEvents="none")}),e.querySelectorAll("img, yt-img-shadow img, yt-image img").forEach(m=>{m.style.visibility="hidden",m.style.pointerEvents="none"}),e.querySelectorAll("video, ytd-thumbnail video").forEach(m=>{m.style.visibility="hidden",m.style.pointerEvents="none"}),e.querySelectorAll('[style*="background-image"]').forEach(m=>{let h=m;h.style.backgroundImage="none"}),e.style.pointerEvents="none";let o=document.createElement("div");return o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.right="0",o.style.bottom="0",o.style.width="100%",o.style.height="100%",a>0&&(o.style.minHeight=`${a}px`),o.style.zIndex="99999",o.style.opacity="1",o.style.display="flex",o.style.visibility="visible",o.style.pointerEvents="auto",o.style.overflow="hidden",o.setAttribute("data-slop-overlay","true"),o.setAttribute("data-video-id",n||""),e.appendChild(o),o}};var G=class extends P{getPlatformName(){return"linkedin"}canHandleUrl(e){let c=new URL(e).hostname.toLowerCase();return w.linkedin.some(a=>c.includes(a))}getItemSelector(){return'[role="article"], [role="region"][aria-label*="Post"], [role="region"][aria-label*="post"], div[data-test-id*="activity"], div[data-test-id*="feed"], section[class*="update"], section[class*="post"]'}getCurrentItems(){let e=null;e=document.querySelector("main#workspace"),e||(e=Array.from(document.querySelectorAll("main")).find(p=>p.id==="workspace")||null),e||(e=document.querySelector("main")),e||(e=document.body,console.warn("[Slop-Stop] main#workspace not found, using document.body as fallback"));let c={location:"linkedin-adapter.ts:26",message:"Main feed container search",data:{mainFeedFound:!!e,mainFeedTag:e?.tagName,mainFeedId:e?.id,mainFeedClassName:e?.className?.substring(0,100),allMainsCount:document.querySelectorAll("main").length,bodyChildrenCount:document.body.children.length,url:window.location.href},timestamp:Date.now(),sessionId:"debug-session",runId:"run4",hypothesisId:"D"};if(fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).catch(()=>{}),!e)return console.warn("[Slop-Stop] Could not find main feed container"),[];let a=null,n=[".scaffold-finite-scroll__content",'[class*="scaffold-finite-scroll"]','div[class*="scroll"]'];for(let r of n){let p=e.querySelector(r);if(p){a=p,console.log(`[Slop-Stop] Found scroll container using selector: ${r}`);break}}if(!a){let r=Array.from(e.querySelectorAll("div"));for(let p of r){let b=p.className||"",S=p.getAttribute("style")||"";if((b.includes("scroll")||b.includes("feed")||S.includes("overflow")&&S.includes("auto"))&&p.children.length>5){a=p,console.log(`[Slop-Stop] Found scroll container by deep search: ${b.substring(0,50)}`);break}}}a||(a=e,console.log("[Slop-Stop] Using main#workspace as scroll container"));let l=[],i=new Set,d=Array.from(a.querySelectorAll("div, section, article"));console.log(`[Slop-Stop] Found ${d.length} candidate elements in scroll container`);let s=d.map(r=>({element:r,size:(r.textContent?.length||0)+r.children.length*100+r.querySelectorAll('button, [role="button"]').length*50})).sort((r,p)=>p.size-r.size).map(r=>r.element),o={location:"linkedin-adapter.ts:50",message:"Starting structure-based detection",data:{candidateElementsCount:d.length,sortedCandidatesCount:s.length,scrollContainerFound:!!a,scrollContainerTag:a?.tagName},timestamp:Date.now(),sessionId:"debug-session",runId:"run4",hypothesisId:"D"};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).catch(()=>{});for(let r of s){if(i.has(r)||r===a||r===e||r.tagName==="MAIN")continue;let p=!1;for(let v of l)if(v.contains(r)){p=!0;break}if(p){i.add(r);continue}let b=r.textContent?.length||0,S=r.querySelectorAll('button, [role="button"]'),E=S.length,N=r.querySelectorAll("img"),C=N.length,x=r.children.length,R=Array.from(S).some(v=>{let y=(v.textContent||"").toLowerCase();return y.includes("like")||y.includes("comentar")||y.includes("comment")||y.includes("share")||y.includes("compartir")||y.includes("recomendar")}),B=Array.from(N).some(v=>{let y=(v.getAttribute("alt")||"").toLowerCase();return y.includes("profile")||y.includes("avatar")||y.includes("member")}),X=r.getBoundingClientRect(),j=X.height>=150,A=!1,k=r.parentElement,M=0;for(;k&&M<5;){if(k===a){A=M<=2;break}k=k.parentElement,M++}if(b>=50&&b<=5e3&&(R||B)&&(x>=2||C>0)&&(j||A)&&A&&(r.tagName==="DIV"||r.tagName==="SECTION"||r.tagName==="ARTICLE")){let v=[];for(let L of l)r.contains(L)&&v.push(L);for(let L of v){let q=l.indexOf(L);q!==-1&&(l.splice(q,1),i.delete(L))}i.add(r);let y=r.querySelectorAll("div, section, article");y.forEach(L=>i.add(L)),l.push(r),console.log("[Slop-Stop] Found post by structure:",{tagName:r.tagName,className:r.className?.substring(0,100),textLength:b,buttonsCount:E,imagesCount:C,hasEngagementButtons:R,hasProfileImage:B,descendantsMarked:y.length});let J={location:"linkedin-adapter.ts:110",message:"Found post by structure",data:{tagName:r.tagName,className:r.className?.substring(0,100),textLength:b,buttonsCount:E,imagesCount:C,hasEngagementButtons:R,hasProfileImage:B,hasMinimumHeight:j,isTopLevel:A,depth:M,height:X.height,descendantsMarked:y.length,nestedPostsRemoved:v.length},timestamp:Date.now(),sessionId:"debug-session",runId:"run5",hypothesisId:"D"};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(J)}).catch(()=>{})}}if(l.length>0){console.log(`[Slop-Stop] Found ${l.length} posts using structure-based detection`);let r={location:"linkedin-adapter.ts:125",message:"getCurrentItems returning (structure-based)",data:{itemsCount:l.length,items:l.slice(0,5).map(p=>({tagName:p.tagName,className:p.className?.substring(0,50),id:p.id?.substring(0,30),textLength:p.textContent?.length,buttonsCount:p.querySelectorAll('button, [role="button"]').length,imagesCount:p.querySelectorAll("img").length,childrenCount:p.children.length}))},timestamp:Date.now(),sessionId:"debug-session",runId:"run4",hypothesisId:"D"};return fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).catch(()=>{}),l}console.log("[Slop-Stop] No posts found with structure-based detection, using aggressive fallback...");let m={location:"linkedin-adapter.ts:135",message:"Starting aggressive fallback",data:{timestamp:Date.now()},sessionId:"debug-session",runId:"run3",hypothesisId:"P"};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)}).catch(()=>{});let h=Array.from(e.querySelectorAll("*")).slice(0,1e3),f=[];h.forEach(r=>{let p=r;if(p.tagName==="MAIN"||p.id==="workspace")return;let S=(p.textContent||"").length,E=p.querySelectorAll('button, [role="button"]'),N=E.length,C=p.querySelectorAll("img"),x=C.length,R=Array.from(E).some(v=>{let y=(v.textContent||"").toLowerCase();return y.includes("like")||y.includes("comentar")||y.includes("comment")||y.includes("share")||y.includes("compartir")||y.includes("recomendar")||y.includes("follow")||y.includes("connect")}),B=Array.from(C).some(v=>{let y=(v.getAttribute("alt")||"").toLowerCase();return y.includes("profile")||y.includes("avatar")||y.includes("member")}),j=p.getBoundingClientRect().height>=150,A=!1,k=p.parentElement,M=0;for(;k&&M<5;){if(k===e||k===a){A=M<=2;break}k=k.parentElement,M++}if(S>=50&&S<=5e3&&(R||B)&&(p.children.length>=2||x>0)&&(j||A)&&A&&(p.tagName==="DIV"||p.tagName==="SECTION"||p.tagName==="ARTICLE")){let v=p,y=p.parentElement,J=0;for(;y&&J<5&&y!==e;){let q=(y.textContent||"").length;if(y.querySelectorAll('button, [role="button"]').length>=2&&q>=50&&q<=3e3)v=y;else if(q>3e3)break;y=y.parentElement,J++}if(v.tagName==="MAIN"||v.id==="workspace")return;let L=v.textContent?.length||0;if(L<50||L>3e3)return;f.push({element:v,reason:R?"hasEngagementButtons":B?"hasProfileImage":"isSubstantialContainer",data:{tagName:v.tagName,className:v.className?.substring(0,150)||"",textLength:L,buttonsCount:v.querySelectorAll('button, [role="button"]').length,imagesCount:v.querySelectorAll("img").length}})}});let g=Array.from(new Map(f.map(r=>[r.element,r])).values());console.log(`[Slop-Stop] Found ${g.length} potential posts by aggressive fallback`),g.forEach(({element:r})=>{i.has(r)||(i.add(r),l.push(r))}),console.log(`[Slop-Stop] Total unique LinkedIn items found: ${l.length}`);let u={location:"linkedin-adapter.ts:200",message:"getCurrentItems returning (aggressive fallback)",data:{itemsCount:l.length,items:l.slice(0,5).map(r=>({tagName:r.tagName,className:r.className?.substring(0,50),id:r.id?.substring(0,30),textLength:r.textContent?.length,buttonsCount:r.querySelectorAll('button, [role="button"]').length,imagesCount:r.querySelectorAll("img").length,childrenCount:r.children.length}))},timestamp:Date.now(),sessionId:"debug-session",runId:"run4",hypothesisId:"D"};return fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}).catch(()=>{}),l}getItemId(e){let c=e.querySelectorAll('a[href*="/feed/update"], a[href*="activity"], a[href*="/posts/"]');for(let u of Array.from(c)){let r=u.href,p=r.match(/\/feed\/update\/urn:li:activity:(\d+)/);if(p){let b={location:"linkedin-adapter.ts:517",message:"Found post ID from link URL",data:{activityId:p[1],href:r.substring(0,100),method:"feed/update/urn",timestamp:Date.now(),sessionId:"debug-session",runId:"run7",hypothesisId:"E"}};return fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}).catch(()=>{}),p[1]}if(p=r.match(/\/posts\/([^/?]+)/)||r.match(/[?&]activity=([^&]+)/)||r.match(/activity[=:](\d+)/),p){let b={location:"linkedin-adapter.ts:525",message:"Found post ID from link URL (pattern 2)",data:{activityId:p[1],href:r.substring(0,100),method:"posts/activity",timestamp:Date.now(),sessionId:"debug-session",runId:"run7",hypothesisId:"E"}};return fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}).catch(()=>{}),p[1]}}let a=e.getAttribute("data-id");if(a?.startsWith("urn:li:activity:")){let u=a.match(/urn:li:activity:(\d+)/);if(u){let r={location:"linkedin-adapter.ts:533",message:"Found post ID from data-id attribute",data:{activityId:u[1],method:"data-id",timestamp:Date.now(),sessionId:"debug-session",runId:"run7",hypothesisId:"E"}};return fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).catch(()=>{}),u[1]}return a}let n=e.getAttribute("data-urn");if(!n&&!a){let u=e.parentElement,r=0;for(;u&&r<10;){let p=u.querySelectorAll('a[href*="/feed/update"], a[href*="activity"], a[href*="/posts/"]');for(let b of Array.from(p)){let S=b.href,E=S.match(/\/feed\/update\/urn:li:activity:(\d+)/)||S.match(/\/posts\/([^/?]+)/)||S.match(/[?&]activity=([^&]+)/)||S.match(/activity[=:](\d+)/);if(E){let N={location:"linkedin-adapter.ts:548",message:"Found post ID from parent link",data:{activityId:E[1],depth:r,href:S.substring(0,100),timestamp:Date.now(),sessionId:"debug-session",runId:"run7",hypothesisId:"E"}};return fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)}).catch(()=>{}),E[1]}}if(a=u.getAttribute("data-id"),a?.startsWith("urn:li:activity:")){let b=a.match(/urn:li:activity:(\d+)/);return b?b[1]:a}if(n=u.getAttribute("data-urn"),n?.startsWith("urn:li:activity:"))break;u=u.parentElement,r++}}if(n?.startsWith("urn:li:activity:")){let u=n.match(/urn:li:activity:(\d+)/);if(u){let r={location:"linkedin-adapter.ts:567",message:"Found post ID from data-urn attribute",data:{activityId:u[1],method:"data-urn",timestamp:Date.now(),sessionId:"debug-session",runId:"run7",hypothesisId:"E"}};return fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).catch(()=>{}),u[1]}return n}let l=e.getAttribute("data-activity-id");if(!l){let u=e.parentElement,r=0;for(;u&&r<10&&(l=u.getAttribute("data-activity-id"),!l);)u=u.parentElement,r++}if(l){let u={location:"linkedin-adapter.ts:586",message:"Found post ID from data-activity-id attribute",data:{activityId:l,method:"data-activity-id",timestamp:Date.now(),sessionId:"debug-session",runId:"run7",hypothesisId:"E"}};return fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}).catch(()=>{}),l}let i={location:"linkedin-adapter.ts:595",message:"Using fallback hash-based ID (no unique link found)",data:{elementTagName:e.tagName,hasLinks:c.length>0,timestamp:Date.now(),sessionId:"debug-session",runId:"run7",hypothesisId:"E"}};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).catch(()=>{});let d=e.textContent?.substring(0,300)||"",s=Array.from(e.parentElement?.children||[]).indexOf(e),o=e.className||"",m=e.id||"",h=[];Array.from(e.attributes).forEach(u=>{u.name.startsWith("data-")&&u.value&&h.push(`${u.name}=${u.value.substring(0,50)}`)});let f=`${d}-${o}-${m}-${s}-${h.join("-")}`,g=0;for(let u=0;u<f.length;u++){let r=f.charCodeAt(u);g=(g<<5)-g+r,g=g&g}return`linkedin-${s}-${Math.abs(g)}`}createGhostContainer(e){let c=window.getComputedStyle(e);c.position==="static"&&(e.style.position="relative"),e.style.visibility="visible",e.style.opacity="1";let a=c.overflow;a!=="hidden"&&(e.style.overflow="hidden",e.hasAttribute("data-slop-original-overflow")||e.setAttribute("data-slop-original-overflow",a));let n=e.offsetHeight||e.getBoundingClientRect().height;this.getPlatformName()!=="linkedin"&&n>0?e.style.minHeight=`${n}px`:e.style.minHeight="0px",e.style.maxHeight="250px",Array.from(e.children).forEach(o=>{o.getAttribute("data-slop-overlay")!=="true"&&(o.style.visibility="hidden",o.style.pointerEvents="none")}),e.querySelectorAll("img, video, svg").forEach(o=>{o.style.visibility="hidden",o.style.pointerEvents="none"}),e.style.pointerEvents="none";let d=document.createElement("div");if(d.style.position="absolute",d.style.top="0",d.style.left="0",d.style.right="0",d.style.bottom="0",d.style.width="100%",d.style.height="100%",n>0){let o=Math.min(n,250);d.style.minHeight=`${o}px`,d.style.maxHeight="250px"}else d.style.maxHeight="250px";d.style.zIndex="9999",d.style.opacity="1",d.style.visibility="visible",d.style.display="flex",d.style.pointerEvents="auto",d.style.overflow="hidden",d.setAttribute("data-slop-overlay","true");let s={location:"linkedin-adapter.ts:650",message:"Creating overlay",data:{originalElementTag:e.tagName,originalHeight:n,overlayPosition:"absolute",overlayZIndex:"9999",hasOverflowHidden:c.overflow==="hidden",timestamp:Date.now(),sessionId:"debug-session",runId:"run7",hypothesisId:"A"}};return fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).catch(()=>{}),e.appendChild(d),d}};var K=class extends P{getPlatformName(){return"website"}canHandleUrl(e){let c=new URL(e).hostname.toLowerCase();return![...w.twitter,...w.youtube,...w.linkedin].some(n=>c.includes(n))}getItemSelector(){return"body"}getItemId(e){return window.location.href}createGhostContainer(e){let c=document.createElement("div");return c.style.position="fixed",c.style.top="0",c.style.left="0",c.style.width="100%",c.style.height="100%",c.style.zIndex="99999",c.setAttribute("data-slop-overlay","true"),document.body.appendChild(c),c}};var et=t=>{let e=new URL(t).hostname.toLowerCase();for(let[c,a]of Object.entries(w))if(a.some(n=>e.includes(n)))return c;return"website"};var nt=t=>{let e=document.createElement("div");e.className=`slop-curtain${t.platform?` slop-curtain--${t.platform}`:""}`,e.setAttribute("data-slop-curtain","true"),t.platform==="website"&&(document.body.dataset.slopCurtainScrollLocked="true",document.body.style.overflow="hidden");let c=()=>{e.style.transition="opacity 0.3s ease-out",e.style.opacity="0",setTimeout(()=>{t.onShow(),document.body.dataset.slopCurtainScrollLocked&&(document.body.style.overflow="",delete document.body.dataset.slopCurtainScrollLocked)},300)},a=document.createElement("div");if(a.className="slop-curtain-content",t.platform==="website"){let n=document.createElement("div");n.className="slop-curtain-gradient",e.appendChild(n),a.classList.add("slop-curtain-content--website");let l=document.createElement("div");l.className="slop-curtain-icon",l.innerHTML="\u26A0\uFE0F",l.setAttribute("aria-hidden","true");let i=document.createElement("h2");i.className="slop-curtain-headline",i.textContent="Access Restricted: Community-Flagged Slop";let d=document.createElement("p");d.className="slop-curtain-subtext",d.textContent="Human curators have identified this entire website as a primary source of AI-generated filler or low-quality content.";let s=document.createElement("div");s.className="slop-curtain-counter",s.textContent=`[${t.reportCount}] Humans have flagged this domain as Slop`;let o=document.createElement("div");o.className="slop-curtain-buttons";let m=document.createElement("button");m.className="slop-curtain-button slop-curtain-button--primary",m.textContent="Take me back to safety",m.setAttribute("aria-label","Return to previous page"),m.setAttribute("tabindex","0");let h=()=>{window.history.back(),document.body.dataset.slopCurtainScrollLocked&&(document.body.style.overflow="",delete document.body.dataset.slopCurtainScrollLocked),e.remove()};m.addEventListener("click",h),m.addEventListener("keydown",u=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),h())});let f=document.createElement("button");f.className="slop-curtain-button slop-curtain-button--secondary",f.textContent="Continue anyway",f.setAttribute("aria-label","Continue to website anyway"),f.setAttribute("tabindex","0");let g=()=>{c()};f.addEventListener("click",g),f.addEventListener("keydown",u=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),g())}),o.appendChild(m),o.appendChild(f),a.appendChild(l),a.appendChild(i),a.appendChild(d),a.appendChild(s),a.appendChild(o)}else{let n=document.createElement("h2");n.className="slop-curtain-headline",n.textContent="Slop content flagged by the community";let l=document.createElement("p");l.className="slop-curtain-subtext",l.textContent="This content was identified as AI-generated filler or low-quality slop by Human Resistance curators.";let i=document.createElement("div");i.className="slop-curtain-counter",i.textContent=`[${t.reportCount}] Community Reports`,a.appendChild(n),a.appendChild(l),a.appendChild(i)}if(t.platform!=="website"){let n=document.createElement("button");n.className="slop-curtain-show-button",n.textContent="Show",n.setAttribute("aria-label","Show slop content"),n.setAttribute("tabindex","0"),n.style.pointerEvents="auto",n.style.zIndex="10001",n.addEventListener("click",l=>{l.preventDefault(),l.stopPropagation(),l.stopImmediatePropagation(),c()}),n.addEventListener("keydown",l=>{(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),l.stopPropagation(),c())}),e.appendChild(n)}return e.appendChild(a),e};var Z=t=>{let e=document.createElement("div");e.className="slop-confirmation-overlay",e.setAttribute("data-slop-modal","true"),e.setAttribute("role","dialog"),e.setAttribute("aria-modal","true");let c=document.createElement("div");c.className="slop-confirmation-modal";let a=document.createElement("div");a.className="slop-confirmation-icon",a.innerHTML=`
    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
      <path d="M4 7h16M9 7V5a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2m-7 0v10a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2V7M10 11v6M14 11v6" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  `;let n=document.createElement("h2");n.className="slop-confirmation-title",n.textContent=t.message;let l=document.createElement("div");l.className="slop-confirmation-buttons";let i=document.createElement("button");i.className="slop-confirmation-cancel",i.textContent=t.cancelText||"Cancel",i.setAttribute("aria-label","Cancel"),i.setAttribute("tabindex","0"),i.addEventListener("click",t.onCancel),i.addEventListener("keydown",o=>{o.key==="Escape"&&(o.preventDefault(),t.onCancel())});let d=document.createElement("button");d.className="slop-confirmation-confirm",d.textContent=t.confirmText||"Confirm",d.setAttribute("aria-label","Confirm"),d.setAttribute("tabindex","0"),d.addEventListener("click",t.onConfirm),d.addEventListener("keydown",o=>{o.key==="Enter"&&(o.preventDefault(),t.onConfirm())}),l.appendChild(i),l.appendChild(d),c.appendChild(n),c.appendChild(l),e.appendChild(c);let s=o=>{o.key==="Escape"?t.onCancel():o.key==="Enter"&&o.target===e&&t.onConfirm()};return e.addEventListener("keydown",s),e.addEventListener("click",o=>{o.target===e&&t.onCancel()}),setTimeout(()=>{d.focus()},0),e},F=t=>{t.remove()};var lt=t=>{let e=t.querySelectorAll('button, [role="button"]'),c=t.querySelectorAll("img"),a=Array.from(e).some(l=>{let i=(l.textContent||"").toLowerCase();return i.includes("like")||i.includes("recomendar")||i.includes("comment")||i.includes("comentar")||i.includes("share")||i.includes("compartir")}),n=Array.from(c).some(l=>{let i=(l.getAttribute("alt")||"").toLowerCase();return i.includes("profile")||i.includes("avatar")||i.includes("member")});return a||n},ct=t=>t.tagName==="MAIN"||t.id==="workspace"||(t.textContent?.length||0)>9e3||t.getBoundingClientRect().height>2600,ot=t=>{if(ct(t))return!1;let e=t.textContent?.length||0;return!(e<50||e>8e3||t.getBoundingClientRect().height<120||!lt(t))},dt=t=>t.map(e=>{let c=e.getBoundingClientRect();return{element:e,height:c.height||e.offsetHeight||0,textLength:e.textContent?.length||0}}).filter(e=>e.height>0),z=(t,e)=>{if(e.getPlatformName()!=="linkedin")return null;let a=e.getCurrentItems().filter(d=>d.contains(t)&&ot(d)),n=dt(a).sort((d,s)=>d.height!==s.height?d.height-s.height:d.textLength-s.textLength);if(n.length>0)return n[0].element;let l=t,i=0;for(;l&&i<25;){if(ot(l))return l;l=l.parentElement,i++}return null};var O={isTrashMode:!1,currentModal:null},st=(t,e,c)=>{let a=async n=>{n.altKey&&n.key==="s"&&!n.ctrlKey&&!n.metaKey?(n.preventDefault(),mt(t,e)):n.altKey&&n.key==="u"&&!n.ctrlKey&&!n.metaKey&&(n.preventDefault(),await ht(c))};return document.addEventListener("keydown",a,!0),()=>{document.removeEventListener("keydown",a,!0),W()}},mt=(t,e)=>{O.isTrashMode?W():ut(t,e)},ut=(t,e)=>{O.isTrashMode=!0,document.body.classList.add("slop-trash-cursor");let c=async n=>{let l=n.target,i={location:"hotkeys.ts:57",message:"handleClick called",data:{targetTagName:l.tagName,targetClassName:l.className?.substring(0,50),targetId:l.id?.substring(0,30),platform:t.getPlatformName(),timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"A"}};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).catch(()=>{});let d=t.getItemSelector(),s=null;if(t.getPlatformName()==="linkedin")s=z(l,t);else if(s=l.closest(d),!s&&d.includes(",")){let o=d.split(",").map(m=>m.trim());for(let m of o)if(s=l.closest(m),s)break}if(s){n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation();let o=t.getItemId(s),m={location:"hotkeys.ts:173",message:"Item found, checking itemId",data:{itemFound:!0,itemId:o,itemTagName:s.tagName,itemClassName:s.className?.substring(0,50),itemIdAttr:s.id?.substring(0,30),targetTagName:l.tagName,timestamp:Date.now(),sessionId:"debug-session",runId:"run4",hypothesisId:"E"}};if(fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)}).catch(()=>{}),!o){let g={location:"hotkeys.ts:181",message:"No itemId found for clicked item",data:{itemTagName:s.tagName,itemClassName:s.className?.substring(0,50),targetTagName:l.tagName,timestamp:Date.now(),sessionId:"debug-session",runId:"run4",hypothesisId:"E"}};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)}).catch(()=>{});return}let h={location:"hotkeys.ts:186",message:"Creating confirmation modal",data:{itemId:o,itemTagName:s.tagName,timestamp:Date.now(),sessionId:"debug-session",runId:"run4",hypothesisId:"E"}};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)}).catch(()=>{});let f=Z({message:"Mark as SLOP?",onConfirm:async()=>{F(f),await e(o,s),W()},onCancel:()=>{F(f),W()}});O.currentModal=f,document.body.appendChild(f)}else{let o={location:"hotkeys.ts:201",message:"No item found for click",data:{targetTagName:l.tagName,targetClassName:l.className?.substring(0,50),targetId:l.id?.substring(0,30),platform:t.getPlatformName(),timestamp:Date.now(),sessionId:"debug-session",runId:"run4",hypothesisId:"E"}};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).catch(()=>{})}};document.addEventListener("click",c,!0);let a=()=>{document.removeEventListener("click",c,!0)};window.__slopTrashCleanup=a},W=()=>{O.isTrashMode=!1,document.body.classList.remove("slop-trash-cursor"),O.currentModal&&(F(O.currentModal),O.currentModal=null);let t=window.__slopTrashCleanup;t&&(t(),delete window.__slopTrashCleanup)},ht=async t=>{let e=Z({message:"Mark this website as SLOP?",onConfirm:async()=>{F(e);let c=await t();c.shouldBlock&&pt(c.reportCount)},onCancel:()=>{F(e)}});O.currentModal=e,document.body.appendChild(e)},pt=t=>{let e=document.createElement("div");e.className="slop-website-block-modal";let c=document.createElement("div");c.className="slop-website-block-gradient";let a=document.createElement("div");a.className="slop-website-block-content";let n=document.createElement("div");n.className="slop-website-block-icon",n.innerHTML="\u26A0\uFE0F",n.setAttribute("aria-hidden","true");let l=document.createElement("h2");l.className="slop-website-block-title",l.textContent="Access Restricted: Community-Flagged Slop";let i=document.createElement("p");i.className="slop-website-block-message",i.textContent="Human curators have identified this entire website as a primary source of AI-generated filler or low-quality content.";let d=document.createElement("div");d.className="slop-website-block-counter",d.textContent=`[${t}] Humans have flagged this domain as Slop`;let s=document.createElement("div");s.className="slop-website-block-buttons";let o=document.createElement("button");o.className="slop-website-block-button slop-website-block-return",o.textContent="Take me back to safety",o.setAttribute("aria-label","Return to previous page"),o.setAttribute("tabindex","0");let m=()=>{window.history.back(),e.remove()};o.addEventListener("click",m),o.addEventListener("keydown",u=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),m())});let h=document.createElement("button");h.className="slop-website-block-button slop-website-block-continue",h.textContent="Continue anyway",h.setAttribute("aria-label","Continue to website anyway"),h.setAttribute("tabindex","0");let f=()=>{e.remove()};h.addEventListener("click",f),h.addEventListener("keydown",u=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),f())}),s.appendChild(o),s.appendChild(h),a.appendChild(n),a.appendChild(l),a.appendChild(i),a.appendChild(d),a.appendChild(s),e.appendChild(c),e.appendChild(a),document.body.appendChild(e),document.body.style.overflow="hidden";let g=new MutationObserver(()=>{e.isConnected||(document.body.style.overflow="",g.disconnect())});g.observe(document.body,{childList:!0})};var I=new Map,Q=new Set,D=null,T=!0,H=null,rt=t=>{for(let e of I.values())if(e.itemId===t&&e.overlay&&e.overlay.parentNode!==null)return e;return null},tt=t=>t&&(t.message?.includes("Extension context invalidated")||t.message?.includes("message port closed")||t.message?.includes("Receiving end does not exist"))||!1,_=()=>{T&&(T=!1,console.warn("[Slop-Stop] Extension context invalidated, stopping evaluation"),I.forEach(t=>{t.overlay&&(t.overlay.__slopCleanup&&t.overlay.__slopCleanup(),t.overlay.parentNode&&t.overlay.parentNode.removeChild(t.overlay)),t.element&&(t.element.style.opacity="",t.element.style.visibility="",t.element.style.pointerEvents="")}),I.clear(),document.querySelectorAll("[data-slop-trash-icon]").forEach(t=>{t.remove()}),document.querySelectorAll("[data-slop-overlay]").forEach(t=>{t.__slopCleanup&&t.__slopCleanup(),t.remove()}))},ft=()=>{let t=window.location.href;if(D&&D.canHandleUrl(t))return D;switch(et(t)){case"twitter":D=new U;break;case"youtube":D=new $;break;case"linkedin":D=new G;break;default:D=new K}return D},gt=async(t,e)=>T?new Promise(c=>{try{chrome.runtime.sendMessage({type:"GET_SLOP_STATUS",payload:{itemId:t,platform:e}},a=>{if(chrome.runtime.lastError){if(tt(chrome.runtime.lastError))_();else{let n=chrome.runtime.lastError.message||"Unknown error";console.error("[Slop-Stop] Error checking slop status:",n)}c({isSlop:!1,reportCount:0});return}c(a||{isSlop:!1,reportCount:0})})}catch(a){let n=a instanceof Error?a.message:String(a);n.includes("Extension context invalidated")?_():console.error("[Slop-Stop] Exception checking slop status:",n),c({isSlop:!1,reportCount:0})}}):{isSlop:!1,reportCount:0},V=async(t,e)=>T?new Promise((c,a)=>{try{console.log("[Slop-Stop] reportSlop: sending message",{itemId:t,platform:e}),chrome.runtime.sendMessage({type:"REPORT_SLOP",payload:{itemId:t,platform:e}},n=>{if(chrome.runtime.lastError){console.error("[Slop-Stop] reportSlop: chrome.runtime.lastError",chrome.runtime.lastError),tt(chrome.runtime.lastError)?(_(),c()):a(chrome.runtime.lastError);return}if(console.log("[Slop-Stop] reportSlop: received response",n),n&&n.error){console.error("[Slop-Stop] reportSlop: response contains error",n.error),a(new Error(n.error));return}if(n&&n.success===!1){console.error("[Slop-Stop] reportSlop: response.success is false",n),a(new Error(n.error||"Report failed"));return}console.log("[Slop-Stop] reportSlop: success",n),c()})}catch(n){console.error("[Slop-Stop] reportSlop: exception",n),n instanceof Error&&n.message.includes("Extension context invalidated")?(_(),c()):a(n)}}):(console.warn("[Slop-Stop] reportSlop: context invalidated, returning"),Promise.resolve()),yt=async()=>T?new Promise(t=>{try{chrome.runtime.sendMessage({type:"REPORT_WEBSITE",payload:{url:window.location.href}},e=>{if(chrome.runtime.lastError){tt(chrome.runtime.lastError)?_():console.error("Error reporting website:",chrome.runtime.lastError),t({shouldBlock:!1,reportCount:0});return}t(e||{shouldBlock:!1,reportCount:0})})}catch(e){e instanceof Error&&e.message.includes("Extension context invalidated")&&_(),t({shouldBlock:!1,reportCount:0})}}):{shouldBlock:!1,reportCount:0},Y=async(t,e,c=!1)=>{let a={location:"content-main.ts:230",message:"processItem called",data:{forceOverlay:c,elementTagName:t.tagName,elementClassName:t.className?.substring(0,50),elementId:t.id?.substring(0,30),isConnected:t.isConnected,timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"E"}};if(fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).catch(()=>{}),!t.isConnected)return;let n=e.getItemId(t),l={location:"content-main.ts:236",message:"Got itemId",data:{itemId:n,forceOverlay:c,timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"C"}};if(fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).catch(()=>{}),!n||n.trim().length===0){console.warn("[Slop-Stop] Invalid itemId (empty or null):",{itemId:n,platform:e.getPlatformName(),elementTagName:t.tagName});return}if(e.getPlatformName()==="youtube"&&n.length<11){console.warn("[Slop-Stop] Invalid YouTube video ID (too short):",{itemId:n,length:n.length,platform:e.getPlatformName(),elementTagName:t.tagName,elementClassName:t.className?.substring(0,50)});return}if(!c){let r=rt(n);if(r){r.element!==t&&t.isConnected&&(I.delete(r.element),r.element=t,I.set(t,r),e.getPlatformName()==="youtube"&&console.log("[Slop-Stop] YouTube: Updated processed item element:",{itemId:n,oldElementTagName:r.element.tagName,newElementTagName:t.tagName,hasOverlay:!!r.overlay}));return}}let i=I.get(t);if(i){if(i.overlay&&!c||i.isShowing&&!c)return;if(i.overlay&&c)i.overlay.__slopCleanup&&i.overlay.__slopCleanup(),i.overlay.parentNode&&i.overlay.parentNode.removeChild(i.overlay),I.delete(t);else if(i.isShowing)I.delete(t);else if(!c)return}let d=e.getPlatformName(),s=await gt(n,d),o={location:"content-main.ts:284",message:"Slop status checked",data:{itemId:n,isSlop:s.isSlop,forceOverlay:c,reportCount:s.reportCount,willCreateOverlay:s.isSlop||c,timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"A"}};if(fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).catch(()=>{}),d==="youtube"&&console.log("[Slop-Stop] YouTube slop status check:",{itemId:n,isSlop:s.isSlop,reportCount:s.reportCount,forceOverlay:c,elementTagName:t.tagName,elementClassName:t.className?.substring(0,50)}),!s.isSlop&&!c)return;let m=c&&s.reportCount===0?1:s.reportCount,h=e.createGhostContainer(t);h.__createdAt=Date.now(),h.style.pointerEvents="auto";let f=t.querySelector("[data-slop-trash-icon]");f&&f.parentElement===t&&(h.appendChild(f),f.style.zIndex="1000000");let g=nt({reportCount:m,platform:d,onShow:()=>{let r=I.get(t);if(!r||r.isShowing)return;if(!t.isConnected){r.overlay&&r.overlay.parentNode&&r.overlay.parentNode.removeChild(r.overlay),I.delete(t);return}r.isShowing=!0,h.__slopCleanup&&h.__slopCleanup(),h.parentNode&&h.parentNode.removeChild(h),t.style.removeProperty("opacity"),t.style.removeProperty("pointer-events"),t.style.removeProperty("visibility"),t.style.removeProperty("min-height");let p=h.querySelector("[data-slop-trash-icon]");p&&p.parentElement===h&&(t.appendChild(p),p.style.zIndex="999999"),Array.from(t.children).forEach(C=>{C!==h&&C.getAttribute("data-slop-overlay")!=="true"&&(C.style.removeProperty("visibility"),C.style.removeProperty("pointer-events"))}),t.querySelectorAll("img, yt-img-shadow img, yt-image img, video, ytd-thumbnail video, svg").forEach(C=>{C.style.removeProperty("visibility"),C.style.removeProperty("pointer-events")});let E=t.getAttribute("data-slop-original-overflow");E!==null&&(Array.from(I.values()).some(x=>x.overlay&&x.element===t&&x!==r)||(E===""?t.style.removeProperty("overflow"):t.style.overflow=E,t.removeAttribute("data-slop-original-overflow")));let N=window.getComputedStyle(t);t.style.position==="relative"&&N.position==="relative"&&(Array.from(I.values()).some(x=>x.overlay&&x.element===t&&x!==r)||t.style.removeProperty("position")),t.offsetHeight,r.overlay=null,t.style.pointerEvents=""},onReport:async()=>{try{await V(n,d).catch(()=>{})}catch{}}});h.appendChild(g),h.style.display="flex",h.style.opacity="1",h.style.visibility="visible",I.set(t,{element:t,itemId:n,overlay:h,isShowing:!1}),d==="youtube"&&console.log("[Slop-Stop] YouTube overlay created:",{itemId:n,elementTagName:t.tagName,elementClassName:t.className?.substring(0,50),overlayCreated:!!h,processedItemsCount:I.size});let u={location:"content-main.ts:411",message:"Overlay created and stored",data:{itemId:n,elementTagName:t.tagName,processedItemsCount:I.size,forceOverlay:c,timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"E"}};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}).catch(()=>{})},bt=(t,e)=>{if(t.querySelector("[data-slop-trash-icon]"))return;let c=t.tagName==="MAIN"||t.id==="workspace",a={location:"content-main.ts:440",message:"addTrashIconToItem called",data:{elementTagName:t.tagName,elementClassName:t.className?.substring(0,50),elementId:t.id?.substring(0,30),elementTextLength:t.textContent?.length,elementChildrenCount:t.children.length,isMainFeed:c,platform:e.getPlatformName(),timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"F"}};if(fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).catch(()=>{}),e.getPlatformName()==="linkedin"){if(t.tagName==="MAIN"||t.id==="workspace"){let g={location:"content-main.ts:448",message:"Skipping trash icon - main feed container",data:{elementTagName:t.tagName,elementId:t.id,timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"G"}};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)}).catch(()=>{});return}let f=document.querySelector("main#workspace");if(f&&t.parentElement===f){let g=t.textContent?.length||0,u=t.querySelectorAll('button, [role="button"]').length,r=(t.children.length>=1||u>=1)&&(g>50||t.querySelector("img, video"));if(g>5e3&&u<2){let p={location:"content-main.ts:460",message:"Skipping trash icon - likely feed container",data:{elementTagName:t.tagName,elementId:t.id,textLength:g,hasSubstantialContent:r,buttons:u,isDirectChildOfMain:!0,timestamp:Date.now(),sessionId:"debug-session",runId:"run4",hypothesisId:"A"}};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}).catch(()=>{});return}if(!r&&g<50){let p={location:"content-main.ts:475",message:"Skipping trash icon - no substantial content",data:{elementTagName:t.tagName,elementId:t.id,textLength:g,childrenCount:t.children.length,buttons:u,isDirectChildOfMain:!0,timestamp:Date.now(),sessionId:"debug-session",runId:"run4",hypothesisId:"A"}};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}).catch(()=>{});return}}}let n=document.createElement("button");n.className="slop-item-trash-icon",n.setAttribute("data-slop-trash-icon","true"),n.setAttribute("aria-label","Report as slop"),n.setAttribute("tabindex","0"),n.innerHTML=`
    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M2 4h12M5 4V2a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2m-6 0v10a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1V4M6 7v6M10 7v6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
    </svg>
  `,n.style.position="absolute",n.style.padding="0.5rem",n.style.background="rgba(0, 0, 0, 0.6)",n.style.color="#ffffff",n.style.border="none",n.style.borderRadius="50%",n.style.cursor="pointer",n.style.display="flex",n.style.alignItems="center",n.style.justifyContent="center",n.style.zIndex="999999",n.style.opacity="0",n.style.transition="opacity 0.2s, background-color 0.2s",n.style.pointerEvents="auto",n.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.3)",e.getPlatformName()==="linkedin"?(n.style.top="0.5rem",n.style.right="0.5rem",n.style.opacity="1"):(n.style.bottom="0.5rem",n.style.right="0.5rem");let l=async f=>{f.preventDefault(),f.stopPropagation(),f.stopImmediatePropagation();let g={location:"content-main.ts:435",message:"Trash icon clicked",data:{elementTagName:t.tagName,elementClassName:t.className?.substring(0,50),elementId:t.id?.substring(0,30),timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"D"}};if(fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)}).catch(()=>{}),!T){console.warn("[Slop-Stop] trashIcon click: context invalidated");return}try{let u=e.getItemId(t),r={location:"content-main.ts:446",message:"Trash icon got itemId",data:{itemId:u,elementTagName:t.tagName,timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"C"}};if(fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).catch(()=>{}),!u||u.trim().length===0){console.warn("[Slop-Stop] Invalid itemId when reporting slop (empty or null):",{itemId:u,platform:e.getPlatformName(),elementTagName:t.tagName,elementClassName:t.className?.substring(0,50)});return}if(e.getPlatformName()==="youtube"&&u.length<11){console.warn("[Slop-Stop] Invalid YouTube video ID when reporting slop (too short):",{itemId:u,length:u.length,platform:e.getPlatformName(),elementTagName:t.tagName,elementClassName:t.className?.substring(0,50)});return}if(T)try{await V(u,e.getPlatformName()),await Y(t,e,!0).catch(p=>{console.error("[Slop-Stop] trashIcon: processItem failed",p)})}catch(p){console.error("[Slop-Stop] trashIcon: reportSlop failed",p)}}catch(u){console.error("[Slop-Stop] trashIcon click: ERROR",u)}};n.addEventListener("click",l,!0),n.addEventListener("mousedown",f=>{f.preventDefault(),f.stopPropagation(),f.stopImmediatePropagation()},!0),n.style.cssText=`
    position: absolute;
    bottom: 0.5rem;
    right: 0.5rem;
    padding: 0.5rem;
    background: rgba(0, 0, 0, 0.6);
    color: #ffffff;
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 999999;
    opacity: 0;
    transition: opacity 0.2s, background-color 0.2s;
    pointer-events: auto !important;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  `;let i=window.getComputedStyle(t);i.position==="static"&&(t.style.position="relative"),i.overflow==="hidden"&&(t.hasAttribute("data-slop-original-overflow")||t.setAttribute("data-slop-original-overflow",i.overflow),t.style.overflow="visible");let d=()=>{n.style.opacity="1"},s=()=>{n.style.opacity="0"};t.addEventListener("mouseenter",d),t.addEventListener("mouseleave",s),n.addEventListener("mouseenter",d),n.addEventListener("mouseleave",s),n.addEventListener("mouseenter",()=>{n.style.backgroundColor="rgba(255, 255, 255, 0.1)"}),n.addEventListener("mouseleave",()=>{n.style.backgroundColor="rgba(0, 0, 0, 0.6)"}),t.appendChild(n);let o=window.getComputedStyle(t),m=window.getComputedStyle(n),h={location:"content-main.ts:613",message:"Trash icon added successfully",data:{elementTagName:t.tagName,elementClassName:t.className?.substring(0,50),elementId:t.id?.substring(0,30),elementTextLength:t.textContent?.length,platform:e.getPlatformName(),elementPosition:o.position,elementOverflow:o.overflow,elementZIndex:o.zIndex,trashIconPosition:m.position,trashIconOpacity:m.opacity,trashIconVisibility:m.visibility,trashIconZIndex:m.zIndex,trashIconDisplay:m.display,trashIconInDOM:n.isConnected,timestamp:Date.now(),sessionId:"debug-session",runId:"run4",hypothesisId:"C"}};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)}).catch(()=>{}),console.log("[Slop-Stop] Trash icon added to element:",{tagName:t.tagName,className:t.className?.substring(0,50),textLength:t.textContent?.length}),t.__slopTrashIcon=n};typeof window<"u"&&(window.addEventListener("unhandledrejection",t=>{let e=t.reason;e instanceof Error&&(e.message.includes("Extension context invalidated")||e.message.includes("message port closed")||e.message.includes("Receiving end does not exist")||e.message.includes("chrome-extension://invalid"))&&(t.preventDefault(),_())}),window.addEventListener("error",t=>{if(t.message&&t.message.includes("chrome-extension://invalid"))return t.preventDefault(),!1},!0));var at=()=>{let t=ft(),e=async i=>{if(!T)return;console.log(`[Slop-Stop] handleNewItems called with ${i.length} items`);let d={location:"content-main.ts:569",message:"handleNewItems called",data:{itemsCount:i.length,items:i.slice(0,3).map(s=>({tagName:s.tagName,className:s.className?.substring(0,50),id:s.id?.substring(0,30)})),timestamp:Date.now(),sessionId:"debug-session",runId:"run3",hypothesisId:"A"}};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}).catch(()=>{});for(let s=0;s<i.length;s++){let o=i[s];if(!T)break;let m=t.getItemId(o);t.getPlatformName()==="youtube"&&console.log("[Slop-Stop] YouTube item processing:",{itemIndex:s,itemId:m,itemIdLength:m?.length,tagName:o.tagName,className:o.className?.substring(0,50),elementId:o.id?.substring(0,30)});let h={location:"content-main.ts:582",message:"Processing item",data:{itemIndex:s,itemId:m,itemTagName:o.tagName,itemClassName:o.className?.substring(0,50),itemIdAttr:o.id?.substring(0,30),platform:t.getPlatformName(),timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"C"}};if(fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)}).catch(()=>{}),!m||m.trim().length===0){console.log("[Slop-Stop] Skipping item without ID:",{tagName:o.tagName,className:o.className?.substring(0,50),textLength:o.textContent?.length,platform:t.getPlatformName()});let p={location:"content-main.ts:686",message:"Skipping item - no ID",data:{itemIndex:s,itemTagName:o.tagName,itemClassName:o.className?.substring(0,50),itemIdAttr:o.id?.substring(0,30),itemTextLength:o.textContent?.length,itemChildrenCount:o.children.length,platform:t.getPlatformName(),timestamp:Date.now(),sessionId:"debug-session",runId:"run4",hypothesisId:"B"}};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}).catch(()=>{});continue}if(t.getPlatformName()==="youtube"&&m.length<11){console.warn("[Slop-Stop] Invalid YouTube video ID (too short):",{itemId:m,length:m.length,tagName:o.tagName,className:o.className?.substring(0,50),itemIndex:s});let p={location:"content-main.ts:700",message:"Skipping item - invalid YouTube ID",data:{itemId:m,itemIdLength:m.length,itemIndex:s,itemTagName:o.tagName,itemClassName:o.className?.substring(0,50),timestamp:Date.now(),sessionId:"debug-session",runId:"run4",hypothesisId:"B"}};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}).catch(()=>{});continue}if(o.querySelector("[data-slop-trash-icon]")||document.querySelector('[data-slop-overlay="true"] [data-slop-trash-icon]')){console.log("[Slop-Stop] Trash icon already exists for item:",{itemId:m,tagName:o.tagName});let p={location:"content-main.ts:722",message:"Trash icon already exists",data:{itemId:m,itemTagName:o.tagName,timestamp:Date.now(),sessionId:"debug-session",runId:"run4",hypothesisId:"A"}};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}).catch(()=>{})}else try{console.log("[Slop-Stop] Adding trash icon to item:",{itemId:m,tagName:o.tagName,className:o.className?.substring(0,50),textLength:o.textContent?.length});let p={location:"content-main.ts:699",message:"About to call addTrashIconToItem",data:{itemId:m,itemTagName:o.tagName,itemClassName:o.className?.substring(0,50),itemIdAttr:o.id?.substring(0,30),itemTextLength:o.textContent?.length,itemChildrenCount:o.children.length,isConnected:o.isConnected,timestamp:Date.now(),sessionId:"debug-session",runId:"run4",hypothesisId:"A"}};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}).catch(()=>{}),bt(o,t);let b=o.querySelector("[data-slop-trash-icon]"),S={location:"content-main.ts:710",message:"After addTrashIconToItem call",data:{itemId:m,trashIconFound:!!b,trashIconInDOM:!!document.querySelector(`[data-slop-trash-icon][data-item-id="${m}"]`),itemTagName:o.tagName,timestamp:Date.now(),sessionId:"debug-session",runId:"run4",hypothesisId:"C"}};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)}).catch(()=>{})}catch(p){console.error("[Slop-Stop] Error adding trash icon:",p);let b={location:"content-main.ts:714",message:"Error adding trash icon",data:{itemId:m,errorMessage:p instanceof Error?p.message:String(p),itemTagName:o.tagName,timestamp:Date.now(),sessionId:"debug-session",runId:"run4",hypothesisId:"A"}};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}).catch(()=>{})}let g=I.get(o),u=Q.has(o),r=rt(m)!==null;if(!(u||r)&&(!g||!g.overlay&&!g.isShowing)){let p=!!g,b=g?!!g.overlay:!1,S=g?!!g.isShowing:!1,E={location:"content-main.ts:615",message:"About to processItem",data:{itemId:m,hasExistingItem:p,hasOverlay:b,isShowing:S,timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"A"}};fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)}).catch(()=>{}),Q.add(o);try{await Y(o,t).catch(N=>{})}catch(N){if(N instanceof Error&&N.message.includes("Extension context invalidated")){_();break}}finally{Q.delete(o)}}}},c=t.observeItems(e),a=new MutationObserver(i=>{if(!T)return;let d=[];I.forEach((s,o)=>{o.isConnected?s.overlay&&!s.overlay.parentNode?(s.overlay.__slopCleanup&&s.overlay.__slopCleanup(),s.isShowing=!0,s.overlay=null):s.overlay&&s.overlay.parentNode!==o&&!s.isShowing&&(s.overlay.__slopCleanup&&s.overlay.__slopCleanup(),s.overlay.parentNode&&s.overlay.parentNode.removeChild(s.overlay),d.push(o)):(s.overlay&&(s.overlay.__slopCleanup&&s.overlay.__slopCleanup(),s.overlay.parentNode&&s.overlay.parentNode.removeChild(s.overlay)),o.style&&(o.style.removeProperty("opacity"),o.style.removeProperty("visibility"),o.style.removeProperty("pointer-events"),o.style.removeProperty("position")),d.push(o))}),d.forEach(s=>{I.delete(s)}),document.querySelectorAll("[data-slop-overlay]").forEach(s=>{if(!Array.from(I.values()).some(m=>m.overlay===s)&&s.parentNode){let m=s.__createdAt||0;Date.now()-m>2e3&&s.parentNode.removeChild(s)}})});a.observe(document.body,{childList:!0,subtree:!0});let n=st(t,async(i,d)=>{let s={location:"content-main.ts:714",message:"onReportSlop called from hotkeys",data:{itemId:i,elementTagName:d.tagName,elementClassName:d.className?.substring(0,50),elementIdAttr:d.id?.substring(0,30),isConnected:d.isConnected,timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"D"}};if(fetch("http://127.0.0.1:7243/ingest/b2719b1f-0fda-42ef-a1bf-85265994e0a0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).catch(()=>{}),!!T)try{try{await V(i,t.getPlatformName())}catch{}T&&d&&d.isConnected&&await Y(d,t,!0).catch(()=>{})}catch{}},yt),l=i=>{if(!T)return;let d=i.target,s=null;if(t.getPlatformName()==="linkedin")s=z(d,t);else{let o=t.getItemSelector();s=d.closest(o)}s?H=s:H=null};document.addEventListener("contextmenu",l,!0),window.addEventListener("beforeunload",()=>{c(),a.disconnect(),n(),document.removeEventListener("contextmenu",l,!0)}),chrome.runtime.onMessage.addListener((i,d,s)=>{if(i.type==="KEYBOARD_COMMAND"){let o=i.command;if(o==="toggle-trash-mode"){let m=new KeyboardEvent("keydown",{key:"s",altKey:!0,ctrlKey:!1,metaKey:!1,bubbles:!0,cancelable:!0});document.dispatchEvent(m)}else if(o==="report-website"){let m=new KeyboardEvent("keydown",{key:"u",altKey:!0,ctrlKey:!1,metaKey:!1,bubbles:!0,cancelable:!0});document.dispatchEvent(m)}return s({success:!0}),!0}else if(i.type==="CONTEXT_MENU_REPORT_SLOP")return H&&T&&(async()=>{try{let m=t.getItemId(H);m&&T&&(await V(m,t.getPlatformName()),T&&H&&H.isConnected&&await Y(H,t,!0).catch(()=>{}))}catch{}finally{H=null}})(),s({success:!0}),!0;return!1})};try{let t=window.self!==window.top,e=window.location.href==="about:blank"||window.location.href==="about:srcdoc";t||e?console.log("[Slop-Stop] Content script skipped: running in iframe or sandboxed frame",{isInIframe:t,isAboutBlank:e,location:window.location.href}):document.readyState==="loading"?document.addEventListener("DOMContentLoaded",at):at()}catch(t){console.warn("[Slop-Stop] Error checking frame context, skipping initialization:",t)}})();
//# sourceMappingURL=content-main.js.map
